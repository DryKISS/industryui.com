/*! For license information please see 11.498df6e5.iframe.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{4155:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"pdfjs",(function(){return pdf_default.a})),__webpack_require__.d(__webpack_exports__,"Document",(function(){return Document_Document})),__webpack_require__.d(__webpack_exports__,"Outline",(function(){return esm_Outline})),__webpack_require__.d(__webpack_exports__,"Page",(function(){return esm_Page}));var build_pdf=__webpack_require__(4216),pdf_default=__webpack_require__.n(build_pdf),esm_extends=__webpack_require__(15),objectWithoutProperties=__webpack_require__(378),esm_typeof=__webpack_require__(1625),regenerator=__webpack_require__(45),regenerator_default=__webpack_require__.n(regenerator);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var classCallCheck=__webpack_require__(326),createClass=__webpack_require__(256),assertThisInitialized=__webpack_require__(250),inherits=__webpack_require__(327),possibleConstructorReturn=__webpack_require__(349),getPrototypeOf=__webpack_require__(198),defineProperty=__webpack_require__(125),react=__webpack_require__(0),react_default=__webpack_require__.n(react),prop_types=__webpack_require__(1),prop_types_default=__webpack_require__.n(prop_types),entry=__webpack_require__(4218),entry_default=__webpack_require__.n(entry),dist=__webpack_require__(4217),dist_default=__webpack_require__.n(dist);function mergeClassNames(){return Array.prototype.slice.call(arguments).reduce((function(classList,arg){return classList.concat(arg)}),[]).filter((function(arg){return"string"==typeof arg})).join(" ")}var DocumentContext=Object(react.createContext)(null);function Message(_ref){var children=_ref.children,type=_ref.type;return react_default.a.createElement("div",{className:"react-pdf__message react-pdf__message--".concat(type)},children)}Message.propTypes={children:prop_types_default.a.node,type:prop_types_default.a.oneOf(["error","loading","no-data"]).isRequired};var result,LinkService=__webpack_require__(4306).PDFLinkService,esm_PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},eventBus=new(__webpack_require__(4236).EventBus),isBrowser="undefined"!=typeof window,isLocalFileSystem=isBrowser&&"file:"===window.location.protocol,isDefined=function isDefined(variable){return void 0!==variable},isProvided=function isProvided(variable){return isDefined(variable)&&null!==variable},isArrayBuffer=function isArrayBuffer(variable){return variable instanceof ArrayBuffer},isBlob=function isBlob(variable){if(!isBrowser)throw new Error("Attempted to check if a variable is a Blob on a non-browser environment.");return variable instanceof Blob},isFile=function isFile(variable){if(!isBrowser)throw new Error("Attempted to check if a variable is a File on a non-browser environment.");return variable instanceof File},isDataURI=function isDataURI(str){return function isString(variable){return"string"==typeof variable}(str)&&/^data:/.test(str)},dataURItoUint8Array=function dataURItoUint8Array(dataURI){if(!isDataURI(dataURI))throw new Error("dataURItoUint8Array was provided with an argument which is not a valid data URI.");var byteString;byteString=dataURI.split(",")[0].indexOf("base64")>=0?atob(dataURI.split(",")[1]):unescape(dataURI.split(",")[1]);for(var ia=new Uint8Array(byteString.length),i=0;i<byteString.length;i+=1)ia[i]=byteString.charCodeAt(i);return ia},consoleOnDev=function consoleOnDev(method){},warnOnDev=function warnOnDev(){for(var _len2=arguments.length,message=new Array(_len2),_key2=0;_key2<_len2;_key2++)message[_key2]=arguments[_key2];return consoleOnDev.apply(void 0,["warn"].concat(message))},errorOnDev=function errorOnDev(){for(var _len3=arguments.length,message=new Array(_len3),_key3=0;_key3<_len3;_key3++)message[_key3]=arguments[_key3];return consoleOnDev.apply(void 0,["error"].concat(message))},displayCORSWarning=function displayCORSWarning(){isLocalFileSystem&&warnOnDev("Loading PDF as base64 strings/URLs might not work on protocols other than HTTP/HTTPS. On Google Chrome, you can use --allow-file-access-from-files flag for debugging purposes.")},cancelRunningTask=function cancelRunningTask(runningTask){runningTask&&runningTask.cancel&&runningTask.cancel()},makePageCallback=function makePageCallback(page,scale){return Object.defineProperty(page,"width",{get:function get(){return this.view[2]*scale},configurable:!0}),Object.defineProperty(page,"height",{get:function get(){return this.view[3]*scale},configurable:!0}),Object.defineProperty(page,"originalWidth",{get:function get(){return this.view[2]},configurable:!0}),Object.defineProperty(page,"originalHeight",{get:function get(){return this.view[3]},configurable:!0}),page},isCancelException=function isCancelException(error){return"RenderingCancelledException"===error.name},loadFromFile=function loadFromFile(file){return new Promise((function(resolve,reject){var reader=new FileReader;return reader.onload=function(){return resolve(new Uint8Array(reader.result))},reader.onerror=function(event){switch(event.target.error.code){case event.target.error.NOT_FOUND_ERR:return reject(new Error("Error while reading a file: File not found."));case event.target.error.NOT_READABLE_ERR:return reject(new Error("Error while reading a file: File not readable."));case event.target.error.SECURITY_ERR:return reject(new Error("Error while reading a file: Security error."));case event.target.error.ABORT_ERR:return reject(new Error("Error while reading a file: Aborted."));default:return reject(new Error("Error while reading a file."))}},reader.readAsArrayBuffer(file),null}))},toConsumableArray=__webpack_require__(1591),eventProps=(result={},[].concat(Object(toConsumableArray.a)(entry.mouseEvents),Object(toConsumableArray.a)(entry.touchEvents),Object(toConsumableArray.a)(entry.keyboardEvents)).forEach((function(eventName){result[eventName]=prop_types_default.a.func})),result),fileTypes=[prop_types_default.a.string,prop_types_default.a.instanceOf(ArrayBuffer),prop_types_default.a.shape({data:prop_types_default.a.object,httpHeaders:prop_types_default.a.object,range:prop_types_default.a.object,url:prop_types_default.a.string,withCredentials:prop_types_default.a.bool})];"undefined"!=typeof File&&fileTypes.push(prop_types_default.a.instanceOf(File)),"undefined"!=typeof Blob&&fileTypes.push(prop_types_default.a.instanceOf(Blob));var isClassName=prop_types_default.a.oneOfType([prop_types_default.a.string,prop_types_default.a.arrayOf(prop_types_default.a.string)]),isLinkService=(prop_types_default.a.oneOfType(fileTypes),prop_types_default.a.instanceOf(LinkService)),isPage=(prop_types_default.a.oneOf(["_self","_blank","_parent","_top"]),prop_types_default.a.shape({_transport:prop_types_default.a.shape({fontLoader:prop_types_default.a.object.isRequired}).isRequired,commonObjs:prop_types_default.a.shape({_objs:prop_types_default.a.object.isRequired}).isRequired,getAnnotations:prop_types_default.a.func.isRequired,getTextContent:prop_types_default.a.func.isRequired,getViewport:prop_types_default.a.func.isRequired,render:prop_types_default.a.func.isRequired})),isPdf=prop_types_default.a.oneOfType([prop_types_default.a.shape({getDestination:prop_types_default.a.func.isRequired,getOutline:prop_types_default.a.func.isRequired,getPage:prop_types_default.a.func.isRequired,numPages:prop_types_default.a.number.isRequired}),prop_types_default.a.bool]),isRenderMode=prop_types_default.a.oneOf(["canvas","none","svg"]),isRotate=prop_types_default.a.oneOf([0,90,180,270]);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var PDFDataRangeTransport=pdf_default.a.PDFDataRangeTransport,Document_Document=function(_PureComponent){Object(inherits.a)(Document,_PureComponent);var _super=function _createSuper(Derived){return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(_isNativeReflectConstruct()){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}(Document);function Document(){var _this;Object(classCallCheck.a)(this,Document);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"state",{pdf:null}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"viewer",{scrollPageIntoView:function scrollPageIntoView(_ref){var pageNumber=_ref.pageNumber,onItemClick=_this.props.onItemClick;if(onItemClick)onItemClick({pageNumber:pageNumber});else{var page=_this.pages[pageNumber-1];page?page.scrollIntoView():warnOnDev("Warning: An internal link leading to page ".concat(pageNumber," was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>."))}}}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"linkService",new LinkService({eventBus:eventBus})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"loadDocument",_asyncToGenerator(regenerator_default.a.mark((function _callee(){var source,_this$props,options,onLoadProgress,onPassword,cancellable,pdf;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return source=null,_context.prev=1,_context.next=4,_this.findDocumentSource();case 4:source=_context.sent,_this.onSourceSuccess(),_context.next=11;break;case 8:_context.prev=8,_context.t0=_context.catch(1),_this.onSourceError(_context.t0);case 11:if(source){_context.next=13;break}return _context.abrupt("return");case 13:return _this.setState((function(prevState){return prevState.pdf?{pdf:null}:null})),_this$props=_this.props,options=_this$props.options,onLoadProgress=_this$props.onLoadProgress,onPassword=_this$props.onPassword,_context.prev=15,cancelRunningTask(_this.runningTask),_this.loadingTask=pdf_default.a.getDocument(_objectSpread({},source,{},options)),_this.loadingTask.onPassword=onPassword,onLoadProgress&&(_this.loadingTask.onProgress=onLoadProgress),cancellable=dist_default()(_this.loadingTask.promise),_this.runningTask=cancellable,_context.next=24,cancellable.promise;case 24:pdf=_context.sent,_this.setState((function(prevState){return prevState.pdf&&prevState.pdf.fingerprint===pdf.fingerprint?null:{pdf:pdf}}),_this.onLoadSuccess),_context.next=31;break;case 28:_context.prev=28,_context.t1=_context.catch(15),_this.onLoadError(_context.t1);case 31:case"end":return _context.stop()}}),_callee,null,[[1,8],[15,28]])})))),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"setupLinkService",(function(){_this.linkService.setViewer(_this.viewer);var documentInstance=Object(assertThisInitialized.a)(_this);Object.defineProperty(_this.linkService,"externalLinkTarget",{get:function get(){switch(documentInstance.props.externalLinkTarget){case"_self":return 1;case"_blank":return 2;case"_parent":return 3;case"_top":return 4;default:return 0}}})})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"onSourceSuccess",(function(){var onSourceSuccess=_this.props.onSourceSuccess;onSourceSuccess&&onSourceSuccess()})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"onSourceError",(function(error){errorOnDev(error);var onSourceError=_this.props.onSourceError;onSourceError&&onSourceError(error)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"onLoadSuccess",(function(){var onLoadSuccess=_this.props.onLoadSuccess,pdf=_this.state.pdf;onLoadSuccess&&onLoadSuccess(pdf),_this.pages=new Array(pdf.numPages),_this.linkService.setDocument(pdf)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"onLoadError",(function(error){_this.setState({pdf:!1}),errorOnDev(error);var onLoadError=_this.props.onLoadError;onLoadError&&onLoadError(error)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"findDocumentSource",_asyncToGenerator(regenerator_default.a.mark((function _callee2(){var file,fileUint8Array,url,otherParams,_fileUint8Array;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(file=_this.props.file){_context2.next=3;break}return _context2.abrupt("return",null);case 3:if("string"!=typeof file){_context2.next=9;break}if(!isDataURI(file)){_context2.next=7;break}return fileUint8Array=dataURItoUint8Array(file),_context2.abrupt("return",{data:fileUint8Array});case 7:return displayCORSWarning(),_context2.abrupt("return",{url:file});case 9:if(!(file instanceof PDFDataRangeTransport)){_context2.next=11;break}return _context2.abrupt("return",{range:file});case 11:if(!isArrayBuffer(file)){_context2.next=13;break}return _context2.abrupt("return",{data:file});case 13:if(!isBrowser){_context2.next=19;break}if(!isBlob(file)&&!isFile(file)){_context2.next=19;break}return _context2.next=17,loadFromFile(file);case 17:return _context2.t0=_context2.sent,_context2.abrupt("return",{data:_context2.t0});case 19:if("object"===Object(esm_typeof.a)(file)){_context2.next=21;break}throw new Error("Invalid parameter in file, need either Uint8Array, string or a parameter object");case 21:if(file.url||file.data||file.range){_context2.next=23;break}throw new Error("Invalid parameter object: need either .data, .range or .url");case 23:if("string"!=typeof file.url){_context2.next=29;break}if(!isDataURI(file.url)){_context2.next=28;break}return url=file.url,otherParams=Object(objectWithoutProperties.a)(file,["url"]),_fileUint8Array=dataURItoUint8Array(url),_context2.abrupt("return",_objectSpread({data:_fileUint8Array},otherParams));case 28:displayCORSWarning();case 29:return _context2.abrupt("return",file);case 30:case"end":return _context2.stop()}}),_callee2)})))),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"registerPage",(function(pageIndex,ref){_this.pages[pageIndex]=ref})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"unregisterPage",(function(pageIndex){delete _this.pages[pageIndex]})),_this}return Object(createClass.a)(Document,[{key:"componentDidMount",value:function componentDidMount(){this.loadDocument(),this.setupLinkService()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){this.props.file!==prevProps.file&&this.loadDocument()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.loadingTask&&this.loadingTask.destroy(),cancelRunningTask(this.runningTask)}},{key:"renderChildren",value:function renderChildren(){var children=this.props.children;return react_default.a.createElement(DocumentContext.Provider,{value:this.childContext},children)}},{key:"renderContent",value:function renderContent(){var file=this.props.file,pdf=this.state.pdf;if(!file){var noData=this.props.noData;return react_default.a.createElement(Message,{type:"no-data"},"function"==typeof noData?noData():noData)}if(null===pdf){var loading=this.props.loading;return react_default.a.createElement(Message,{type:"loading"},"function"==typeof loading?loading():loading)}if(!1===pdf){var error=this.props.error;return react_default.a.createElement(Message,{type:"error"},"function"==typeof error?error():error)}return this.renderChildren()}},{key:"render",value:function render(){var _this$props2=this.props,className=_this$props2.className,inputRef=_this$props2.inputRef;return react_default.a.createElement("div",Object(esm_extends.a)({className:mergeClassNames("react-pdf__Document",className),ref:inputRef},this.eventProps),this.renderContent())}},{key:"childContext",get:function get(){var linkService=this.linkService,registerPage=this.registerPage,unregisterPage=this.unregisterPage,_this$props3=this.props,renderMode=_this$props3.renderMode,rotate=_this$props3.rotate;return{linkService:linkService,pdf:this.state.pdf,registerPage:registerPage,renderMode:renderMode,rotate:rotate,unregisterPage:unregisterPage}}},{key:"eventProps",get:function get(){var _this2=this;return entry_default()(this.props,(function(){return _this2.state.pdf}))}}]),Document}(react.PureComponent);Document_Document.defaultProps={error:"Failed to load PDF file.",loading:"Loading PDFâ€¦",noData:"No PDF file specified.",onPassword:function onPassword(callback,reason){switch(reason){case esm_PasswordResponses.NEED_PASSWORD:callback(prompt("Enter the password to open this PDF file."));break;case esm_PasswordResponses.INCORRECT_PASSWORD:callback(prompt("Invalid password. Please try again."))}}};var isFunctionOrNode=prop_types_default.a.oneOfType([prop_types_default.a.func,prop_types_default.a.node]);Document_Document.propTypes=_objectSpread({},eventProps,{children:prop_types_default.a.node,className:isClassName,error:isFunctionOrNode,file:isFile,inputRef:prop_types_default.a.func,loading:isFunctionOrNode,noData:isFunctionOrNode,onItemClick:prop_types_default.a.func,onLoadError:prop_types_default.a.func,onLoadProgress:prop_types_default.a.func,onLoadSuccess:prop_types_default.a.func,onPassword:prop_types_default.a.func,onSourceError:prop_types_default.a.func,onSourceSuccess:prop_types_default.a.func,rotate:prop_types_default.a.number});var OutlineContext=Object(react.createContext)(null);var unsupportedIterableToArray=__webpack_require__(2208);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||Object(unsupportedIterableToArray.a)(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ref_Ref=function(){function Ref(_ref){var num=_ref.num,gen=_ref.gen;Object(classCallCheck.a)(this,Ref),this.num=num,this.gen=gen}return Object(createClass.a)(Ref,[{key:"toString",value:function toString(){var str="".concat(this.num,"R");return 0!==this.gen&&(str+=this.gen),str}}]),Ref}();function OutlineItem_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var OutlineItem_OutlineItemInternal=function(_PureComponent){Object(inherits.a)(OutlineItemInternal,_PureComponent);var _super=function OutlineItem_createSuper(Derived){return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(OutlineItem_isNativeReflectConstruct()){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}(OutlineItemInternal);function OutlineItemInternal(){var _this;Object(classCallCheck.a)(this,OutlineItemInternal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"getDestination",_asyncToGenerator(regenerator_default.a.mark((function _callee(){var _this$props,item,pdf;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_this$props=_this.props,item=_this$props.item,pdf=_this$props.pdf,isDefined(_this.destination)){_context.next=9;break}if("string"!=typeof item.dest){_context.next=8;break}return _context.next=5,pdf.getDestination(item.dest);case 5:_this.destination=_context.sent,_context.next=9;break;case 8:_this.destination=item.dest;case 9:return _context.abrupt("return",_this.destination);case 10:case"end":return _context.stop()}}),_callee)})))),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"getPageIndex",_asyncToGenerator(regenerator_default.a.mark((function _callee2(){var pdf,destination,_destination,ref;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(pdf=_this.props.pdf,isDefined(_this.pageIndex)){_context2.next=10;break}return _context2.next=4,_this.getDestination();case 4:if(!(destination=_context2.sent)){_context2.next=10;break}return _destination=_slicedToArray(destination,1),ref=_destination[0],_context2.next=9,pdf.getPageIndex(new Ref_Ref(ref));case 9:_this.pageIndex=_context2.sent;case 10:return _context2.abrupt("return",_this.pageIndex);case 11:case"end":return _context2.stop()}}),_callee2)})))),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"getPageNumber",_asyncToGenerator(regenerator_default.a.mark((function _callee3(){return regenerator_default.a.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(isDefined(_this.pageNumber)){_context3.next=5;break}return _context3.next=3,_this.getPageIndex();case 3:_context3.t0=_context3.sent,_this.pageNumber=_context3.t0+1;case 5:return _context3.abrupt("return",_this.pageNumber);case 6:case"end":return _context3.stop()}}),_callee3)})))),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"onClick",function(){var _ref4=_asyncToGenerator(regenerator_default.a.mark((function _callee4(event){var onClick,pageIndex,pageNumber;return regenerator_default.a.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return onClick=_this.props.onClick,event.preventDefault(),_context4.next=4,_this.getPageIndex();case 4:return pageIndex=_context4.sent,_context4.next=7,_this.getPageNumber();case 7:pageNumber=_context4.sent,onClick&&onClick({pageIndex:pageIndex,pageNumber:pageNumber});case 9:case"end":return _context4.stop()}}),_callee4)})));return function(_x){return _ref4.apply(this,arguments)}}()),_this}return Object(createClass.a)(OutlineItemInternal,[{key:"renderSubitems",value:function renderSubitems(){var _this$props2=this.props,item=_this$props2.item,otherProps=Object(objectWithoutProperties.a)(_this$props2,["item"]);if(!item.items||!item.items.length)return null;var subitems=item.items;return react_default.a.createElement("ul",null,subitems.map((function(subitem,subitemIndex){return react_default.a.createElement(OutlineItemInternal,Object(esm_extends.a)({key:"string"==typeof subitem.destination?subitem.destination:subitemIndex,item:subitem},otherProps))})))}},{key:"render",value:function render(){var item=this.props.item;return react_default.a.createElement("li",null,react_default.a.createElement("a",{href:"#",onClick:this.onClick},item.title),this.renderSubitems())}}]),OutlineItemInternal}(react.PureComponent),isDestination=prop_types_default.a.oneOfType([prop_types_default.a.string,prop_types_default.a.arrayOf(prop_types_default.a.any)]);OutlineItem_OutlineItemInternal.propTypes={item:prop_types_default.a.shape({dest:isDestination,items:prop_types_default.a.arrayOf(prop_types_default.a.shape({dest:isDestination,title:prop_types_default.a.string})),title:prop_types_default.a.string}).isRequired,onClick:prop_types_default.a.func,pdf:isPdf.isRequired};var esm_OutlineItem=function OutlineItem(props){return react_default.a.createElement(DocumentContext.Consumer,null,(function(documentContext){return react_default.a.createElement(OutlineContext.Consumer,null,(function(outlineContext){return react_default.a.createElement(OutlineItem_OutlineItemInternal,Object(esm_extends.a)({},documentContext,outlineContext,props))}))}))};function Outline_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function Outline_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Outline_OutlineInternal=function(_PureComponent){Object(inherits.a)(OutlineInternal,_PureComponent);var _super=function Outline_createSuper(Derived){return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(Outline_isNativeReflectConstruct()){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}(OutlineInternal);function OutlineInternal(){var _this;Object(classCallCheck.a)(this,OutlineInternal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"state",{outline:null}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"loadOutline",_asyncToGenerator(regenerator_default.a.mark((function _callee(){var pdf,cancellable,outline;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return pdf=_this.props.pdf,_this.setState((function(prevState){return prevState.outline?{outline:null}:null})),_context.prev=2,cancellable=dist_default()(pdf.getOutline()),_this.runningTask=cancellable,_context.next=7,cancellable.promise;case 7:outline=_context.sent,_this.setState({outline:outline},_this.onLoadSuccess),_context.next=14;break;case 11:_context.prev=11,_context.t0=_context.catch(2),_this.onLoadError(_context.t0);case 14:case"end":return _context.stop()}}),_callee,null,[[2,11]])})))),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"onLoadSuccess",(function(){var onLoadSuccess=_this.props.onLoadSuccess,outline=_this.state.outline;onLoadSuccess&&onLoadSuccess(outline)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"onLoadError",(function(error){_this.setState({outline:!1}),errorOnDev(error);var onLoadError=_this.props.onLoadError;onLoadError&&onLoadError(error)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"onItemClick",(function(_ref2){var pageIndex=_ref2.pageIndex,pageNumber=_ref2.pageNumber,onItemClick=_this.props.onItemClick;onItemClick&&onItemClick({pageIndex:pageIndex,pageNumber:pageNumber})})),_this}return Object(createClass.a)(OutlineInternal,[{key:"componentDidMount",value:function componentDidMount(){if(!this.props.pdf)throw new Error("Attempted to load an outline, but no document was specified.");this.loadOutline()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var pdf=this.props.pdf;prevProps.pdf&&pdf!==prevProps.pdf&&this.loadOutline()}},{key:"componentWillUnmount",value:function componentWillUnmount(){cancelRunningTask(this.runningTask)}},{key:"renderOutline",value:function renderOutline(){var outline=this.state.outline;return react_default.a.createElement("ul",null,outline.map((function(item,itemIndex){return react_default.a.createElement(esm_OutlineItem,{key:"string"==typeof item.destination?item.destination:itemIndex,item:item})})))}},{key:"render",value:function render(){var pdf=this.props.pdf,outline=this.state.outline;if(!pdf||!outline)return null;var _this$props=this.props,className=_this$props.className,inputRef=_this$props.inputRef;return react_default.a.createElement("div",Object(esm_extends.a)({className:mergeClassNames("react-pdf__Outline",className),ref:inputRef},this.eventProps),react_default.a.createElement(OutlineContext.Provider,{value:this.childContext},this.renderOutline()))}},{key:"childContext",get:function get(){return{onClick:this.onItemClick}}},{key:"eventProps",get:function get(){var _this2=this;return entry_default()(this.props,(function(){return _this2.state.outline}))}}]),OutlineInternal}(react.PureComponent);Outline_OutlineInternal.propTypes=function Outline_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Outline_ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):Outline_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({className:isClassName,inputRef:prop_types_default.a.func,onItemClick:prop_types_default.a.func,onLoadError:prop_types_default.a.func,onLoadSuccess:prop_types_default.a.func,pdf:isPdf},eventProps);var esm_Outline=react_default.a.forwardRef((function Outline(props,ref){return react_default.a.createElement(DocumentContext.Consumer,null,(function(context){return react_default.a.createElement(Outline_OutlineInternal,Object(esm_extends.a)({ref:ref},context,props))}))})),PageContext=Object(react.createContext)(null);function PageCanvas_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var PageCanvas_PageCanvasInternal=function(_PureComponent){Object(inherits.a)(PageCanvasInternal,_PureComponent);var _super=function PageCanvas_createSuper(Derived){return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(PageCanvas_isNativeReflectConstruct()){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}(PageCanvasInternal);function PageCanvasInternal(){var _this;Object(classCallCheck.a)(this,PageCanvasInternal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"onRenderSuccess",(function(){_this.renderer=null;var _this$props=_this.props,onRenderSuccess=_this$props.onRenderSuccess,page=_this$props.page,scale=_this$props.scale;onRenderSuccess&&onRenderSuccess(makePageCallback(page,scale))})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"onRenderError",(function(error){if(!isCancelException(error)){errorOnDev(error);var onRenderError=_this.props.onRenderError;onRenderError&&onRenderError(error)}})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"drawPageOnCanvas",(function(){var canvas=Object(assertThisInitialized.a)(_this).canvasLayer;if(!canvas)return null;var _assertThisInitialize2=Object(assertThisInitialized.a)(_this),renderViewport=_assertThisInitialize2.renderViewport,viewport=_assertThisInitialize2.viewport,_this$props2=_this.props,page=_this$props2.page,renderInteractiveForms=_this$props2.renderInteractiveForms;canvas.width=renderViewport.width,canvas.height=renderViewport.height,canvas.style.width="".concat(Math.floor(viewport.width),"px"),canvas.style.height="".concat(Math.floor(viewport.height),"px");var renderContext={get canvasContext(){return canvas.getContext("2d")},viewport:renderViewport,renderInteractiveForms:renderInteractiveForms};return _this.cancelRenderingTask(),_this.renderer=page.render(renderContext),_this.renderer.promise.then(_this.onRenderSuccess).catch(_this.onRenderError)})),_this}return Object(createClass.a)(PageCanvasInternal,[{key:"componentDidMount",value:function componentDidMount(){this.drawPageOnCanvas()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var _this$props3=this.props,page=_this$props3.page;_this$props3.renderInteractiveForms!==prevProps.renderInteractiveForms&&(page.cleanup(),this.drawPageOnCanvas())}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.cancelRenderingTask(),this.canvasLayer&&(this.canvasLayer.width=0,this.canvasLayer.height=0,this.canvasLayer=null)}},{key:"cancelRenderingTask",value:function cancelRenderingTask(){this.renderer&&this.renderer._internalRenderTask.running&&this.renderer._internalRenderTask.cancel()}},{key:"render",value:function render(){var _this2=this;return react_default.a.createElement("canvas",{className:"react-pdf__Page__canvas",dir:"ltr",ref:function ref(_ref){_this2.canvasLayer=_ref},style:{display:"block",userSelect:"none"}})}},{key:"renderViewport",get:function get(){var _this$props4=this.props,page=_this$props4.page,rotate=_this$props4.rotate,scale=_this$props4.scale,pixelRatio=function getPixelRatio(){return isBrowser&&window.devicePixelRatio||1}();return page.getViewport({scale:scale*pixelRatio,rotation:rotate})}},{key:"viewport",get:function get(){var _this$props5=this.props,page=_this$props5.page,rotate=_this$props5.rotate,scale=_this$props5.scale;return page.getViewport({scale:scale,rotation:rotate})}}]),PageCanvasInternal}(react.PureComponent);function PageCanvas(props){return react_default.a.createElement(PageContext.Consumer,null,(function(context){return react_default.a.createElement(PageCanvas_PageCanvasInternal,Object(esm_extends.a)({},context,props))}))}function PageSVG_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}PageCanvas_PageCanvasInternal.propTypes={onRenderError:prop_types_default.a.func,onRenderSuccess:prop_types_default.a.func,page:isPage.isRequired,renderInteractiveForms:prop_types_default.a.bool,rotate:isRotate,scale:prop_types_default.a.number};var PageSVG_PageSVGInternal=function(_PureComponent){Object(inherits.a)(PageSVGInternal,_PureComponent);var _super=function PageSVG_createSuper(Derived){return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(PageSVG_isNativeReflectConstruct()){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}(PageSVGInternal);function PageSVGInternal(){var _this;Object(classCallCheck.a)(this,PageSVGInternal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"state",{svg:null}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"onRenderSuccess",(function(){_this.renderer=null;var _this$props=_this.props,onRenderSuccess=_this$props.onRenderSuccess,page=_this$props.page,scale=_this$props.scale;onRenderSuccess&&onRenderSuccess(makePageCallback(page,scale))})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"onRenderError",(function(error){if(!isCancelException(error)){errorOnDev(error);var onRenderError=_this.props.onRenderError;onRenderError&&onRenderError(error)}})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"renderSVG",(function(){var page=_this.props.page;return _this.renderer=page.getOperatorList(),_this.renderer.then((function(operatorList){var svgGfx=new pdf_default.a.SVGGraphics(page.commonObjs,page.objs);_this.renderer=svgGfx.getSVG(operatorList,_this.viewport).then((function(svg){_this.setState({svg:svg},_this.onRenderSuccess)})).catch(_this.onRenderError)})).catch(_this.onRenderError)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"drawPageOnContainer",(function(element){var svg=_this.state.svg;if(element&&svg){element.firstElementChild||element.appendChild(svg);var _this$viewport=_this.viewport,width=_this$viewport.width,height=_this$viewport.height;svg.setAttribute("width",width),svg.setAttribute("height",height)}})),_this}return Object(createClass.a)(PageSVGInternal,[{key:"componentDidMount",value:function componentDidMount(){this.renderSVG()}},{key:"render",value:function render(){var _this2=this,_this$viewport2=this.viewport,width=_this$viewport2.width,height=_this$viewport2.height;return react_default.a.createElement("div",{className:"react-pdf__Page__svg",ref:function ref(_ref){return _this2.drawPageOnContainer(_ref)},style:{display:"block",backgroundColor:"white",overflow:"hidden",width:width,height:height,userSelect:"none"}})}},{key:"viewport",get:function get(){var _this$props2=this.props,page=_this$props2.page,rotate=_this$props2.rotate,scale=_this$props2.scale;return page.getViewport({scale:scale,rotation:rotate})}}]),PageSVGInternal}(react.PureComponent);function PageSVG(props){return react_default.a.createElement(PageContext.Consumer,null,(function(context){return react_default.a.createElement(PageSVG_PageSVGInternal,Object(esm_extends.a)({},context,props))}))}function TextLayerItem_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}PageSVG_PageSVGInternal.propTypes={onRenderError:prop_types_default.a.func,onRenderSuccess:prop_types_default.a.func,page:isPage.isRequired,rotate:isRotate,scale:prop_types_default.a.number};var TextLayerItem_TextLayerItemInternal=function(_PureComponent){Object(inherits.a)(TextLayerItemInternal,_PureComponent);var _alignTextItem,_getFontData,_super=function TextLayerItem_createSuper(Derived){return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(TextLayerItem_isNativeReflectConstruct()){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}(TextLayerItemInternal);function TextLayerItemInternal(){var _this;Object(classCallCheck.a)(this,TextLayerItemInternal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"getElementWidth",(function(element){var sideways=Object(assertThisInitialized.a)(_this).sideways;return element.getBoundingClientRect()[sideways?"height":"width"]})),_this}return Object(createClass.a)(TextLayerItemInternal,[{key:"componentDidMount",value:function componentDidMount(){this.alignTextItem()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.alignTextItem()}},{key:"getFontData",value:(_getFontData=_asyncToGenerator(regenerator_default.a.mark((function _callee(fontName){var page,font;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return page=this.props.page,_context.next=3,new Promise((function(resolve){page.commonObjs.get(fontName,resolve)}));case 3:return font=_context.sent,_context.abrupt("return",font);case 5:case"end":return _context.stop()}}),_callee,this)}))),function getFontData(_x){return _getFontData.apply(this,arguments)})},{key:"alignTextItem",value:(_alignTextItem=_asyncToGenerator(regenerator_default.a.mark((function _callee2(){var element,_this$props,fontName,scale,width,fontData,fallbackFontName,targetWidth,actualWidth,transform,ascent;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(element=this.item){_context2.next=3;break}return _context2.abrupt("return");case 3:return element.style.transform="",_this$props=this.props,fontName=_this$props.fontName,scale=_this$props.scale,width=_this$props.width,element.style.fontFamily="".concat(fontName,", sans-serif"),_context2.next=8,this.getFontData(fontName);case 8:fontData=_context2.sent,fallbackFontName=fontData?fontData.fallbackName:"sans-serif",element.style.fontFamily="".concat(fontName,", ").concat(fallbackFontName),targetWidth=width*scale,actualWidth=this.getElementWidth(element),transform="scaleX(".concat(targetWidth/actualWidth,")"),(ascent=fontData?fontData.ascent:0)&&(transform+=" translateY(".concat(100*(1-ascent),"%)")),element.style.transform=transform,element.style.WebkitTransform=transform;case 18:case"end":return _context2.stop()}}),_callee2,this)}))),function alignTextItem(){return _alignTextItem.apply(this,arguments)})},{key:"render",value:function render(){var _this2=this,fontSize=this.fontSize,top=this.top,left=this.left,_this$props2=this.props,customTextRenderer=_this$props2.customTextRenderer,scale=_this$props2.scale,text=_this$props2.str;return react_default.a.createElement("span",{ref:function ref(_ref){_this2.item=_ref},style:{height:"1em",fontFamily:"sans-serif",fontSize:"".concat(fontSize*scale,"px"),position:"absolute",top:"".concat(top*scale,"px"),left:"".concat(left*scale,"px"),transformOrigin:"left bottom",whiteSpace:"pre",pointerEvents:"all"}},customTextRenderer?customTextRenderer(this.props):text)}},{key:"unrotatedViewport",get:function get(){var _this$props3=this.props,page=_this$props3.page,scale=_this$props3.scale;return page.getViewport({scale:scale})}},{key:"rotate",get:function get(){var _this$props4=this.props,page=_this$props4.page;return _this$props4.rotate-page.rotate}},{key:"sideways",get:function get(){return this.rotate%180!=0}},{key:"defaultSideways",get:function get(){return this.unrotatedViewport.rotation%180!=0}},{key:"fontSize",get:function get(){var transform=this.props.transform,defaultSideways=this.defaultSideways,_transform=_slicedToArray(transform,2),fontHeightPx=_transform[0],fontWidthPx=_transform[1];return defaultSideways?fontWidthPx:fontHeightPx}},{key:"top",get:function get(){var transform=this.props.transform,viewport=this.unrotatedViewport,defaultSideways=this.defaultSideways,_transform2=_slicedToArray(transform,6),offsetX=_transform2[2],offsetY=_transform2[3],x=_transform2[4],y=_transform2[5],_viewport$viewBox=_slicedToArray(viewport.viewBox,4),yMin=_viewport$viewBox[1],yMax=_viewport$viewBox[3];return defaultSideways?x+offsetX+yMin:yMax-(y+offsetY)}},{key:"left",get:function get(){var transform=this.props.transform,viewport=this.unrotatedViewport,defaultSideways=this.defaultSideways,_transform3=_slicedToArray(transform,6),x=_transform3[4],y=_transform3[5],xMin=_slicedToArray(viewport.viewBox,1)[0];return defaultSideways?y-xMin:x-xMin}}]),TextLayerItemInternal}(react.PureComponent);function TextLayerItem(props){return react_default.a.createElement(PageContext.Consumer,null,(function(context){return react_default.a.createElement(TextLayerItem_TextLayerItemInternal,Object(esm_extends.a)({},context,props))}))}function TextLayer_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}TextLayerItem_TextLayerItemInternal.propTypes={customTextRenderer:prop_types_default.a.func,fontName:prop_types_default.a.string.isRequired,itemIndex:prop_types_default.a.number.isRequired,page:isPage.isRequired,rotate:isRotate,scale:prop_types_default.a.number,str:prop_types_default.a.string.isRequired,transform:prop_types_default.a.arrayOf(prop_types_default.a.number).isRequired,width:prop_types_default.a.number.isRequired};var TextLayer_TextLayerInternal=function(_PureComponent){Object(inherits.a)(TextLayerInternal,_PureComponent);var _super=function TextLayer_createSuper(Derived){return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(TextLayer_isNativeReflectConstruct()){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}(TextLayerInternal);function TextLayerInternal(){var _this;Object(classCallCheck.a)(this,TextLayerInternal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"state",{textItems:null}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"loadTextItems",_asyncToGenerator(regenerator_default.a.mark((function _callee(){var page,cancellable,_yield$cancellable$pr,textItems;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return page=_this.props.page,_context.prev=1,cancellable=dist_default()(page.getTextContent()),_this.runningTask=cancellable,_context.next=6,cancellable.promise;case 6:_yield$cancellable$pr=_context.sent,textItems=_yield$cancellable$pr.items,_this.setState({textItems:textItems},_this.onLoadSuccess),_context.next=14;break;case 11:_context.prev=11,_context.t0=_context.catch(1),_this.onLoadError(_context.t0);case 14:case"end":return _context.stop()}}),_callee,null,[[1,11]])})))),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"onLoadSuccess",(function(){var onGetTextSuccess=_this.props.onGetTextSuccess,textItems=_this.state.textItems;onGetTextSuccess&&onGetTextSuccess(textItems)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"onLoadError",(function(error){_this.setState({textItems:!1}),errorOnDev(error);var onGetTextError=_this.props.onGetTextError;onGetTextError&&onGetTextError(error)})),_this}return Object(createClass.a)(TextLayerInternal,[{key:"componentDidMount",value:function componentDidMount(){if(!this.props.page)throw new Error("Attempted to load page text content, but no page was specified.");this.loadTextItems()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var page=this.props.page;prevProps.page&&page!==prevProps.page&&this.loadTextItems()}},{key:"componentWillUnmount",value:function componentWillUnmount(){cancelRunningTask(this.runningTask)}},{key:"renderTextItems",value:function renderTextItems(){var textItems=this.state.textItems;return textItems?textItems.map((function(textItem,itemIndex){return react_default.a.createElement(TextLayerItem,Object(esm_extends.a)({key:itemIndex,itemIndex:itemIndex},textItem))})):null}},{key:"render",value:function render(){var viewport=this.unrotatedViewport,rotate=this.rotate;return react_default.a.createElement("div",{className:"react-pdf__Page__textContent",style:{position:"absolute",top:"50%",left:"50%",width:"".concat(viewport.width,"px"),height:"".concat(viewport.height,"px"),color:"transparent",transform:"translate(-50%, -50%) rotate(".concat(rotate,"deg)"),WebkitTransform:"translate(-50%, -50%) rotate(".concat(rotate,"deg)"),pointerEvents:"none"}},this.renderTextItems())}},{key:"unrotatedViewport",get:function get(){var _this$props=this.props,page=_this$props.page,scale=_this$props.scale;return page.getViewport({scale:scale})}},{key:"rotate",get:function get(){var _this$props2=this.props,page=_this$props2.page;return _this$props2.rotate-page.rotate}}]),TextLayerInternal}(react.PureComponent);function TextLayer(props){return react_default.a.createElement(PageContext.Consumer,null,(function(context){return react_default.a.createElement(TextLayer_TextLayerInternal,Object(esm_extends.a)({},context,props))}))}function AnnotationLayer_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}TextLayer_TextLayerInternal.propTypes={onGetTextError:prop_types_default.a.func,onGetTextSuccess:prop_types_default.a.func,page:isPage.isRequired,rotate:isRotate,scale:prop_types_default.a.number};var AnnotationLayer_AnnotationLayerInternal=function(_PureComponent){Object(inherits.a)(AnnotationLayerInternal,_PureComponent);var _super=function AnnotationLayer_createSuper(Derived){return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(AnnotationLayer_isNativeReflectConstruct()){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}(AnnotationLayerInternal);function AnnotationLayerInternal(){var _this;Object(classCallCheck.a)(this,AnnotationLayerInternal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"state",{annotations:null}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"loadAnnotations",_asyncToGenerator(regenerator_default.a.mark((function _callee(){var page,cancellable,annotations;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return page=_this.props.page,_context.prev=1,cancellable=dist_default()(page.getAnnotations()),_this.runningTask=cancellable,_context.next=6,cancellable.promise;case 6:annotations=_context.sent,_this.setState({annotations:annotations},_this.onLoadSuccess),_context.next=13;break;case 10:_context.prev=10,_context.t0=_context.catch(1),_this.onLoadError(_context.t0);case 13:case"end":return _context.stop()}}),_callee,null,[[1,10]])})))),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"onLoadSuccess",(function(){var onGetAnnotationsSuccess=_this.props.onGetAnnotationsSuccess,annotations=_this.state.annotations;onGetAnnotationsSuccess&&onGetAnnotationsSuccess(annotations)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"onLoadError",(function(error){_this.setState({annotations:!1}),errorOnDev(error);var onGetAnnotationsError=_this.props.onGetAnnotationsError;onGetAnnotationsError&&onGetAnnotationsError(error)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"onRenderSuccess",(function(){var onRenderAnnotationLayerSuccess=_this.props.onRenderAnnotationLayerSuccess;onRenderAnnotationLayerSuccess&&onRenderAnnotationLayerSuccess()})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"onRenderError",(function(error){errorOnDev(error);var onRenderAnnotationLayerError=_this.props.onRenderAnnotationLayerError;onRenderAnnotationLayerError&&onRenderAnnotationLayerError(error)})),_this}return Object(createClass.a)(AnnotationLayerInternal,[{key:"componentDidMount",value:function componentDidMount(){if(!this.props.page)throw new Error("Attempted to load page annotations, but no page was specified.");this.loadAnnotations()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var _this$props=this.props,page=_this$props.page,renderInteractiveForms=_this$props.renderInteractiveForms;(prevProps.page&&page!==prevProps.page||renderInteractiveForms!==prevProps.renderInteractiveForms)&&this.loadAnnotations()}},{key:"componentWillUnmount",value:function componentWillUnmount(){cancelRunningTask(this.runningTask)}},{key:"renderAnnotationLayer",value:function renderAnnotationLayer(){var annotations=this.state.annotations;if(annotations){var _this$props2=this.props,linkService=_this$props2.linkService,page=_this$props2.page,renderInteractiveForms=_this$props2.renderInteractiveForms,viewport=this.viewport.clone({dontFlip:!0}),parameters={annotations:annotations,div:this.annotationLayer,linkService:linkService,page:page,renderInteractiveForms:renderInteractiveForms,viewport:viewport};this.annotationLayer.innerHTML="";try{pdf_default.a.AnnotationLayer.render(parameters),this.onRenderSuccess()}catch(error){this.onRenderError(error)}}}},{key:"render",value:function render(){var _this2=this;return react_default.a.createElement("div",{className:"react-pdf__Page__annotations annotationLayer",ref:function ref(_ref2){_this2.annotationLayer=_ref2}},this.renderAnnotationLayer())}},{key:"viewport",get:function get(){var _this$props3=this.props,page=_this$props3.page,rotate=_this$props3.rotate,scale=_this$props3.scale;return page.getViewport({scale:scale,rotation:rotate})}}]),AnnotationLayerInternal}(react.PureComponent);AnnotationLayer_AnnotationLayerInternal.propTypes={linkService:isLinkService.isRequired,onGetAnnotationsError:prop_types_default.a.func,onGetAnnotationsSuccess:prop_types_default.a.func,onRenderAnnotationLayerError:prop_types_default.a.func,onRenderAnnotationLayerSuccess:prop_types_default.a.func,page:isPage,renderInteractiveForms:prop_types_default.a.bool,rotate:isRotate,scale:prop_types_default.a.number};var Page_AnnotationLayer=function AnnotationLayer(props){return react_default.a.createElement(DocumentContext.Consumer,null,(function(documentContext){return react_default.a.createElement(PageContext.Consumer,null,(function(pageContext){return react_default.a.createElement(AnnotationLayer_AnnotationLayerInternal,Object(esm_extends.a)({},documentContext,pageContext,props))}))}))};function Page_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function Page_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Page_PageInternal=function(_PureComponent){Object(inherits.a)(PageInternal,_PureComponent);var _super=function Page_createSuper(Derived){return function(){var result,Super=Object(getPrototypeOf.a)(Derived);if(Page_isNativeReflectConstruct()){var NewTarget=Object(getPrototypeOf.a)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Object(possibleConstructorReturn.a)(this,result)}}(PageInternal);function PageInternal(){var _this;Object(classCallCheck.a)(this,PageInternal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"state",{page:null}),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"onLoadSuccess",(function(){var _this$props=_this.props,onLoadSuccess=_this$props.onLoadSuccess,registerPage=_this$props.registerPage,page=_this.state.page;onLoadSuccess&&onLoadSuccess(makePageCallback(page,_this.scale)),registerPage&&registerPage(_this.pageIndex,_this.ref)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"onLoadError",(function(error){errorOnDev(error);var onLoadError=_this.props.onLoadError;onLoadError&&onLoadError(error)})),Object(defineProperty.a)(Object(assertThisInitialized.a)(_this),"loadPage",_asyncToGenerator(regenerator_default.a.mark((function _callee(){var pdf,pageNumber,cancellable,page;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(pdf=_this.props.pdf,pageNumber=_this.getPageNumber()){_context.next=4;break}return _context.abrupt("return");case 4:return _this.setState((function(prevState){return prevState.page?{page:null}:null})),_context.prev=5,cancellable=dist_default()(pdf.getPage(pageNumber)),_this.runningTask=cancellable,_context.next=10,cancellable.promise;case 10:page=_context.sent,_this.setState({page:page},_this.onLoadSuccess),_context.next=18;break;case 14:_context.prev=14,_context.t0=_context.catch(5),_this.setState({page:!1}),_this.onLoadError(_context.t0);case 18:case"end":return _context.stop()}}),_callee,null,[[5,14]])})))),_this}return Object(createClass.a)(PageInternal,[{key:"componentDidMount",value:function componentDidMount(){if(!this.props.pdf)throw new Error("Attempted to load a page, but no document was specified.");this.loadPage()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var pdf=this.props.pdf;if(prevProps.pdf&&pdf!==prevProps.pdf||this.getPageNumber()!==this.getPageNumber(prevProps)){var unregisterPage=this.props.unregisterPage;unregisterPage&&unregisterPage(this.getPageIndex(prevProps)),this.loadPage()}}},{key:"componentWillUnmount",value:function componentWillUnmount(){var unregisterPage=this.props.unregisterPage;unregisterPage&&unregisterPage(this.pageIndex),cancelRunningTask(this.runningTask)}},{key:"getPageIndex",value:function getPageIndex(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return isProvided(props.pageNumber)?props.pageNumber-1:isProvided(props.pageIndex)?props.pageIndex:null}},{key:"getPageNumber",value:function getPageNumber(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return isProvided(props.pageNumber)?props.pageNumber:isProvided(props.pageIndex)?props.pageIndex+1:null}},{key:"renderMainLayer",value:function renderMainLayer(){switch(this.props.renderMode){case"none":return null;case"svg":return react_default.a.createElement(PageSVG,{key:"".concat(this.pageKeyNoScale,"_svg")});default:return react_default.a.createElement(PageCanvas,{key:"".concat(this.pageKey,"_canvas")})}}},{key:"renderTextLayer",value:function renderTextLayer(){var renderTextLayer=this.props.renderTextLayer;return renderTextLayer?react_default.a.createElement(TextLayer,{key:"".concat(this.pageKey,"_text")}):null}},{key:"renderAnnotationLayer",value:function renderAnnotationLayer(){var renderAnnotationLayer=this.props.renderAnnotationLayer;return renderAnnotationLayer?react_default.a.createElement(Page_AnnotationLayer,{key:"".concat(this.pageKey,"_annotations")}):null}},{key:"renderChildren",value:function renderChildren(){var children=this.props.children;return react_default.a.createElement(PageContext.Provider,{value:this.childContext},this.renderMainLayer(),this.renderTextLayer(),this.renderAnnotationLayer(),children)}},{key:"renderContent",value:function renderContent(){var pageNumber=this.pageNumber,pdf=this.props.pdf,page=this.state.page;if(!pageNumber){var noData=this.props.noData;return react_default.a.createElement(Message,{type:"no-data"},"function"==typeof noData?noData():noData)}if(null===pdf||null===page){var loading=this.props.loading;return react_default.a.createElement(Message,{type:"loading"},"function"==typeof loading?loading():loading)}if(!1===pdf||!1===page){var error=this.props.error;return react_default.a.createElement(Message,{type:"error"},"function"==typeof error?error():error)}return this.renderChildren()}},{key:"render",value:function render(){var _this2=this,pageNumber=this.pageNumber,className=this.props.className;return react_default.a.createElement("div",Object(esm_extends.a)({className:mergeClassNames("react-pdf__Page",className),"data-page-number":pageNumber,ref:function ref(_ref2){var inputRef=_this2.props.inputRef;inputRef&&inputRef(_ref2),_this2.ref=_ref2},style:{position:"relative"}},this.eventProps),this.renderContent())}},{key:"childContext",get:function get(){var page=this.state.page;if(!page)return{};var _this$props2=this.props;return{customTextRenderer:_this$props2.customTextRenderer,onGetAnnotationsError:_this$props2.onGetAnnotationsError,onGetAnnotationsSuccess:_this$props2.onGetAnnotationsSuccess,onGetTextError:_this$props2.onGetTextError,onGetTextSuccess:_this$props2.onGetTextSuccess,onRenderAnnotationLayerError:_this$props2.onRenderAnnotationLayerError,onRenderAnnotationLayerSuccess:_this$props2.onRenderAnnotationLayerSuccess,onRenderError:_this$props2.onRenderError,onRenderSuccess:_this$props2.onRenderSuccess,page:page,renderInteractiveForms:_this$props2.renderInteractiveForms,rotate:this.rotate,scale:this.scale}}},{key:"pageIndex",get:function get(){return this.getPageIndex()}},{key:"pageNumber",get:function get(){return this.getPageNumber()}},{key:"rotate",get:function get(){var rotate=this.props.rotate;if(isProvided(rotate))return rotate;var page=this.state.page;return page?page.rotate:null}},{key:"scale",get:function get(){var page=this.state.page;if(!page)return null;var _this$props3=this.props,scale=_this$props3.scale,width=_this$props3.width,height=_this$props3.height,rotate=this.rotate,pageScale=1,scaleWithDefault=null===scale?1:scale;if(width||height){var viewport=page.getViewport({scale:1,rotation:rotate});pageScale=width?width/viewport.width:height/viewport.height}return scaleWithDefault*pageScale}},{key:"eventProps",get:function get(){var _this3=this;return entry_default()(this.props,(function(){var page=_this3.state.page;return page?makePageCallback(page,_this3.scale):page}))}},{key:"pageKey",get:function get(){var page=this.state.page;return"".concat(page.pageIndex,"@").concat(this.scale,"/").concat(this.rotate)}},{key:"pageKeyNoScale",get:function get(){var page=this.state.page;return"".concat(page.pageIndex,"/").concat(this.rotate)}}]),PageInternal}(react.PureComponent);Page_PageInternal.defaultProps={error:"Failed to load the page.",loading:"Loading pageâ€¦",noData:"No page specified.",renderAnnotationLayer:!0,renderInteractiveForms:!1,renderMode:"canvas",renderTextLayer:!0,scale:1};var Page_isFunctionOrNode=prop_types_default.a.oneOfType([prop_types_default.a.func,prop_types_default.a.node]);Page_PageInternal.propTypes=function Page_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Page_ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):Page_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},eventProps,{children:prop_types_default.a.node,className:isClassName,customTextRenderer:prop_types_default.a.func,error:Page_isFunctionOrNode,height:prop_types_default.a.number,inputRef:prop_types_default.a.func,loading:Page_isFunctionOrNode,noData:Page_isFunctionOrNode,onGetTextError:prop_types_default.a.func,onGetTextSuccess:prop_types_default.a.func,onLoadError:prop_types_default.a.func,onLoadSuccess:prop_types_default.a.func,onRenderError:prop_types_default.a.func,onRenderSuccess:prop_types_default.a.func,pageIndex:function isPageIndex(props,propName,componentName){var pageIndex=props[propName],pageNumber=props.pageNumber,pdf=props.pdf;if(!isDefined(pdf))return null;if(isDefined(pageIndex)){if("number"!=typeof pageIndex)return new Error("`".concat(propName,"` of type `").concat(Object(esm_typeof.a)(pageIndex),"` supplied to `").concat(componentName,"`, expected `number`."));if(pageIndex<0)return new Error("Expected `".concat(propName,"` to be greater or equal to 0."));var numPages=pdf.numPages;if(pageIndex+1>numPages)return new Error("Expected `".concat(propName,"` to be less or equal to ").concat(numPages-1,"."))}else if(!isDefined(pageNumber))return new Error("`".concat(propName,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(componentName,"`."));return null},pageNumber:function isPageNumber(props,propName,componentName){var pageNumber=props[propName],pageIndex=props.pageIndex,pdf=props.pdf;if(!isDefined(pdf))return null;if(isDefined(pageNumber)){if("number"!=typeof pageNumber)return new Error("`".concat(propName,"` of type `").concat(Object(esm_typeof.a)(pageNumber),"` supplied to `").concat(componentName,"`, expected `number`."));if(pageNumber<1)return new Error("Expected `".concat(propName,"` to be greater or equal to 1."));var numPages=pdf.numPages;if(pageNumber>numPages)return new Error("Expected `".concat(propName,"` to be less or equal to ").concat(numPages,"."))}else if(!isDefined(pageIndex))return new Error("`".concat(propName,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(componentName,"`."));return null},pdf:isPdf,registerPage:prop_types_default.a.func,renderAnnotationLayer:prop_types_default.a.bool,renderInteractiveForms:prop_types_default.a.bool,renderMode:isRenderMode,renderTextLayer:prop_types_default.a.bool,rotate:isRotate,scale:prop_types_default.a.number,unregisterPage:prop_types_default.a.func,width:prop_types_default.a.number});var esm_Page=react_default.a.forwardRef((function Page(props,ref){return react_default.a.createElement(DocumentContext.Consumer,null,(function(context){return react_default.a.createElement(Page_PageInternal,Object(esm_extends.a)({ref:ref},context,props))}))}));isLocalFileSystem&&warnOnDev("You are running React-PDF from your local file system. PDF.js Worker may fail to load due to browser's security policies. If you're on Google Chrome, you can use --allow-file-access-from-files flag for debugging purposes."),pdf_default.a.GlobalWorkerOptions.workerSrc="pdf.worker.js"},4216:function(module,exports,__webpack_require__){(function(process,Buffer){!function webpackUniversalModuleDefinition(root,factory){module.exports=factory()}(0,(function(){return function(modules){var installedModules={};function __w_pdfjs_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__w_pdfjs_require__),module.l=!0,module.exports}return __w_pdfjs_require__.m=modules,__w_pdfjs_require__.c=installedModules,__w_pdfjs_require__.d=function(exports,name,getter){__w_pdfjs_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__w_pdfjs_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__w_pdfjs_require__.t=function(value,mode){if(1&mode&&(value=__w_pdfjs_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__w_pdfjs_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__w_pdfjs_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__w_pdfjs_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module.default}:function getModuleExports(){return module};return __w_pdfjs_require__.d(getter,"a",getter),getter},__w_pdfjs_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__w_pdfjs_require__.p="",__w_pdfjs_require__(__w_pdfjs_require__.s=0)}([function(module,exports,__w_pdfjs_require__){"use strict";var pdfjsSharedUtil=__w_pdfjs_require__(1),pdfjsDisplayAPI=__w_pdfjs_require__(3),pdfjsDisplayTextLayer=__w_pdfjs_require__(16),pdfjsDisplayAnnotationLayer=__w_pdfjs_require__(17),pdfjsDisplayDisplayUtils=__w_pdfjs_require__(4),pdfjsDisplaySVG=__w_pdfjs_require__(18);const pdfjsDisplayWorkerOptions=__w_pdfjs_require__(10),pdfjsDisplayAPICompatibility=__w_pdfjs_require__(6);{const{isNodeJS:isNodeJS}=__w_pdfjs_require__(7);if(isNodeJS){const PDFNodeStream=__w_pdfjs_require__(19).PDFNodeStream;pdfjsDisplayAPI.setPDFNetworkStreamFactory((params=>new PDFNodeStream(params)))}else{const PDFNetworkStream=__w_pdfjs_require__(22).PDFNetworkStream;let PDFFetchStream;pdfjsDisplayDisplayUtils.isFetchSupported()&&(PDFFetchStream=__w_pdfjs_require__(23).PDFFetchStream),pdfjsDisplayAPI.setPDFNetworkStreamFactory((params=>PDFFetchStream&&pdfjsDisplayDisplayUtils.isValidFetchUrl(params.url)?new PDFFetchStream(params):new PDFNetworkStream(params)))}}exports.build=pdfjsDisplayAPI.build,exports.version=pdfjsDisplayAPI.version,exports.getDocument=pdfjsDisplayAPI.getDocument,exports.LoopbackPort=pdfjsDisplayAPI.LoopbackPort,exports.PDFDataRangeTransport=pdfjsDisplayAPI.PDFDataRangeTransport,exports.PDFWorker=pdfjsDisplayAPI.PDFWorker,exports.renderTextLayer=pdfjsDisplayTextLayer.renderTextLayer,exports.AnnotationLayer=pdfjsDisplayAnnotationLayer.AnnotationLayer,exports.createPromiseCapability=pdfjsSharedUtil.createPromiseCapability,exports.PasswordResponses=pdfjsSharedUtil.PasswordResponses,exports.InvalidPDFException=pdfjsSharedUtil.InvalidPDFException,exports.MissingPDFException=pdfjsSharedUtil.MissingPDFException,exports.SVGGraphics=pdfjsDisplaySVG.SVGGraphics,exports.NativeImageDecoding=pdfjsSharedUtil.NativeImageDecoding,exports.CMapCompressionType=pdfjsSharedUtil.CMapCompressionType,exports.PermissionFlag=pdfjsSharedUtil.PermissionFlag,exports.UnexpectedResponseException=pdfjsSharedUtil.UnexpectedResponseException,exports.OPS=pdfjsSharedUtil.OPS,exports.VerbosityLevel=pdfjsSharedUtil.VerbosityLevel,exports.UNSUPPORTED_FEATURES=pdfjsSharedUtil.UNSUPPORTED_FEATURES,exports.createValidAbsoluteUrl=pdfjsSharedUtil.createValidAbsoluteUrl,exports.createObjectURL=pdfjsSharedUtil.createObjectURL,exports.removeNullCharacters=pdfjsSharedUtil.removeNullCharacters,exports.shadow=pdfjsSharedUtil.shadow,exports.Util=pdfjsSharedUtil.Util,exports.RenderingCancelledException=pdfjsDisplayDisplayUtils.RenderingCancelledException,exports.getFilenameFromUrl=pdfjsDisplayDisplayUtils.getFilenameFromUrl,exports.LinkTarget=pdfjsDisplayDisplayUtils.LinkTarget,exports.addLinkAttributes=pdfjsDisplayDisplayUtils.addLinkAttributes,exports.loadScript=pdfjsDisplayDisplayUtils.loadScript,exports.PDFDateString=pdfjsDisplayDisplayUtils.PDFDateString,exports.GlobalWorkerOptions=pdfjsDisplayWorkerOptions.GlobalWorkerOptions,exports.apiCompatibilityParams=pdfjsDisplayAPICompatibility.apiCompatibilityParams},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.arrayByteLength=arrayByteLength,exports.arraysToBytes=function arraysToBytes(arr){const length=arr.length;if(1===length&&arr[0]instanceof Uint8Array)return arr[0];let resultLength=0;for(let i=0;i<length;i++)resultLength+=arrayByteLength(arr[i]);let pos=0;const data=new Uint8Array(resultLength);for(let i=0;i<length;i++){let item=arr[i];item instanceof Uint8Array||(item="string"==typeof item?stringToBytes(item):new Uint8Array(item));const itemLength=item.byteLength;data.set(item,pos),pos+=itemLength}return data},exports.assert=assert,exports.bytesToString=function bytesToString(bytes){assert(null!==bytes&&"object"==typeof bytes&&void 0!==bytes.length,"Invalid argument for bytesToString");const length=bytes.length;if(length<8192)return String.fromCharCode.apply(null,bytes);const strBuf=[];for(let i=0;i<length;i+=8192){const chunkEnd=Math.min(i+8192,length),chunk=bytes.subarray(i,chunkEnd);strBuf.push(String.fromCharCode.apply(null,chunk))}return strBuf.join("")},exports.createPromiseCapability=function createPromiseCapability(){const capability=Object.create(null);let isSettled=!1;return Object.defineProperty(capability,"settled",{get:()=>isSettled}),capability.promise=new Promise((function(resolve,reject){capability.resolve=function(data){isSettled=!0,resolve(data)},capability.reject=function(reason){isSettled=!0,reject(reason)}})),capability},exports.getVerbosityLevel=function getVerbosityLevel(){return verbosity},exports.info=function info(msg){verbosity>=VerbosityLevel.INFOS&&console.log(`Info: ${msg}`)},exports.isArrayBuffer=function isArrayBuffer(v){return"object"==typeof v&&null!==v&&void 0!==v.byteLength},exports.isArrayEqual=function isArrayEqual(arr1,arr2){if(arr1.length!==arr2.length)return!1;return arr1.every((function(element,index){return element===arr2[index]}))},exports.isBool=function isBool(v){return"boolean"==typeof v},exports.isEmptyObj=function isEmptyObj(obj){for(const key in obj)return!1;return!0},exports.isNum=function isNum(v){return"number"==typeof v},exports.isString=function isString(v){return"string"==typeof v},exports.isSameOrigin=function isSameOrigin(baseUrl,otherUrl){let base;try{if(base=new URL(baseUrl),!base.origin||"null"===base.origin)return!1}catch(e){return!1}const other=new URL(otherUrl,base);return base.origin===other.origin},exports.createValidAbsoluteUrl=function createValidAbsoluteUrl(url,baseUrl){if(!url)return null;try{const absoluteUrl=baseUrl?new URL(url,baseUrl):new URL(url);if(function _isValidProtocol(url){if(!url)return!1;switch(url.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(absoluteUrl))return absoluteUrl}catch(ex){}return null},exports.removeNullCharacters=function removeNullCharacters(str){if("string"!=typeof str)return warn("The argument for removeNullCharacters must be a string."),str;return str.replace(NullCharactersRegExp,"")},exports.setVerbosityLevel=function setVerbosityLevel(level){Number.isInteger(level)&&(verbosity=level)},exports.shadow=shadow,exports.string32=function string32(value){return String.fromCharCode(value>>24&255,value>>16&255,value>>8&255,255&value)},exports.stringToBytes=stringToBytes,exports.stringToPDFString=function stringToPDFString(str){const length=str.length,strBuf=[];if("Ã¾"===str[0]&&"Ã¿"===str[1])for(let i=2;i<length;i+=2)strBuf.push(String.fromCharCode(str.charCodeAt(i)<<8|str.charCodeAt(i+1)));else if("Ã¿"===str[0]&&"Ã¾"===str[1])for(let i=2;i<length;i+=2)strBuf.push(String.fromCharCode(str.charCodeAt(i+1)<<8|str.charCodeAt(i)));else for(let i=0;i<length;++i){const code=PDFStringTranslateTable[str.charCodeAt(i)];strBuf.push(code?String.fromCharCode(code):str.charAt(i))}return strBuf.join("")},exports.stringToUTF8String=function stringToUTF8String(str){return decodeURIComponent(escape(str))},exports.utf8StringToString=function utf8StringToString(str){return unescape(encodeURIComponent(str))},exports.warn=warn,exports.unreachable=unreachable,exports.IsEvalSupportedCached=exports.IsLittleEndianCached=exports.createObjectURL=exports.FormatError=exports.Util=exports.UnknownErrorException=exports.UnexpectedResponseException=exports.TextRenderingMode=exports.StreamType=exports.PermissionFlag=exports.PasswordResponses=exports.PasswordException=exports.NativeImageDecoding=exports.MissingPDFException=exports.InvalidPDFException=exports.AbortException=exports.CMapCompressionType=exports.ImageKind=exports.FontType=exports.AnnotationType=exports.AnnotationStateModelType=exports.AnnotationReviewState=exports.AnnotationReplyType=exports.AnnotationMarkedState=exports.AnnotationFlag=exports.AnnotationFieldFlag=exports.AnnotationBorderStyleType=exports.UNSUPPORTED_FEATURES=exports.VerbosityLevel=exports.OPS=exports.IDENTITY_MATRIX=exports.FONT_IDENTITY_MATRIX=exports.BaseException=void 0,__w_pdfjs_require__(2);exports.IDENTITY_MATRIX=[1,0,0,1,0,0];exports.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];exports.NativeImageDecoding={NONE:"none",DECODE:"decode",DISPLAY:"display"};exports.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};exports.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};exports.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};exports.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};exports.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};exports.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};exports.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};exports.AnnotationReplyType={GROUP:"Group",REPLY:"R"};exports.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};exports.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};exports.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};exports.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};exports.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5};exports.VerbosityLevel=VerbosityLevel;exports.CMapCompressionType={NONE:0,BINARY:1,STREAM:2};exports.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};exports.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"};exports.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function warn(msg){verbosity>=VerbosityLevel.WARNINGS&&console.log(`Warning: ${msg}`)}function unreachable(msg){throw new Error(msg)}function assert(cond,msg){cond||unreachable(msg)}function shadow(obj,prop,value){return Object.defineProperty(obj,prop,{value:value,enumerable:!0,configurable:!0,writable:!1}),value}const BaseException=function BaseExceptionClosure(){function BaseException(message){this.constructor===BaseException&&unreachable("Cannot initialize BaseException."),this.message=message,this.name=this.constructor.name}return BaseException.prototype=new Error,BaseException.constructor=BaseException,BaseException}();exports.BaseException=BaseException;exports.PasswordException=class PasswordException extends BaseException{constructor(msg,code){super(msg),this.code=code}};exports.UnknownErrorException=class UnknownErrorException extends BaseException{constructor(msg,details){super(msg),this.details=details}};exports.InvalidPDFException=class InvalidPDFException extends BaseException{};exports.MissingPDFException=class MissingPDFException extends BaseException{};exports.UnexpectedResponseException=class UnexpectedResponseException extends BaseException{constructor(msg,status){super(msg),this.status=status}};exports.FormatError=class FormatError extends BaseException{};exports.AbortException=class AbortException extends BaseException{};const NullCharactersRegExp=/\x00/g;function stringToBytes(str){assert("string"==typeof str,"Invalid argument for stringToBytes");const length=str.length,bytes=new Uint8Array(length);for(let i=0;i<length;++i)bytes[i]=255&str.charCodeAt(i);return bytes}function arrayByteLength(arr){return void 0!==arr.length?arr.length:(assert(void 0!==arr.byteLength),arr.byteLength)}const IsLittleEndianCached={get value(){return shadow(this,"value",function isLittleEndian(){const buffer8=new Uint8Array(4);return buffer8[0]=1,1===new Uint32Array(buffer8.buffer,0,1)[0]}())}};exports.IsLittleEndianCached=IsLittleEndianCached;const IsEvalSupportedCached={get value(){return shadow(this,"value",function isEvalSupported(){try{return new Function(""),!0}catch(e){return!1}}())}};exports.IsEvalSupportedCached=IsEvalSupportedCached;const rgbBuf=["rgb(",0,",",0,",",0,")"];class Util{static makeCssRgb(r,g,b){return rgbBuf[1]=r,rgbBuf[3]=g,rgbBuf[5]=b,rgbBuf.join("")}static transform(m1,m2){return[m1[0]*m2[0]+m1[2]*m2[1],m1[1]*m2[0]+m1[3]*m2[1],m1[0]*m2[2]+m1[2]*m2[3],m1[1]*m2[2]+m1[3]*m2[3],m1[0]*m2[4]+m1[2]*m2[5]+m1[4],m1[1]*m2[4]+m1[3]*m2[5]+m1[5]]}static applyTransform(p,m){return[p[0]*m[0]+p[1]*m[2]+m[4],p[0]*m[1]+p[1]*m[3]+m[5]]}static applyInverseTransform(p,m){const d=m[0]*m[3]-m[1]*m[2];return[(p[0]*m[3]-p[1]*m[2]+m[2]*m[5]-m[4]*m[3])/d,(-p[0]*m[1]+p[1]*m[0]+m[4]*m[1]-m[5]*m[0])/d]}static getAxialAlignedBoundingBox(r,m){const p1=Util.applyTransform(r,m),p2=Util.applyTransform(r.slice(2,4),m),p3=Util.applyTransform([r[0],r[3]],m),p4=Util.applyTransform([r[2],r[1]],m);return[Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1])]}static inverseTransform(m){const d=m[0]*m[3]-m[1]*m[2];return[m[3]/d,-m[1]/d,-m[2]/d,m[0]/d,(m[2]*m[5]-m[4]*m[3])/d,(m[4]*m[1]-m[5]*m[0])/d]}static apply3dTransform(m,v){return[m[0]*v[0]+m[1]*v[1]+m[2]*v[2],m[3]*v[0]+m[4]*v[1]+m[5]*v[2],m[6]*v[0]+m[7]*v[1]+m[8]*v[2]]}static singularValueDecompose2dScale(m){const transpose=[m[0],m[2],m[1],m[3]],a=m[0]*transpose[0]+m[1]*transpose[2],b=m[0]*transpose[1]+m[1]*transpose[3],c=m[2]*transpose[0]+m[3]*transpose[2],d=m[2]*transpose[1]+m[3]*transpose[3],first=(a+d)/2,second=Math.sqrt((a+d)*(a+d)-4*(a*d-c*b))/2,sx=first+second||1,sy=first-second||1;return[Math.sqrt(sx),Math.sqrt(sy)]}static normalizeRect(rect){const r=rect.slice(0);return rect[0]>rect[2]&&(r[0]=rect[2],r[2]=rect[0]),rect[1]>rect[3]&&(r[1]=rect[3],r[3]=rect[1]),r}static intersect(rect1,rect2){function compare(a,b){return a-b}const orderedX=[rect1[0],rect1[2],rect2[0],rect2[2]].sort(compare),orderedY=[rect1[1],rect1[3],rect2[1],rect2[3]].sort(compare),result=[];return rect1=Util.normalizeRect(rect1),rect2=Util.normalizeRect(rect2),orderedX[0]===rect1[0]&&orderedX[1]===rect2[0]||orderedX[0]===rect2[0]&&orderedX[1]===rect1[0]?(result[0]=orderedX[1],result[2]=orderedX[2],orderedY[0]===rect1[1]&&orderedY[1]===rect2[1]||orderedY[0]===rect2[1]&&orderedY[1]===rect1[1]?(result[1]=orderedY[1],result[3]=orderedY[2],result):null):null}}exports.Util=Util;const PDFStringTranslateTable=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];const createObjectURL=function createObjectURLClosure(){const digits="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function createObjectURL(data,contentType,forceDataSchema=!1){if(!forceDataSchema&&URL.createObjectURL){const blob=new Blob([data],{type:contentType});return URL.createObjectURL(blob)}let buffer=`data:${contentType};base64,`;for(let i=0,ii=data.length;i<ii;i+=3){const b1=255&data[i],b2=255&data[i+1],b3=255&data[i+2];buffer+=digits[b1>>2]+digits[(3&b1)<<4|b2>>4]+digits[i+1<ii?(15&b2)<<2|b3>>6:64]+digits[i+2<ii?63&b3:64]}return buffer}}();exports.createObjectURL=createObjectURL},function(module,exports,__w_pdfjs_require__){},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.build=exports.version=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFWorker=exports.PDFDataRangeTransport=exports.LoopbackPort=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(4),_font_loader=__w_pdfjs_require__(5),_api_compatibility=__w_pdfjs_require__(6),_canvas=__w_pdfjs_require__(8),_worker_options=__w_pdfjs_require__(10),_is_node=__w_pdfjs_require__(7),_message_handler=__w_pdfjs_require__(11),_metadata=__w_pdfjs_require__(12),_transport_stream=__w_pdfjs_require__(14),_webgl=__w_pdfjs_require__(15);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let createPDFNetworkStream;function setPDFNetworkStreamFactory(pdfNetworkStreamFactory){createPDFNetworkStream=pdfNetworkStreamFactory}function getDocument(src){const task=new PDFDocumentLoadingTask;let source;if("string"==typeof src)source={url:src};else if((0,_util.isArrayBuffer)(src))source={data:src};else if(src instanceof PDFDataRangeTransport)source={range:src};else{if("object"!=typeof src)throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!src.url&&!src.data&&!src.range)throw new Error("Invalid parameter object: need either .data, .range or .url");source=src}const params=Object.create(null);let rangeTransport=null,worker=null;for(const key in source)if("url"!==key||"undefined"==typeof window)if("range"!==key)if("worker"!==key)if("data"!==key||source[key]instanceof Uint8Array)params[key]=source[key];else{const pdfBytes=source[key];if("string"==typeof pdfBytes)params[key]=(0,_util.stringToBytes)(pdfBytes);else if("object"!=typeof pdfBytes||null===pdfBytes||isNaN(pdfBytes.length)){if(!(0,_util.isArrayBuffer)(pdfBytes))throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.");params[key]=new Uint8Array(pdfBytes)}else params[key]=new Uint8Array(pdfBytes)}else worker=source[key];else rangeTransport=source[key];else params[key]=new URL(source[key],window.location).href;params.rangeChunkSize=params.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,params.CMapReaderFactory=params.CMapReaderFactory||_display_utils.DOMCMapReaderFactory,params.ignoreErrors=!0!==params.stopAtErrors,params.pdfBug=!0===params.pdfBug;const NativeImageDecoderValues=Object.values(_util.NativeImageDecoding);if(void 0!==params.nativeImageDecoderSupport&&NativeImageDecoderValues.includes(params.nativeImageDecoderSupport)||(params.nativeImageDecoderSupport=_api_compatibility.apiCompatibilityParams.nativeImageDecoderSupport||_util.NativeImageDecoding.DECODE),Number.isInteger(params.maxImageSize)||(params.maxImageSize=-1),"boolean"!=typeof params.isEvalSupported&&(params.isEvalSupported=!0),"boolean"!=typeof params.disableFontFace&&(params.disableFontFace=_api_compatibility.apiCompatibilityParams.disableFontFace||!1),"boolean"!=typeof params.disableRange&&(params.disableRange=!1),"boolean"!=typeof params.disableStream&&(params.disableStream=!1),"boolean"!=typeof params.disableAutoFetch&&(params.disableAutoFetch=!1),"boolean"!=typeof params.disableCreateObjectURL&&(params.disableCreateObjectURL=_api_compatibility.apiCompatibilityParams.disableCreateObjectURL||!1),(0,_util.setVerbosityLevel)(params.verbosity),!worker){const workerParams={verbosity:params.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};worker=workerParams.port?PDFWorker.fromPort(workerParams):new PDFWorker(workerParams),task._worker=worker}const docId=task.docId;return worker.promise.then((function(){if(task.destroyed)throw new Error("Loading aborted");return _fetchDocument(worker,params,rangeTransport,docId).then((function(workerId){if(task.destroyed)throw new Error("Loading aborted");let networkStream;rangeTransport?networkStream=new _transport_stream.PDFDataTransportStream({length:params.length,initialData:params.initialData,progressiveDone:params.progressiveDone,disableRange:params.disableRange,disableStream:params.disableStream},rangeTransport):params.data||(networkStream=createPDFNetworkStream({url:params.url,length:params.length,httpHeaders:params.httpHeaders,withCredentials:params.withCredentials,rangeChunkSize:params.rangeChunkSize,disableRange:params.disableRange,disableStream:params.disableStream}));const messageHandler=new _message_handler.MessageHandler(docId,workerId,worker.port);messageHandler.postMessageTransfers=worker.postMessageTransfers;const transport=new WorkerTransport(messageHandler,task,networkStream,params);task._transport=transport,messageHandler.send("Ready",null)}))})).catch(task._capability.reject),task}function _fetchDocument(worker,source,pdfDataRangeTransport,docId){return worker.destroyed?Promise.reject(new Error("Worker was destroyed")):(pdfDataRangeTransport&&(source.length=pdfDataRangeTransport.length,source.initialData=pdfDataRangeTransport.initialData,source.progressiveDone=pdfDataRangeTransport.progressiveDone),worker.messageHandler.sendWithPromise("GetDocRequest",{docId:docId,apiVersion:"2.4.456",source:{data:source.data,url:source.url,password:source.password,disableAutoFetch:source.disableAutoFetch,rangeChunkSize:source.rangeChunkSize,length:source.length},maxImageSize:source.maxImageSize,disableFontFace:source.disableFontFace,disableCreateObjectURL:source.disableCreateObjectURL,postMessageTransfers:worker.postMessageTransfers,docBaseUrl:source.docBaseUrl,nativeImageDecoderSupport:source.nativeImageDecoderSupport,ignoreErrors:source.ignoreErrors,isEvalSupported:source.isEvalSupported}).then((function(workerId){if(worker.destroyed)throw new Error("Worker was destroyed");return workerId})))}const PDFDocumentLoadingTask=function PDFDocumentLoadingTaskClosure(){let nextDocumentId=0;return class PDFDocumentLoadingTask{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+nextDocumentId++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){this.destroyed=!0;return(this._transport?this._transport.destroy():Promise.resolve()).then((()=>{this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}))}then(onFulfilled,onRejected){throw new Error("Removed API method: PDFDocumentLoadingTask.then, use the `promise` getter instead.")}}}();class PDFDataRangeTransport{constructor(length,initialData,progressiveDone=!1){this.length=length,this.initialData=initialData,this.progressiveDone=progressiveDone,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(listener){this._rangeListeners.push(listener)}addProgressListener(listener){this._progressListeners.push(listener)}addProgressiveReadListener(listener){this._progressiveReadListeners.push(listener)}addProgressiveDoneListener(listener){this._progressiveDoneListeners.push(listener)}onDataRange(begin,chunk){for(const listener of this._rangeListeners)listener(begin,chunk)}onDataProgress(loaded,total){this._readyCapability.promise.then((()=>{for(const listener of this._progressListeners)listener(loaded,total)}))}onDataProgressiveRead(chunk){this._readyCapability.promise.then((()=>{for(const listener of this._progressiveReadListeners)listener(chunk)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const listener of this._progressiveDoneListeners)listener()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(begin,end){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(pdfInfo,transport){this._pdfInfo=pdfInfo,this._transport=transport}get numPages(){return this._pdfInfo.numPages}get fingerprint(){return this._pdfInfo.fingerprint}getPage(pageNumber){return this._transport.getPage(pageNumber)}getPageIndex(ref){return this._transport.getPageIndex(ref)}getDestinations(){return this._transport.getDestinations()}getDestination(id){return this._transport.getDestination(id)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getOpenActionDestination(){return(0,_display_utils.deprecated)("getOpenActionDestination, use getOpenAction instead."),this.getOpenAction().then((function(openAction){return openAction&&openAction.dest?openAction.dest:null}))}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getOutline(){return this._transport.getOutline()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}getStats(){return this._transport.getStats()}cleanup(){return this._transport.startCleanup()}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(pageIndex,pageInfo,transport,pdfBug=!1){this._pageIndex=pageIndex,this._pageInfo=pageInfo,this._transport=transport,this._stats=pdfBug?new _display_utils.StatTimer:null,this._pdfBug=pdfBug,this.commonObjs=transport.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this.intentStates=Object.create(null),this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:scale,rotation:rotation=this.rotate,offsetX:offsetX=0,offsetY:offsetY=0,dontFlip:dontFlip=!1}={}){if(arguments.length>1||"number"==typeof arguments[0])throw new Error("PDFPageProxy.getViewport is called with obsolete arguments.");return new _display_utils.PageViewport({viewBox:this.view,scale:scale,rotation:rotation,offsetX:offsetX,offsetY:offsetY,dontFlip:dontFlip})}getAnnotations({intent:intent=null}={}){return this.annotationsPromise&&this.annotationsIntent===intent||(this.annotationsPromise=this._transport.getAnnotations(this._pageIndex,intent),this.annotationsIntent=intent),this.annotationsPromise}render({canvasContext:canvasContext,viewport:viewport,intent:intent="display",enableWebGL:enableWebGL=!1,renderInteractiveForms:renderInteractiveForms=!1,transform:transform=null,imageLayer:imageLayer=null,canvasFactory:canvasFactory=null,background:background=null}){this._stats&&this._stats.time("Overall");const renderingIntent="print"===intent?"print":"display";this.pendingCleanup=!1,this.intentStates[renderingIntent]||(this.intentStates[renderingIntent]=Object.create(null));const intentState=this.intentStates[renderingIntent];intentState.streamReaderCancelTimeout&&(clearTimeout(intentState.streamReaderCancelTimeout),intentState.streamReaderCancelTimeout=null);const canvasFactoryInstance=canvasFactory||new _display_utils.DOMCanvasFactory,webGLContext=new _webgl.WebGLContext({enable:enableWebGL});intentState.displayReadyCapability||(intentState.displayReadyCapability=(0,_util.createPromiseCapability)(),intentState.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:renderingIntent,renderInteractiveForms:!0===renderInteractiveForms}));const complete=error=>{const i=intentState.renderTasks.indexOf(internalRenderTask);i>=0&&intentState.renderTasks.splice(i,1),(this.cleanupAfterRender||"print"===renderingIntent)&&(this.pendingCleanup=!0),this._tryCleanup(),error?(internalRenderTask.capability.reject(error),this._abortOperatorList({intentState:intentState,reason:error})):internalRenderTask.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},internalRenderTask=new InternalRenderTask({callback:complete,params:{canvasContext:canvasContext,viewport:viewport,transform:transform,imageLayer:imageLayer,background:background},objs:this.objs,commonObjs:this.commonObjs,operatorList:intentState.operatorList,pageIndex:this._pageIndex,canvasFactory:canvasFactoryInstance,webGLContext:webGLContext,useRequestAnimationFrame:"print"!==renderingIntent,pdfBug:this._pdfBug});intentState.renderTasks||(intentState.renderTasks=[]),intentState.renderTasks.push(internalRenderTask);const renderTask=internalRenderTask.task;return intentState.displayReadyCapability.promise.then((transparency=>{this.pendingCleanup?complete():(this._stats&&this._stats.time("Rendering"),internalRenderTask.initializeGraphics(transparency),internalRenderTask.operatorListChanged())})).catch(complete),renderTask}getOperatorList(){this.intentStates.oplist||(this.intentStates.oplist=Object.create(null));const intentState=this.intentStates.oplist;let opListTask;return intentState.opListReadCapability||(opListTask={},opListTask.operatorListChanged=function operatorListChanged(){if(intentState.operatorList.lastChunk){intentState.opListReadCapability.resolve(intentState.operatorList);const i=intentState.renderTasks.indexOf(opListTask);i>=0&&intentState.renderTasks.splice(i,1)}},intentState.opListReadCapability=(0,_util.createPromiseCapability)(),intentState.renderTasks=[],intentState.renderTasks.push(opListTask),intentState.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:"oplist"})),intentState.opListReadCapability.promise}streamTextContent({normalizeWhitespace:normalizeWhitespace=!1,disableCombineTextItems:disableCombineTextItems=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:!0===normalizeWhitespace,combineTextItems:!0!==disableCombineTextItems},{highWaterMark:100,size:textContent=>textContent.items.length})}getTextContent(params={}){const readableStream=this.streamTextContent(params);return new Promise((function(resolve,reject){const reader=readableStream.getReader(),textContent={items:[],styles:Object.create(null)};!function pump(){reader.read().then((function({value:value,done:done}){done?resolve(textContent):(Object.assign(textContent.styles,value.styles),textContent.items.push(...value.items),pump())}),reject)}()}))}_destroy(){this.destroyed=!0,this._transport.pageCache[this._pageIndex]=null;const waitOn=[];return Object.keys(this.intentStates).forEach((intent=>{const intentState=this.intentStates[intent];this._abortOperatorList({intentState:intentState,reason:new Error("Page was destroyed."),force:!0}),"oplist"!==intent&&intentState.renderTasks.forEach((function(renderTask){const renderCompleted=renderTask.capability.promise.catch((function(){}));waitOn.push(renderCompleted),renderTask.cancel()}))})),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1,Promise.all(waitOn)}cleanup(resetStats=!1){return this.pendingCleanup=!0,this._tryCleanup(resetStats)}_tryCleanup(resetStats=!1){return!(!this.pendingCleanup||Object.keys(this.intentStates).some((intent=>{const intentState=this.intentStates[intent];return 0!==intentState.renderTasks.length||!intentState.operatorList.lastChunk})))&&(Object.keys(this.intentStates).forEach((intent=>{delete this.intentStates[intent]})),this.objs.clear(),this.annotationsPromise=null,resetStats&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0)}_startRenderPage(transparency,intent){const intentState=this.intentStates[intent];intentState&&(this._stats&&this._stats.timeEnd("Page Request"),intentState.displayReadyCapability&&intentState.displayReadyCapability.resolve(transparency))}_renderPageChunk(operatorListChunk,intentState){for(let i=0,ii=operatorListChunk.length;i<ii;i++)intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]),intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);intentState.operatorList.lastChunk=operatorListChunk.lastChunk;for(let i=0;i<intentState.renderTasks.length;i++)intentState.renderTasks[i].operatorListChanged();operatorListChunk.lastChunk&&this._tryCleanup()}_pumpOperatorList(args){(0,_util.assert)(args.intent,'PDFPageProxy._pumpOperatorList: Expected "intent" argument.');const reader=this._transport.messageHandler.sendWithStream("GetOperatorList",args).getReader(),intentState=this.intentStates[args.intent];intentState.streamReader=reader;const pump=()=>{reader.read().then((({value:value,done:done})=>{done?intentState.streamReader=null:this._transport.destroyed||(this._renderPageChunk(value,intentState),pump())}),(reason=>{if(intentState.streamReader=null,!this._transport.destroyed){if(intentState.operatorList){intentState.operatorList.lastChunk=!0;for(let i=0;i<intentState.renderTasks.length;i++)intentState.renderTasks[i].operatorListChanged();this._tryCleanup()}if(intentState.displayReadyCapability)intentState.displayReadyCapability.reject(reason);else{if(!intentState.opListReadCapability)throw reason;intentState.opListReadCapability.reject(reason)}}}))};pump()}_abortOperatorList({intentState:intentState,reason:reason,force:force=!1}){if((0,_util.assert)(reason instanceof Error||"object"==typeof reason&&null!==reason,'PDFPageProxy._abortOperatorList: Expected "reason" argument.'),intentState.streamReader){if(!force){if(0!==intentState.renderTasks.length)return;if(reason instanceof _display_utils.RenderingCancelledException)return void(intentState.streamReaderCancelTimeout=setTimeout((()=>{this._abortOperatorList({intentState:intentState,reason:reason,force:!0}),intentState.streamReaderCancelTimeout=null}),RENDERING_CANCELLED_TIMEOUT))}intentState.streamReader.cancel(new _util.AbortException(reason&&reason.message)),intentState.streamReader=null,this._transport.destroyed||(Object.keys(this.intentStates).some((intent=>this.intentStates[intent]===intentState&&(delete this.intentStates[intent],!0))),this.cleanup())}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(defer=!0){this._listeners=[],this._defer=defer,this._deferred=Promise.resolve(void 0)}postMessage(obj,transfers){if(!this._defer)return void this._listeners.forEach((listener=>{listener.call(this,{data:obj})}));const cloned=new WeakMap,e={data:function cloneValue(value){if("object"!=typeof value||null===value)return value;if(cloned.has(value))return cloned.get(value);let buffer,result;if((buffer=value.buffer)&&(0,_util.isArrayBuffer)(buffer)){return result=transfers&&transfers.includes(buffer)?new value.constructor(buffer,value.byteOffset,value.byteLength):new value.constructor(value),cloned.set(value,result),result}result=Array.isArray(value)?[]:{},cloned.set(value,result);for(const i in value){let desc,p=value;for(;!(desc=Object.getOwnPropertyDescriptor(p,i));)p=Object.getPrototypeOf(p);if(void 0!==desc.value)if("function"!=typeof desc.value)result[i]=cloneValue(desc.value);else if(value.hasOwnProperty&&value.hasOwnProperty(i))throw new Error(`LoopbackPort.postMessage - cannot clone: ${value[i]}`)}return result}(obj)};this._deferred.then((()=>{this._listeners.forEach((listener=>{listener.call(this,e)}))}))}addEventListener(name,listener){this._listeners.push(listener)}removeEventListener(name,listener){const i=this._listeners.indexOf(listener);this._listeners.splice(i,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorker=function PDFWorkerClosure(){const pdfWorkerPorts=new WeakMap;let isWorkerDisabled=!1,fallbackWorkerSrc,nextFakeWorkerId=0,fakeWorkerCapability;if(_is_node.isNodeJS)isWorkerDisabled=!0,fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document&&"currentScript"in document){const pdfjsFilePath=document.currentScript&&document.currentScript.src;pdfjsFilePath&&(fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}function getWorkerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(void 0!==fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}function getMainThreadWorkerMessageHandler(){let mainWorkerMessageHandler;try{mainWorkerMessageHandler=globalThis.pdfjsWorker&&globalThis.pdfjsWorker.WorkerMessageHandler}catch(ex){}return mainWorkerMessageHandler||null}function setupFakeWorkerGlobal(){if(fakeWorkerCapability)return fakeWorkerCapability.promise;fakeWorkerCapability=(0,_util.createPromiseCapability)();const loader=async function(){const mainWorkerMessageHandler=getMainThreadWorkerMessageHandler();if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(getWorkerSrc());return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(getWorkerSrc()),window.pdfjsWorker.WorkerMessageHandler};return loader().then(fakeWorkerCapability.resolve,fakeWorkerCapability.reject),fakeWorkerCapability.promise}function createCDNWrapper(url){const wrapper="importScripts('"+url+"');";return URL.createObjectURL(new Blob([wrapper]))}class PDFWorker{constructor({name:name=null,port:port=null,verbosity:verbosity=(0,_util.getVerbosityLevel)()}={}){if(port&&pdfWorkerPorts.has(port))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=name,this.destroyed=!1,this.postMessageTransfers=!0,this.verbosity=verbosity,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,port)return pdfWorkerPorts.set(port,this),void this._initializeFromPort(port);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(port){this._port=port,this._messageHandler=new _message_handler.MessageHandler("main","worker",port),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve()}_initialize(){if("undefined"!=typeof Worker&&!isWorkerDisabled&&!getMainThreadWorkerMessageHandler()){let workerSrc=getWorkerSrc();try{(0,_util.isSameOrigin)(window.location.href,workerSrc)||(workerSrc=createCDNWrapper(new URL(workerSrc,window.location).href));const worker=new Worker(workerSrc),messageHandler=new _message_handler.MessageHandler("main","worker",worker),terminateEarly=()=>{worker.removeEventListener("error",onWorkerError),messageHandler.destroy(),worker.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},onWorkerError=()=>{this._webWorker||terminateEarly()};worker.addEventListener("error",onWorkerError),messageHandler.on("test",(data=>{worker.removeEventListener("error",onWorkerError),this.destroyed?terminateEarly():data?(this._messageHandler=messageHandler,this._port=worker,this._webWorker=worker,data.supportTransfers||(this.postMessageTransfers=!1),this._readyCapability.resolve(),messageHandler.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),messageHandler.destroy(),worker.terminate())})),messageHandler.on("ready",(data=>{if(worker.removeEventListener("error",onWorkerError),this.destroyed)terminateEarly();else try{sendTest()}catch(e){this._setupFakeWorker()}}));const sendTest=()=>{const testObj=new Uint8Array([this.postMessageTransfers?255:0]);try{messageHandler.send("test",testObj,[testObj.buffer])}catch(ex){(0,_util.warn)("Cannot use postMessage transfers."),testObj[0]=0,messageHandler.send("test",testObj)}};return void sendTest()}catch(e){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),isWorkerDisabled=!0),setupFakeWorkerGlobal().then((WorkerMessageHandler=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const port=new LoopbackPort;this._port=port;const id="fake"+nextFakeWorkerId++,workerHandler=new _message_handler.MessageHandler(id+"_worker",id,port);WorkerMessageHandler.setup(workerHandler,port);const messageHandler=new _message_handler.MessageHandler(id,id+"_worker",port);this._messageHandler=messageHandler,this._readyCapability.resolve(),messageHandler.send("configure",{verbosity:this.verbosity})})).catch((reason=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${reason.message}".`))}))}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),pdfWorkerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(params){if(!params||!params.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return pdfWorkerPorts.has(params.port)?pdfWorkerPorts.get(params.port):new PDFWorker(params)}static getWorkerSrc(){return getWorkerSrc()}}return PDFWorker}();exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(messageHandler,loadingTask,networkStream,params){this.messageHandler=messageHandler,this.loadingTask=loadingTask,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:loadingTask.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this)}),this._params=params,this.CMapReaderFactory=new params.CMapReaderFactory({baseUrl:params.cMapUrl,isCompressed:params.cMapPacked}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=networkStream,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const waitOn=[];this.pageCache.forEach((function(page){page&&waitOn.push(page._destroy())})),this.pageCache.length=0,this.pagePromises.length=0;const terminated=this.messageHandler.sendWithPromise("Terminate",null);return waitOn.push(terminated),Promise.all(waitOn).then((()=>{this.fontLoader.clear(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:messageHandler,loadingTask:loadingTask}=this;messageHandler.on("GetReader",((data,sink)=>{(0,_util.assert)(this._networkStream),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=evt=>{this._lastProgress={loaded:evt.loaded,total:evt.total}},sink.onPull=()=>{this._fullReader.read().then((function({value:value,done:done}){done?sink.close():((0,_util.assert)((0,_util.isArrayBuffer)(value)),sink.enqueue(new Uint8Array(value),1,[value]))})).catch((reason=>{sink.error(reason)}))},sink.onCancel=reason=>{this._fullReader.cancel(reason)}})),messageHandler.on("ReaderHeadersReady",(data=>{const headersCapability=(0,_util.createPromiseCapability)(),fullReader=this._fullReader;return fullReader.headersReady.then((()=>{fullReader.isStreamingSupported&&fullReader.isRangeSupported||(this._lastProgress&&loadingTask.onProgress&&loadingTask.onProgress(this._lastProgress),fullReader.onProgress=evt=>{loadingTask.onProgress&&loadingTask.onProgress({loaded:evt.loaded,total:evt.total})}),headersCapability.resolve({isStreamingSupported:fullReader.isStreamingSupported,isRangeSupported:fullReader.isRangeSupported,contentLength:fullReader.contentLength})}),headersCapability.reject),headersCapability.promise})),messageHandler.on("GetRangeReader",((data,sink)=>{(0,_util.assert)(this._networkStream);const rangeReader=this._networkStream.getRangeReader(data.begin,data.end);rangeReader?(sink.onPull=()=>{rangeReader.read().then((function({value:value,done:done}){done?sink.close():((0,_util.assert)((0,_util.isArrayBuffer)(value)),sink.enqueue(new Uint8Array(value),1,[value]))})).catch((reason=>{sink.error(reason)}))},sink.onCancel=reason=>{rangeReader.cancel(reason)}):sink.close()})),messageHandler.on("GetDoc",(({pdfInfo:pdfInfo})=>{this._numPages=pdfInfo.numPages,loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo,this))})),messageHandler.on("DocException",(function(ex){let reason;switch(ex.name){case"PasswordException":reason=new _util.PasswordException(ex.message,ex.code);break;case"InvalidPDFException":reason=new _util.InvalidPDFException(ex.message);break;case"MissingPDFException":reason=new _util.MissingPDFException(ex.message);break;case"UnexpectedResponseException":reason=new _util.UnexpectedResponseException(ex.message,ex.status);break;case"UnknownErrorException":reason=new _util.UnknownErrorException(ex.message,ex.details)}loadingTask._capability.reject(reason)})),messageHandler.on("PasswordRequest",(exception=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),loadingTask.onPassword){const updatePassword=password=>{this._passwordCapability.resolve({password:password})};try{loadingTask.onPassword(updatePassword,exception.code)}catch(ex){this._passwordCapability.reject(ex)}}else this._passwordCapability.reject(new _util.PasswordException(exception.message,exception.code));return this._passwordCapability.promise})),messageHandler.on("DataLoaded",(data=>{loadingTask.onProgress&&loadingTask.onProgress({loaded:data.length,total:data.length}),this.downloadInfoCapability.resolve(data)})),messageHandler.on("StartRenderPage",(data=>{if(this.destroyed)return;this.pageCache[data.pageIndex]._startRenderPage(data.transparency,data.intent)})),messageHandler.on("commonobj",(data=>{if(this.destroyed)return;const[id,type,exportedData]=data;if(!this.commonObjs.has(id))switch(type){case"Font":const params=this._params;if("error"in exportedData){const exportedError=exportedData.error;(0,_util.warn)(`Error during font loading: ${exportedError}`),this.commonObjs.resolve(id,exportedError);break}let fontRegistry=null;params.pdfBug&&globalThis.FontInspector&&globalThis.FontInspector.enabled&&(fontRegistry={registerFont(font,url){globalThis.FontInspector.fontAdded(font,url)}});const font=new _font_loader.FontFaceObject(exportedData,{isEvalSupported:params.isEvalSupported,disableFontFace:params.disableFontFace,ignoreErrors:params.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:fontRegistry});this.fontLoader.bind(font).then((()=>{this.commonObjs.resolve(id,font)}),(reason=>{messageHandler.sendWithPromise("FontFallback",{id:id}).finally((()=>{this.commonObjs.resolve(id,font)}))}));break;case"FontPath":case"FontType3Res":this.commonObjs.resolve(id,exportedData);break;default:throw new Error(`Got unknown common object type ${type}`)}})),messageHandler.on("obj",(data=>{if(this.destroyed)return;const[id,pageIndex,type,imageData]=data,pageProxy=this.pageCache[pageIndex];if(!pageProxy.objs.has(id))switch(type){case"JpegStream":return new Promise(((resolve,reject)=>{const img=new Image;img.onload=function(){resolve(img)},img.onerror=function(){reject(new Error("Error during JPEG image loading")),(0,_display_utils.releaseImageResources)(img)},img.src=imageData})).then((img=>{pageProxy.objs.resolve(id,img)}));case"Image":pageProxy.objs.resolve(id,imageData);const MAX_IMAGE_SIZE_TO_STORE=8e6;imageData&&"data"in imageData&&imageData.data.length>MAX_IMAGE_SIZE_TO_STORE&&(pageProxy.cleanupAfterRender=!0);break;default:throw new Error(`Got unknown object type ${type}`)}})),messageHandler.on("DocProgress",(data=>{this.destroyed||loadingTask.onProgress&&loadingTask.onProgress({loaded:data.loaded,total:data.total})})),messageHandler.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),messageHandler.on("JpegDecode",(data=>{if(this.destroyed)return Promise.reject(new Error("Worker was destroyed"));if("undefined"==typeof document)return Promise.reject(new Error('"document" is not defined.'));const[imageUrl,components]=data;return 3!==components&&1!==components?Promise.reject(new Error("Only 3 components or 1 component can be returned")):new Promise((function(resolve,reject){const img=new Image;img.onload=function(){const{width:width,height:height}=img,size=width*height,rgbaLength=4*size,buf=new Uint8ClampedArray(size*components);let tmpCanvas=document.createElement("canvas");tmpCanvas.width=width,tmpCanvas.height=height;let tmpCtx=tmpCanvas.getContext("2d");tmpCtx.drawImage(img,0,0);const data=tmpCtx.getImageData(0,0,width,height).data;if(3===components)for(let i=0,j=0;i<rgbaLength;i+=4,j+=3)buf[j]=data[i],buf[j+1]=data[i+1],buf[j+2]=data[i+2];else if(1===components)for(let i=0,j=0;i<rgbaLength;i+=4,j++)buf[j]=data[i];resolve({data:buf,width:width,height:height}),(0,_display_utils.releaseImageResources)(img),tmpCanvas.width=0,tmpCanvas.height=0,tmpCanvas=null,tmpCtx=null},img.onerror=function(){reject(new Error("JpegDecode failed to load image")),(0,_display_utils.releaseImageResources)(img)},img.src=imageUrl}))})),messageHandler.on("FetchBuiltInCMap",((data,sink)=>{if(this.destroyed)return void sink.error(new Error("Worker was destroyed"));let fetched=!1;sink.onPull=()=>{fetched?sink.close():(fetched=!0,this.CMapReaderFactory.fetch(data).then((function(builtInCMap){sink.enqueue(builtInCMap,1,[builtInCMap.cMapData.buffer])})).catch((function(reason){sink.error(reason)})))}}))}_onUnsupportedFeature({featureId:featureId}){this.destroyed||this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(featureId)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(pageNumber){if(!Number.isInteger(pageNumber)||pageNumber<=0||pageNumber>this._numPages)return Promise.reject(new Error("Invalid page request"));const pageIndex=pageNumber-1;if(pageIndex in this.pagePromises)return this.pagePromises[pageIndex];const promise=this.messageHandler.sendWithPromise("GetPage",{pageIndex:pageIndex}).then((pageInfo=>{if(this.destroyed)throw new Error("Transport destroyed");const page=new PDFPageProxy(pageIndex,pageInfo,this,this._params.pdfBug);return this.pageCache[pageIndex]=page,page}));return this.pagePromises[pageIndex]=promise,promise}getPageIndex(ref){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:ref}).catch((function(reason){return Promise.reject(new Error(reason))}))}getAnnotations(pageIndex,intent){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:pageIndex,intent:intent})}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(id){return"string"!=typeof id?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:id})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.messageHandler.sendWithPromise("GetMetadata",null).then((results=>({info:results[0],metadata:results[1]?new _metadata.Metadata(results[1]):null,contentDispositionFilename:this._fullReader?this._fullReader.filename:null})))}getStats(){return this.messageHandler.sendWithPromise("GetStats",null)}startCleanup(){return this.messageHandler.sendWithPromise("Cleanup",null).then((()=>{for(let i=0,ii=this.pageCache.length;i<ii;i++){const page=this.pageCache[i];if(page){if(!page.cleanup())throw new Error(`startCleanup: Page ${i+1} is currently rendering.`)}}this.commonObjs.clear(),this.fontLoader.clear()}))}get loadingParams(){const params=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:params.disableAutoFetch,disableCreateObjectURL:params.disableCreateObjectURL,disableFontFace:params.disableFontFace,nativeImageDecoderSupport:params.nativeImageDecoderSupport})}}class PDFObjects{constructor(){this._objs=Object.create(null)}_ensureObj(objId){return this._objs[objId]?this._objs[objId]:this._objs[objId]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}get(objId,callback=null){if(callback)return this._ensureObj(objId).capability.promise.then(callback),null;const obj=this._objs[objId];if(!obj||!obj.resolved)throw new Error(`Requesting object that isn't resolved yet ${objId}.`);return obj.data}has(objId){const obj=this._objs[objId];return!!obj&&obj.resolved}resolve(objId,data){const obj=this._ensureObj(objId);obj.resolved=!0,obj.data=data,obj.capability.resolve(data)}clear(){for(const objId in this._objs){const{data:data}=this._objs[objId];"undefined"!=typeof Image&&data instanceof Image&&(0,_display_utils.releaseImageResources)(data)}this._objs=Object.create(null)}}class RenderTask{constructor(internalRenderTask){this._internalRenderTask=internalRenderTask,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}then(onFulfilled,onRejected){throw new Error("Removed API method: RenderTask.then, use the `promise` getter instead.")}}const InternalRenderTask=function InternalRenderTaskClosure(){const canvasInRendering=new WeakSet;return class InternalRenderTask{constructor({callback:callback,params:params,objs:objs,commonObjs:commonObjs,operatorList:operatorList,pageIndex:pageIndex,canvasFactory:canvasFactory,webGLContext:webGLContext,useRequestAnimationFrame:useRequestAnimationFrame=!1,pdfBug:pdfBug=!1}){this.callback=callback,this.params=params,this.objs=objs,this.commonObjs=commonObjs,this.operatorListIdx=null,this.operatorList=operatorList,this._pageIndex=pageIndex,this.canvasFactory=canvasFactory,this.webGLContext=webGLContext,this._pdfBug=pdfBug,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===useRequestAnimationFrame&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=params.canvasContext.canvas}initializeGraphics(transparency=!1){if(this.cancelled)return;if(this._canvas){if(canvasInRendering.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");canvasInRendering.add(this._canvas)}this._pdfBug&&globalThis.StepperManager&&globalThis.StepperManager.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:canvasContext,viewport:viewport,transform:transform,imageLayer:imageLayer,background:background}=this.params;this.gfx=new _canvas.CanvasGraphics(canvasContext,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext,imageLayer),this.gfx.beginDrawing({transform:transform,viewport:viewport,transparency:transparency,background:background}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(error=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&canvasInRendering.delete(this._canvas),this.callback(error||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame((()=>{this._nextBound().catch(this.cancel.bind(this))})):Promise.resolve().then(this._nextBound).catch(this.cancel.bind(this))}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&canvasInRendering.delete(this._canvas),this.callback())))}}}(),version="2.4.456";exports.version=version;const build="228a591c";exports.build=build},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addLinkAttributes=function addLinkAttributes(link,{url:url,target:target,rel:rel,enabled:enabled=!0}={}){(0,_util.assert)(url&&"string"==typeof url,'addLinkAttributes: A valid "url" parameter must provided.');const urlNullRemoved=(0,_util.removeNullCharacters)(url);enabled?link.href=link.title=urlNullRemoved:(link.href="",link.title=`Disabled: ${urlNullRemoved}`,link.onclick=()=>!1);let targetStr="";switch(target){case LinkTarget.NONE:break;case LinkTarget.SELF:targetStr="_self";break;case LinkTarget.BLANK:targetStr="_blank";break;case LinkTarget.PARENT:targetStr="_parent";break;case LinkTarget.TOP:targetStr="_top"}link.target=targetStr,link.rel="string"==typeof rel?rel:"noopener noreferrer nofollow"},exports.getFilenameFromUrl=function getFilenameFromUrl(url){const anchor=url.indexOf("#"),query=url.indexOf("?"),end=Math.min(anchor>0?anchor:url.length,query>0?query:url.length);return url.substring(url.lastIndexOf("/",end)+1,end)},exports.isFetchSupported=isFetchSupported,exports.isValidFetchUrl=isValidFetchUrl,exports.loadScript=function loadScript(src){return new Promise(((resolve,reject)=>{const script=document.createElement("script");script.src=src,script.onload=resolve,script.onerror=function(){reject(new Error(`Cannot load script at: ${script.src}`))},(document.head||document.documentElement).appendChild(script)}))},exports.deprecated=function deprecated(details){console.log("Deprecated API usage: "+details)},exports.releaseImageResources=function releaseImageResources(img){(0,_util.assert)(img instanceof Image,"Invalid `img` parameter.");const url=img.src;"string"==typeof url&&url.startsWith("blob:")&&URL.revokeObjectURL&&URL.revokeObjectURL(url);img.removeAttribute("src")},exports.PDFDateString=exports.StatTimer=exports.DOMSVGFactory=exports.DOMCMapReaderFactory=exports.DOMCanvasFactory=exports.DEFAULT_LINK_REL=exports.LinkTarget=exports.RenderingCancelledException=exports.PageViewport=void 0;var _util=__w_pdfjs_require__(1);exports.DEFAULT_LINK_REL="noopener noreferrer nofollow";const SVG_NS="http://www.w3.org/2000/svg";exports.DOMCanvasFactory=class DOMCanvasFactory{create(width,height){if(width<=0||height<=0)throw new Error("Invalid canvas size");const canvas=document.createElement("canvas"),context=canvas.getContext("2d");return canvas.width=width,canvas.height=height,{canvas:canvas,context:context}}reset(canvasAndContext,width,height){if(!canvasAndContext.canvas)throw new Error("Canvas is not specified");if(width<=0||height<=0)throw new Error("Invalid canvas size");canvasAndContext.canvas.width=width,canvasAndContext.canvas.height=height}destroy(canvasAndContext){if(!canvasAndContext.canvas)throw new Error("Canvas is not specified");canvasAndContext.canvas.width=0,canvasAndContext.canvas.height=0,canvasAndContext.canvas=null,canvasAndContext.context=null}};exports.DOMCMapReaderFactory=class DOMCMapReaderFactory{constructor({baseUrl:baseUrl=null,isCompressed:isCompressed=!1}){this.baseUrl=baseUrl,this.isCompressed=isCompressed}async fetch({name:name}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!name)throw new Error("CMap name must be specified.");const url=this.baseUrl+name+(this.isCompressed?".bcmap":""),compressionType=this.isCompressed?_util.CMapCompressionType.BINARY:_util.CMapCompressionType.NONE;return isFetchSupported()&&isValidFetchUrl(url,document.baseURI)?fetch(url).then((async response=>{if(!response.ok)throw new Error(response.statusText);let cMapData;return cMapData=this.isCompressed?new Uint8Array(await response.arrayBuffer()):(0,_util.stringToBytes)(await response.text()),{cMapData:cMapData,compressionType:compressionType}})).catch((reason=>{throw new Error("Unable to load "+(this.isCompressed?"binary ":"")+`CMap at: ${url}`)})):new Promise(((resolve,reject)=>{const request=new XMLHttpRequest;request.open("GET",url,!0),this.isCompressed&&(request.responseType="arraybuffer"),request.onreadystatechange=()=>{if(request.readyState===XMLHttpRequest.DONE){if(200===request.status||0===request.status){let cMapData;if(this.isCompressed&&request.response?cMapData=new Uint8Array(request.response):!this.isCompressed&&request.responseText&&(cMapData=(0,_util.stringToBytes)(request.responseText)),cMapData)return void resolve({cMapData:cMapData,compressionType:compressionType})}reject(new Error(request.statusText))}},request.send(null)})).catch((reason=>{throw new Error("Unable to load "+(this.isCompressed?"binary ":"")+`CMap at: ${url}`)}))}};exports.DOMSVGFactory=class DOMSVGFactory{create(width,height){(0,_util.assert)(width>0&&height>0,"Invalid SVG dimensions");const svg=document.createElementNS(SVG_NS,"svg:svg");return svg.setAttribute("version","1.1"),svg.setAttribute("width",width+"px"),svg.setAttribute("height",height+"px"),svg.setAttribute("preserveAspectRatio","none"),svg.setAttribute("viewBox","0 0 "+width+" "+height),svg}createElement(type){return(0,_util.assert)("string"==typeof type,"Invalid SVG element type"),document.createElementNS(SVG_NS,type)}};class PageViewport{constructor({viewBox:viewBox,scale:scale,rotation:rotation,offsetX:offsetX=0,offsetY:offsetY=0,dontFlip:dontFlip=!1}){this.viewBox=viewBox,this.scale=scale,this.rotation=rotation,this.offsetX=offsetX,this.offsetY=offsetY;const centerX=(viewBox[2]+viewBox[0])/2,centerY=(viewBox[3]+viewBox[1])/2;let rotateA,rotateB,rotateC,rotateD,offsetCanvasX,offsetCanvasY,width,height;switch(rotation=(rotation%=360)<0?rotation+360:rotation){case 180:rotateA=-1,rotateB=0,rotateC=0,rotateD=1;break;case 90:rotateA=0,rotateB=1,rotateC=1,rotateD=0;break;case 270:rotateA=0,rotateB=-1,rotateC=-1,rotateD=0;break;default:rotateA=1,rotateB=0,rotateC=0,rotateD=-1}dontFlip&&(rotateC=-rotateC,rotateD=-rotateD),0===rotateA?(offsetCanvasX=Math.abs(centerY-viewBox[1])*scale+offsetX,offsetCanvasY=Math.abs(centerX-viewBox[0])*scale+offsetY,width=Math.abs(viewBox[3]-viewBox[1])*scale,height=Math.abs(viewBox[2]-viewBox[0])*scale):(offsetCanvasX=Math.abs(centerX-viewBox[0])*scale+offsetX,offsetCanvasY=Math.abs(centerY-viewBox[1])*scale+offsetY,width=Math.abs(viewBox[2]-viewBox[0])*scale,height=Math.abs(viewBox[3]-viewBox[1])*scale),this.transform=[rotateA*scale,rotateB*scale,rotateC*scale,rotateD*scale,offsetCanvasX-rotateA*scale*centerX-rotateC*scale*centerY,offsetCanvasY-rotateB*scale*centerX-rotateD*scale*centerY],this.width=width,this.height=height}clone({scale:scale=this.scale,rotation:rotation=this.rotation,offsetX:offsetX=this.offsetX,offsetY:offsetY=this.offsetY,dontFlip:dontFlip=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),scale:scale,rotation:rotation,offsetX:offsetX,offsetY:offsetY,dontFlip:dontFlip})}convertToViewportPoint(x,y){return _util.Util.applyTransform([x,y],this.transform)}convertToViewportRectangle(rect){const topLeft=_util.Util.applyTransform([rect[0],rect[1]],this.transform),bottomRight=_util.Util.applyTransform([rect[2],rect[3]],this.transform);return[topLeft[0],topLeft[1],bottomRight[0],bottomRight[1]]}convertToPdfPoint(x,y){return _util.Util.applyInverseTransform([x,y],this.transform)}}exports.PageViewport=PageViewport;class RenderingCancelledException extends _util.BaseException{constructor(msg,type){super(msg),this.type=type}}exports.RenderingCancelledException=RenderingCancelledException;const LinkTarget={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};exports.LinkTarget=LinkTarget;function isFetchSupported(){return"undefined"!=typeof fetch&&"undefined"!=typeof Response&&"body"in Response.prototype&&"undefined"!=typeof ReadableStream}function isValidFetchUrl(url,baseUrl){try{const{protocol:protocol}=baseUrl?new URL(url,baseUrl):new URL(url);return"http:"===protocol||"https:"===protocol}catch(ex){return!1}}let pdfDateStringRegex;exports.StatTimer=class StatTimer{constructor(){this.started=Object.create(null),this.times=[]}time(name){name in this.started&&(0,_util.warn)(`Timer is already running for ${name}`),this.started[name]=Date.now()}timeEnd(name){name in this.started||(0,_util.warn)(`Timer has not been started for ${name}`),this.times.push({name:name,start:this.started[name],end:Date.now()}),delete this.started[name]}toString(){const outBuf=[];let longest=0;for(const time of this.times){const name=time.name;name.length>longest&&(longest=name.length)}for(const time of this.times){const duration=time.end-time.start;outBuf.push(`${time.name.padEnd(longest)} ${duration}ms\n`)}return outBuf.join("")}};exports.PDFDateString=class PDFDateString{static toDateObject(input){if(!input||!(0,_util.isString)(input))return null;pdfDateStringRegex||(pdfDateStringRegex=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const matches=pdfDateStringRegex.exec(input);if(!matches)return null;const year=parseInt(matches[1],10);let month=parseInt(matches[2],10);month=month>=1&&month<=12?month-1:0;let day=parseInt(matches[3],10);day=day>=1&&day<=31?day:1;let hour=parseInt(matches[4],10);hour=hour>=0&&hour<=23?hour:0;let minute=parseInt(matches[5],10);minute=minute>=0&&minute<=59?minute:0;let second=parseInt(matches[6],10);second=second>=0&&second<=59?second:0;const universalTimeRelation=matches[7]||"Z";let offsetHour=parseInt(matches[8],10);offsetHour=offsetHour>=0&&offsetHour<=23?offsetHour:0;let offsetMinute=parseInt(matches[9],10)||0;return offsetMinute=offsetMinute>=0&&offsetMinute<=59?offsetMinute:0,"-"===universalTimeRelation?(hour+=offsetHour,minute+=offsetMinute):"+"===universalTimeRelation&&(hour-=offsetHour,minute-=offsetMinute),new Date(Date.UTC(year,month,day,hour,minute,second))}}},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FontLoader=exports.FontFaceObject=void 0;var _util=__w_pdfjs_require__(1);class BaseFontLoader{constructor({docId:docId,onUnsupportedFeature:onUnsupportedFeature}){this.constructor===BaseFontLoader&&(0,_util.unreachable)("Cannot initialize BaseFontLoader."),this.docId=docId,this._onUnsupportedFeature=onUnsupportedFeature,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(nativeFontFace){this.nativeFontFaces.push(nativeFontFace),document.fonts.add(nativeFontFace)}insertRule(rule){let styleElement=this.styleElement;styleElement||(styleElement=this.styleElement=document.createElement("style"),styleElement.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,document.documentElement.getElementsByTagName("head")[0].appendChild(styleElement));const styleSheet=styleElement.sheet;styleSheet.insertRule(rule,styleSheet.cssRules.length)}clear(){this.nativeFontFaces.forEach((function(nativeFontFace){document.fonts.delete(nativeFontFace)})),this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(font){if(font.attached||font.missingFile)return;if(font.attached=!0,this.isFontLoadingAPISupported){const nativeFontFace=font.createNativeFontFace();if(nativeFontFace){this.addNativeFontFace(nativeFontFace);try{await nativeFontFace.loaded}catch(ex){throw this._onUnsupportedFeature({featureId:_util.UNSUPPORTED_FEATURES.font}),(0,_util.warn)(`Failed to load font '${nativeFontFace.family}': '${ex}'.`),font.disableFontFace=!0,ex}}return}const rule=font.createFontFaceRule();if(rule){if(this.insertRule(rule),this.isSyncFontLoadingSupported)return;await new Promise((resolve=>{const request=this._queueLoadingCallback(resolve);this._prepareFontLoadEvent([rule],[font],request)}))}}_queueLoadingCallback(callback){(0,_util.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){const supported="undefined"!=typeof document&&!!document.fonts;return(0,_util.shadow)(this,"isFontLoadingAPISupported",supported)}get isSyncFontLoadingSupported(){(0,_util.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,_util.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(rules,fontsToLoad,request){(0,_util.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let FontLoader;exports.FontLoader=FontLoader,exports.FontLoader=FontLoader=class GenericFontLoader extends BaseFontLoader{constructor(docId){super(docId),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let supported=!1;if("undefined"==typeof navigator)supported=!0;else{const m=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);m&&m[1]>=14&&(supported=!0)}return(0,_util.shadow)(this,"isSyncFontLoadingSupported",supported)}_queueLoadingCallback(callback){const context=this.loadingContext,request={id:"pdfjs-font-loading-"+context.nextRequestId++,done:!1,complete:function completeRequest(){for((0,_util.assert)(!request.done,"completeRequest() cannot be called twice."),request.done=!0;context.requests.length>0&&context.requests[0].done;){const otherRequest=context.requests.shift();setTimeout(otherRequest.callback,0)}},callback:callback};return context.requests.push(request),request}get _loadTestFont(){return(0,_util.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(rules,fonts,request){function int32(data,offset){return data.charCodeAt(offset)<<24|data.charCodeAt(offset+1)<<16|data.charCodeAt(offset+2)<<8|255&data.charCodeAt(offset+3)}function spliceString(s,offset,remove,insert){return s.substring(0,offset)+insert+s.substring(offset+remove)}let i,ii;const canvas=document.createElement("canvas");canvas.width=1,canvas.height=1;const ctx=canvas.getContext("2d");let called=0;const loadTestFontId=`lt${Date.now()}${this.loadTestFontId++}`;let data=this._loadTestFont;data=spliceString(data,976,loadTestFontId.length,loadTestFontId);let checksum=int32(data,16);for(i=0,ii=loadTestFontId.length-3;i<ii;i+=4)checksum=checksum-1482184792+int32(loadTestFontId,i)|0;i<loadTestFontId.length&&(checksum=checksum-1482184792+int32(loadTestFontId+"XXX",i)|0),data=spliceString(data,16,4,(0,_util.string32)(checksum));const rule=`@font-face {font-family:"${loadTestFontId}";src:${`url(data:font/opentype;base64,${btoa(data)});`}}`;this.insertRule(rule);const names=[];for(i=0,ii=fonts.length;i<ii;i++)names.push(fonts[i].loadedName);names.push(loadTestFontId);const div=document.createElement("div");for(div.style.visibility="hidden",div.style.width=div.style.height="10px",div.style.position="absolute",div.style.top=div.style.left="0px",i=0,ii=names.length;i<ii;++i){const span=document.createElement("span");span.textContent="Hi",span.style.fontFamily=names[i],div.appendChild(span)}document.body.appendChild(div),function isFontReady(name,callback){if(called++,called>30)return(0,_util.warn)("Load test font never loaded."),void callback();ctx.font="30px "+name,ctx.fillText(".",0,20),ctx.getImageData(0,0,1,1).data[3]>0?callback():setTimeout(isFontReady.bind(null,name,callback))}(loadTestFontId,(function(){document.body.removeChild(div),request.complete()}))}};exports.FontFaceObject=class FontFaceObject{constructor(translatedData,{isEvalSupported:isEvalSupported=!0,disableFontFace:disableFontFace=!1,ignoreErrors:ignoreErrors=!1,onUnsupportedFeature:onUnsupportedFeature=null,fontRegistry:fontRegistry=null}){this.compiledGlyphs=Object.create(null);for(const i in translatedData)this[i]=translatedData[i];this.isEvalSupported=!1!==isEvalSupported,this.disableFontFace=!0===disableFontFace,this.ignoreErrors=!0===ignoreErrors,this._onUnsupportedFeature=onUnsupportedFeature,this.fontRegistry=fontRegistry}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;const nativeFontFace=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),nativeFontFace}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const data=(0,_util.bytesToString)(new Uint8Array(this.data)),url=`url(data:${this.mimetype};base64,${btoa(data)});`,rule=`@font-face {font-family:"${this.loadedName}";src:${url}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,url),rule}getPathGenerator(objs,character){if(void 0!==this.compiledGlyphs[character])return this.compiledGlyphs[character];let cmds,current;try{cmds=objs.get(this.loadedName+"_path_"+character)}catch(ex){if(!this.ignoreErrors)throw ex;return this._onUnsupportedFeature&&this._onUnsupportedFeature({featureId:_util.UNSUPPORTED_FEATURES.font}),(0,_util.warn)(`getPathGenerator - ignoring character: "${ex}".`),this.compiledGlyphs[character]=function(c,size){}}if(this.isEvalSupported&&_util.IsEvalSupportedCached.value){let args,js="";for(let i=0,ii=cmds.length;i<ii;i++)current=cmds[i],args=void 0!==current.args?current.args.join(","):"",js+="c."+current.cmd+"("+args+");\n";return this.compiledGlyphs[character]=new Function("c","size",js)}return this.compiledGlyphs[character]=function(c,size){for(let i=0,ii=cmds.length;i<ii;i++)current=cmds[i],"scale"===current.cmd&&(current.args=[size,-size]),c[current.cmd].apply(c,current.args)}}}},function(module,exports,__w_pdfjs_require__){"use strict";const compatibilityParams=Object.create(null);{const{isNodeJS:isNodeJS}=__w_pdfjs_require__(7),userAgent="undefined"!=typeof navigator&&navigator.userAgent||"",isIE=/Trident/.test(userAgent),isIOSChrome=/CriOS/.test(userAgent);!function checkOnBlobSupport(){(isIE||isIOSChrome)&&(compatibilityParams.disableCreateObjectURL=!0)}(),function checkFontFaceAndImage(){isNodeJS&&(compatibilityParams.disableFontFace=!0,compatibilityParams.nativeImageDecoderSupport="none")}()}exports.apiCompatibilityParams=Object.freeze(compatibilityParams)},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNodeJS=void 0;const isNodeJS="object"==typeof process&&process+""=="[object process]"&&!process.versions.nw&&!process.versions.electron;exports.isNodeJS=isNodeJS},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CanvasGraphics=void 0;var _util=__w_pdfjs_require__(1),_pattern_helper=__w_pdfjs_require__(9);function addContextCurrentTransform(ctx){ctx.mozCurrentTransform||(ctx._originalSave=ctx.save,ctx._originalRestore=ctx.restore,ctx._originalRotate=ctx.rotate,ctx._originalScale=ctx.scale,ctx._originalTranslate=ctx.translate,ctx._originalTransform=ctx.transform,ctx._originalSetTransform=ctx.setTransform,ctx._transformMatrix=ctx._transformMatrix||[1,0,0,1,0,0],ctx._transformStack=[],Object.defineProperty(ctx,"mozCurrentTransform",{get:function getCurrentTransform(){return this._transformMatrix}}),Object.defineProperty(ctx,"mozCurrentTransformInverse",{get:function getCurrentTransformInverse(){var m=this._transformMatrix,a=m[0],b=m[1],c=m[2],d=m[3],e=m[4],f=m[5],ad_bc=a*d-b*c,bc_ad=b*c-a*d;return[d/ad_bc,b/bc_ad,c/bc_ad,a/ad_bc,(d*e-c*f)/bc_ad,(b*e-a*f)/ad_bc]}}),ctx.save=function ctxSave(){var old=this._transformMatrix;this._transformStack.push(old),this._transformMatrix=old.slice(0,6),this._originalSave()},ctx.restore=function ctxRestore(){var prev=this._transformStack.pop();prev&&(this._transformMatrix=prev,this._originalRestore())},ctx.translate=function ctxTranslate(x,y){var m=this._transformMatrix;m[4]=m[0]*x+m[2]*y+m[4],m[5]=m[1]*x+m[3]*y+m[5],this._originalTranslate(x,y)},ctx.scale=function ctxScale(x,y){var m=this._transformMatrix;m[0]=m[0]*x,m[1]=m[1]*x,m[2]=m[2]*y,m[3]=m[3]*y,this._originalScale(x,y)},ctx.transform=function ctxTransform(a,b,c,d,e,f){var m=this._transformMatrix;this._transformMatrix=[m[0]*a+m[2]*b,m[1]*a+m[3]*b,m[0]*c+m[2]*d,m[1]*c+m[3]*d,m[0]*e+m[2]*f+m[4],m[1]*e+m[3]*f+m[5]],ctx._originalTransform(a,b,c,d,e,f)},ctx.setTransform=function ctxSetTransform(a,b,c,d,e,f){this._transformMatrix=[a,b,c,d,e,f],ctx._originalSetTransform(a,b,c,d,e,f)},ctx.rotate=function ctxRotate(angle){var cosValue=Math.cos(angle),sinValue=Math.sin(angle),m=this._transformMatrix;this._transformMatrix=[m[0]*cosValue+m[2]*sinValue,m[1]*cosValue+m[3]*sinValue,m[0]*-sinValue+m[2]*cosValue,m[1]*-sinValue+m[3]*cosValue,m[4],m[5]],this._originalRotate(angle)})}var CachedCanvases=function CachedCanvasesClosure(){function CachedCanvases(canvasFactory){this.canvasFactory=canvasFactory,this.cache=Object.create(null)}return CachedCanvases.prototype={getCanvas:function CachedCanvases_getCanvas(id,width,height,trackTransform){var canvasEntry;return void 0!==this.cache[id]?(canvasEntry=this.cache[id],this.canvasFactory.reset(canvasEntry,width,height),canvasEntry.context.setTransform(1,0,0,1,0,0)):(canvasEntry=this.canvasFactory.create(width,height),this.cache[id]=canvasEntry),trackTransform&&addContextCurrentTransform(canvasEntry.context),canvasEntry},clear(){for(var id in this.cache){var canvasEntry=this.cache[id];this.canvasFactory.destroy(canvasEntry),delete this.cache[id]}}},CachedCanvases}();var CanvasExtraState=function CanvasExtraStateClosure(){function CanvasExtraState(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=_util.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=_util.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=_util.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null}return CanvasExtraState.prototype={clone:function CanvasExtraState_clone(){return Object.create(this)},setCurrentPoint:function CanvasExtraState_setCurrentPoint(x,y){this.x=x,this.y=y}},CanvasExtraState}(),CanvasGraphics=function CanvasGraphicsClosure(){function CanvasGraphics(canvasCtx,commonObjs,objs,canvasFactory,webGLContext,imageLayer){this.ctx=canvasCtx,this.current=new CanvasExtraState,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=commonObjs,this.objs=objs,this.canvasFactory=canvasFactory,this.webGLContext=webGLContext,this.imageLayer=imageLayer,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.cachedCanvases=new CachedCanvases(this.canvasFactory),canvasCtx&&addContextCurrentTransform(canvasCtx),this._cachedGetSinglePixelWidth=null}function putBinaryImageData(ctx,imgData){if("undefined"!=typeof ImageData&&imgData instanceof ImageData)ctx.putImageData(imgData,0,0);else{var destPos,i,j,thisChunkHeight,elemsInThisChunk,height=imgData.height,width=imgData.width,partialChunkHeight=height%16,fullChunks=(height-partialChunkHeight)/16,totalChunks=0===partialChunkHeight?fullChunks:fullChunks+1,chunkImgData=ctx.createImageData(width,16),srcPos=0,src=imgData.data,dest=chunkImgData.data;if(imgData.kind===_util.ImageKind.GRAYSCALE_1BPP){var srcLength=src.byteLength,dest32=new Uint32Array(dest.buffer,0,dest.byteLength>>2),dest32DataLength=dest32.length,fullSrcDiff=width+7>>3,white=4294967295,black=_util.IsLittleEndianCached.value?4278190080:255;for(i=0;i<totalChunks;i++){for(thisChunkHeight=i<fullChunks?16:partialChunkHeight,destPos=0,j=0;j<thisChunkHeight;j++){for(var srcDiff=srcLength-srcPos,k=0,kEnd=srcDiff>fullSrcDiff?width:8*srcDiff-7,kEndUnrolled=-8&kEnd,mask=0,srcByte=0;k<kEndUnrolled;k+=8)srcByte=src[srcPos++],dest32[destPos++]=128&srcByte?white:black,dest32[destPos++]=64&srcByte?white:black,dest32[destPos++]=32&srcByte?white:black,dest32[destPos++]=16&srcByte?white:black,dest32[destPos++]=8&srcByte?white:black,dest32[destPos++]=4&srcByte?white:black,dest32[destPos++]=2&srcByte?white:black,dest32[destPos++]=1&srcByte?white:black;for(;k<kEnd;k++)0===mask&&(srcByte=src[srcPos++],mask=128),dest32[destPos++]=srcByte&mask?white:black,mask>>=1}for(;destPos<dest32DataLength;)dest32[destPos++]=0;ctx.putImageData(chunkImgData,0,16*i)}}else if(imgData.kind===_util.ImageKind.RGBA_32BPP){for(j=0,elemsInThisChunk=16*width*4,i=0;i<fullChunks;i++)dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk)),srcPos+=elemsInThisChunk,ctx.putImageData(chunkImgData,0,j),j+=16;i<totalChunks&&(elemsInThisChunk=width*partialChunkHeight*4,dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk)),ctx.putImageData(chunkImgData,0,j))}else{if(imgData.kind!==_util.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${imgData.kind}`);for(elemsInThisChunk=width*(thisChunkHeight=16),i=0;i<totalChunks;i++){for(i>=fullChunks&&(elemsInThisChunk=width*(thisChunkHeight=partialChunkHeight)),destPos=0,j=elemsInThisChunk;j--;)dest[destPos++]=src[srcPos++],dest[destPos++]=src[srcPos++],dest[destPos++]=src[srcPos++],dest[destPos++]=255;ctx.putImageData(chunkImgData,0,16*i)}}}}function putBinaryImageMask(ctx,imgData){for(var height=imgData.height,width=imgData.width,partialChunkHeight=height%16,fullChunks=(height-partialChunkHeight)/16,totalChunks=0===partialChunkHeight?fullChunks:fullChunks+1,chunkImgData=ctx.createImageData(width,16),srcPos=0,src=imgData.data,dest=chunkImgData.data,i=0;i<totalChunks;i++){for(var thisChunkHeight=i<fullChunks?16:partialChunkHeight,destPos=3,j=0;j<thisChunkHeight;j++)for(var mask=0,k=0;k<width;k++){if(!mask){var elem=src[srcPos++];mask=128}dest[destPos]=elem&mask?0:255,destPos+=4,mask>>=1}ctx.putImageData(chunkImgData,0,16*i)}}function copyCtxState(sourceCtx,destCtx){for(var properties=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],i=0,ii=properties.length;i<ii;i++){var property=properties[i];void 0!==sourceCtx[property]&&(destCtx[property]=sourceCtx[property])}void 0!==sourceCtx.setLineDash&&(destCtx.setLineDash(sourceCtx.getLineDash()),destCtx.lineDashOffset=sourceCtx.lineDashOffset)}function resetCtxToDefault(ctx){ctx.strokeStyle="#000000",ctx.fillStyle="#000000",ctx.fillRule="nonzero",ctx.globalAlpha=1,ctx.lineWidth=1,ctx.lineCap="butt",ctx.lineJoin="miter",ctx.miterLimit=10,ctx.globalCompositeOperation="source-over",ctx.font="10px sans-serif",void 0!==ctx.setLineDash&&(ctx.setLineDash([]),ctx.lineDashOffset=0)}function composeSMaskBackdrop(bytes,r0,g0,b0){for(var length=bytes.length,i=3;i<length;i+=4){var alpha=bytes[i];if(0===alpha)bytes[i-3]=r0,bytes[i-2]=g0,bytes[i-1]=b0;else if(alpha<255){var alpha_=255-alpha;bytes[i-3]=bytes[i-3]*alpha+r0*alpha_>>8,bytes[i-2]=bytes[i-2]*alpha+g0*alpha_>>8,bytes[i-1]=bytes[i-1]*alpha+b0*alpha_>>8}}}function composeSMaskAlpha(maskData,layerData,transferMap){for(var length=maskData.length,i=3;i<length;i+=4){var alpha=transferMap?transferMap[maskData[i]]:maskData[i];layerData[i]=layerData[i]*alpha*.00392156862745098|0}}function composeSMaskLuminosity(maskData,layerData,transferMap){for(var length=maskData.length,i=3;i<length;i+=4){var y=77*maskData[i-3]+152*maskData[i-2]+28*maskData[i-1];layerData[i]=transferMap?layerData[i]*transferMap[y>>8]>>8:layerData[i]*y>>16}}function composeSMask(ctx,smask,layerCtx,webGLContext){var mask=smask.canvas,maskCtx=smask.context;ctx.setTransform(smask.scaleX,0,0,smask.scaleY,smask.offsetX,smask.offsetY);var backdrop=smask.backdrop||null;if(!smask.transferMap&&webGLContext.isEnabled){const composed=webGLContext.composeSMask({layer:layerCtx.canvas,mask:mask,properties:{subtype:smask.subtype,backdrop:backdrop}});return ctx.setTransform(1,0,0,1,0,0),void ctx.drawImage(composed,smask.offsetX,smask.offsetY)}!function genericComposeSMask(maskCtx,layerCtx,width,height,subtype,backdrop,transferMap){var composeFn,hasBackdrop=!!backdrop,r0=hasBackdrop?backdrop[0]:0,g0=hasBackdrop?backdrop[1]:0,b0=hasBackdrop?backdrop[2]:0;composeFn="Luminosity"===subtype?composeSMaskLuminosity:composeSMaskAlpha;for(var chunkSize=Math.min(height,Math.ceil(1048576/width)),row=0;row<height;row+=chunkSize){var chunkHeight=Math.min(chunkSize,height-row),maskData=maskCtx.getImageData(0,row,width,chunkHeight),layerData=layerCtx.getImageData(0,row,width,chunkHeight);hasBackdrop&&composeSMaskBackdrop(maskData.data,r0,g0,b0),composeFn(maskData.data,layerData.data,transferMap),maskCtx.putImageData(layerData,0,row)}}(maskCtx,layerCtx,mask.width,mask.height,smask.subtype,backdrop,smask.transferMap),ctx.drawImage(mask,0,0)}var LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};for(var op in CanvasGraphics.prototype={beginDrawing({transform:transform,viewport:viewport,transparency:transparency=!1,background:background=null}){var width=this.ctx.canvas.width,height=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=background||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,width,height),this.ctx.restore(),transparency){var transparentCanvas=this.cachedCanvases.getCanvas("transparent",width,height,!0);this.compositeCtx=this.ctx,this.transparentCanvas=transparentCanvas.canvas,this.ctx=transparentCanvas.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),resetCtxToDefault(this.ctx),transform&&this.ctx.transform.apply(this.ctx,transform),this.ctx.transform.apply(this.ctx,viewport.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function CanvasGraphics_executeOperatorList(operatorList,executionStartIdx,continueCallback,stepper){var argsArray=operatorList.argsArray,fnArray=operatorList.fnArray,i=executionStartIdx||0,argsArrayLen=argsArray.length;if(argsArrayLen===i)return i;for(var fnId,chunkOperations=argsArrayLen-i>10&&"function"==typeof continueCallback,endTime=chunkOperations?Date.now()+15:0,steps=0,commonObjs=this.commonObjs,objs=this.objs;;){if(void 0!==stepper&&i===stepper.nextBreakPoint)return stepper.breakIt(i,continueCallback),i;if((fnId=fnArray[i])!==_util.OPS.dependency)this[fnId].apply(this,argsArray[i]);else for(const depObjId of argsArray[i]){const objsPool=depObjId.startsWith("g_")?commonObjs:objs;if(!objsPool.has(depObjId))return objsPool.get(depObjId,continueCallback),i}if(++i===argsArrayLen)return i;if(chunkOperations&&++steps>10){if(Date.now()>endTime)return continueCallback(),i;steps=0}}},endDrawing:function CanvasGraphics_endDrawing(){null!==this.current.activeSMask&&this.endSMaskGroup(),this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.webGLContext.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function CanvasGraphics_setLineWidth(width){this.current.lineWidth=width,this.ctx.lineWidth=width},setLineCap:function CanvasGraphics_setLineCap(style){this.ctx.lineCap=LINE_CAP_STYLES[style]},setLineJoin:function CanvasGraphics_setLineJoin(style){this.ctx.lineJoin=LINE_JOIN_STYLES[style]},setMiterLimit:function CanvasGraphics_setMiterLimit(limit){this.ctx.miterLimit=limit},setDash:function CanvasGraphics_setDash(dashArray,dashPhase){var ctx=this.ctx;void 0!==ctx.setLineDash&&(ctx.setLineDash(dashArray),ctx.lineDashOffset=dashPhase)},setRenderingIntent(intent){},setFlatness(flatness){},setGState:function CanvasGraphics_setGState(states){for(var i=0,ii=states.length;i<ii;i++){var state=states[i],key=state[0],value=state[1];switch(key){case"LW":this.setLineWidth(value);break;case"LC":this.setLineCap(value);break;case"LJ":this.setLineJoin(value);break;case"ML":this.setMiterLimit(value);break;case"D":this.setDash(value[0],value[1]);break;case"RI":this.setRenderingIntent(value);break;case"FL":this.setFlatness(value);break;case"Font":this.setFont(value[0],value[1]);break;case"CA":this.current.strokeAlpha=state[1];break;case"ca":this.current.fillAlpha=state[1],this.ctx.globalAlpha=state[1];break;case"BM":this.ctx.globalCompositeOperation=value;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=value?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null}}},beginSMaskGroup:function CanvasGraphics_beginSMaskGroup(){var activeSMask=this.current.activeSMask,drawnWidth=activeSMask.canvas.width,drawnHeight=activeSMask.canvas.height,cacheId="smaskGroupAt"+this.groupLevel,scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight,!0),currentCtx=this.ctx,currentTransform=currentCtx.mozCurrentTransform;this.ctx.save();var groupCtx=scratchCanvas.context;groupCtx.scale(1/activeSMask.scaleX,1/activeSMask.scaleY),groupCtx.translate(-activeSMask.offsetX,-activeSMask.offsetY),groupCtx.transform.apply(groupCtx,currentTransform),activeSMask.startTransformInverse=groupCtx.mozCurrentTransformInverse,copyCtxState(currentCtx,groupCtx),this.ctx=groupCtx,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(currentCtx),this.groupLevel++},suspendSMaskGroup:function CanvasGraphics_endSMaskGroup(){var groupCtx=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),composeSMask(this.ctx,this.current.activeSMask,groupCtx,this.webGLContext),this.ctx.restore(),this.ctx.save(),copyCtxState(groupCtx,this.ctx),this.current.resumeSMaskCtx=groupCtx;var deltaTransform=_util.Util.transform(this.current.activeSMask.startTransformInverse,groupCtx.mozCurrentTransform);this.ctx.transform.apply(this.ctx,deltaTransform),groupCtx.save(),groupCtx.setTransform(1,0,0,1,0,0),groupCtx.clearRect(0,0,groupCtx.canvas.width,groupCtx.canvas.height),groupCtx.restore()},resumeSMaskGroup:function CanvasGraphics_endSMaskGroup(){var groupCtx=this.current.resumeSMaskCtx,currentCtx=this.ctx;this.ctx=groupCtx,this.groupStack.push(currentCtx),this.groupLevel++},endSMaskGroup:function CanvasGraphics_endSMaskGroup(){var groupCtx=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),composeSMask(this.ctx,this.current.activeSMask,groupCtx,this.webGLContext),this.ctx.restore(),copyCtxState(groupCtx,this.ctx);var deltaTransform=_util.Util.transform(this.current.activeSMask.startTransformInverse,groupCtx.mozCurrentTransform);this.ctx.transform.apply(this.ctx,deltaTransform)},save:function CanvasGraphics_save(){this.ctx.save();var old=this.current;this.stateStack.push(old),this.current=old.clone(),this.current.resumeSMaskCtx=null},restore:function CanvasGraphics_restore(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),null===this.current.activeSMask||0!==this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask||this.endSMaskGroup(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)},transform:function CanvasGraphics_transform(a,b,c,d,e,f){this.ctx.transform(a,b,c,d,e,f),this._cachedGetSinglePixelWidth=null},constructPath:function CanvasGraphics_constructPath(ops,args){for(var ctx=this.ctx,current=this.current,x=current.x,y=current.y,i=0,j=0,ii=ops.length;i<ii;i++)switch(0|ops[i]){case _util.OPS.rectangle:x=args[j++],y=args[j++];var width=args[j++],height=args[j++];0===width&&(width=this.getSinglePixelWidth()),0===height&&(height=this.getSinglePixelWidth());var xw=x+width,yh=y+height;this.ctx.moveTo(x,y),this.ctx.lineTo(xw,y),this.ctx.lineTo(xw,yh),this.ctx.lineTo(x,yh),this.ctx.lineTo(x,y),this.ctx.closePath();break;case _util.OPS.moveTo:x=args[j++],y=args[j++],ctx.moveTo(x,y);break;case _util.OPS.lineTo:x=args[j++],y=args[j++],ctx.lineTo(x,y);break;case _util.OPS.curveTo:x=args[j+4],y=args[j+5],ctx.bezierCurveTo(args[j],args[j+1],args[j+2],args[j+3],x,y),j+=6;break;case _util.OPS.curveTo2:ctx.bezierCurveTo(x,y,args[j],args[j+1],args[j+2],args[j+3]),x=args[j+2],y=args[j+3],j+=4;break;case _util.OPS.curveTo3:x=args[j+2],y=args[j+3],ctx.bezierCurveTo(args[j],args[j+1],x,y,x,y),j+=4;break;case _util.OPS.closePath:ctx.closePath()}current.setCurrentPoint(x,y)},closePath:function CanvasGraphics_closePath(){this.ctx.closePath()},stroke:function CanvasGraphics_stroke(consumePath){consumePath=void 0===consumePath||consumePath;var ctx=this.ctx,strokeColor=this.current.strokeColor;if(ctx.globalAlpha=this.current.strokeAlpha,strokeColor&&strokeColor.hasOwnProperty("type")&&"Pattern"===strokeColor.type){ctx.save();const transform=ctx.mozCurrentTransform,scale=_util.Util.singularValueDecompose2dScale(transform)[0];ctx.strokeStyle=strokeColor.getPattern(ctx,this),ctx.lineWidth=Math.max(.65*this.getSinglePixelWidth(),this.current.lineWidth*scale),ctx.stroke(),ctx.restore()}else ctx.lineWidth=Math.max(.65*this.getSinglePixelWidth(),this.current.lineWidth),ctx.stroke();consumePath&&this.consumePath(),ctx.globalAlpha=this.current.fillAlpha},closeStroke:function CanvasGraphics_closeStroke(){this.closePath(),this.stroke()},fill:function CanvasGraphics_fill(consumePath){consumePath=void 0===consumePath||consumePath;var ctx=this.ctx,fillColor=this.current.fillColor,needRestore=!1;this.current.patternFill&&(ctx.save(),this.baseTransform&&ctx.setTransform.apply(ctx,this.baseTransform),ctx.fillStyle=fillColor.getPattern(ctx,this),needRestore=!0),this.pendingEOFill?(ctx.fill("evenodd"),this.pendingEOFill=!1):ctx.fill(),needRestore&&ctx.restore(),consumePath&&this.consumePath()},eoFill:function CanvasGraphics_eoFill(){this.pendingEOFill=!0,this.fill()},fillStroke:function CanvasGraphics_fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function CanvasGraphics_eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function CanvasGraphics_closeFillStroke(){this.closePath(),this.fillStroke()},closeEOFillStroke:function CanvasGraphics_closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function CanvasGraphics_endPath(){this.consumePath()},clip:function CanvasGraphics_clip(){this.pendingClip=NORMAL_CLIP},eoClip:function CanvasGraphics_eoClip(){this.pendingClip=EO_CLIP},beginText:function CanvasGraphics_beginText(){this.current.textMatrix=_util.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function CanvasGraphics_endText(){var paths=this.pendingTextPaths,ctx=this.ctx;if(void 0!==paths){ctx.save(),ctx.beginPath();for(var i=0;i<paths.length;i++){var path=paths[i];ctx.setTransform.apply(ctx,path.transform),ctx.translate(path.x,path.y),path.addToPath(ctx,path.fontSize)}ctx.restore(),ctx.clip(),ctx.beginPath(),delete this.pendingTextPaths}else ctx.beginPath()},setCharSpacing:function CanvasGraphics_setCharSpacing(spacing){this.current.charSpacing=spacing},setWordSpacing:function CanvasGraphics_setWordSpacing(spacing){this.current.wordSpacing=spacing},setHScale:function CanvasGraphics_setHScale(scale){this.current.textHScale=scale/100},setLeading:function CanvasGraphics_setLeading(leading){this.current.leading=-leading},setFont:function CanvasGraphics_setFont(fontRefName,size){var fontObj=this.commonObjs.get(fontRefName),current=this.current;if(!fontObj)throw new Error(`Can't find font for ${fontRefName}`);if(current.fontMatrix=fontObj.fontMatrix?fontObj.fontMatrix:_util.FONT_IDENTITY_MATRIX,0!==current.fontMatrix[0]&&0!==current.fontMatrix[3]||(0,_util.warn)("Invalid font matrix for font "+fontRefName),size<0?(size=-size,current.fontDirection=-1):current.fontDirection=1,this.current.font=fontObj,this.current.fontSize=size,fontObj.isType3Font)return;var name=fontObj.loadedName||"sans-serif";let bold="normal";fontObj.black?bold="900":fontObj.bold&&(bold="bold");var italic=fontObj.italic?"italic":"normal",typeface=`"${name}", ${fontObj.fallbackName}`;let browserFontSize=size;size<16?browserFontSize=16:size>100&&(browserFontSize=100),this.current.fontSizeScale=size/browserFontSize,this.ctx.font=`${italic} ${bold} ${browserFontSize}px ${typeface}`},setTextRenderingMode:function CanvasGraphics_setTextRenderingMode(mode){this.current.textRenderingMode=mode},setTextRise:function CanvasGraphics_setTextRise(rise){this.current.textRise=rise},moveText:function CanvasGraphics_moveText(x,y){this.current.x=this.current.lineX+=x,this.current.y=this.current.lineY+=y},setLeadingMoveText:function CanvasGraphics_setLeadingMoveText(x,y){this.setLeading(-y),this.moveText(x,y)},setTextMatrix:function CanvasGraphics_setTextMatrix(a,b,c,d,e,f){this.current.textMatrix=[a,b,c,d,e,f],this.current.textMatrixScale=Math.sqrt(a*a+b*b),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function CanvasGraphics_nextLine(){this.moveText(0,this.current.leading)},paintChar(character,x,y,patternTransform){var ctx=this.ctx,current=this.current,font=current.font,textRenderingMode=current.textRenderingMode,fontSize=current.fontSize/current.fontSizeScale,fillStrokeMode=textRenderingMode&_util.TextRenderingMode.FILL_STROKE_MASK,isAddToPathSet=!!(textRenderingMode&_util.TextRenderingMode.ADD_TO_PATH_FLAG);const patternFill=current.patternFill&&font.data;var addToPath;((font.disableFontFace||isAddToPathSet||patternFill)&&(addToPath=font.getPathGenerator(this.commonObjs,character)),font.disableFontFace||patternFill?(ctx.save(),ctx.translate(x,y),ctx.beginPath(),addToPath(ctx,fontSize),patternTransform&&ctx.setTransform.apply(ctx,patternTransform),fillStrokeMode!==_util.TextRenderingMode.FILL&&fillStrokeMode!==_util.TextRenderingMode.FILL_STROKE||ctx.fill(),fillStrokeMode!==_util.TextRenderingMode.STROKE&&fillStrokeMode!==_util.TextRenderingMode.FILL_STROKE||ctx.stroke(),ctx.restore()):(fillStrokeMode!==_util.TextRenderingMode.FILL&&fillStrokeMode!==_util.TextRenderingMode.FILL_STROKE||ctx.fillText(character,x,y),fillStrokeMode!==_util.TextRenderingMode.STROKE&&fillStrokeMode!==_util.TextRenderingMode.FILL_STROKE||ctx.strokeText(character,x,y)),isAddToPathSet)&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ctx.mozCurrentTransform,x:x,y:y,fontSize:fontSize,addToPath:addToPath})},get isFontSubpixelAAEnabled(){const{context:ctx}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);ctx.scale(1.5,1),ctx.fillText("I",0,10);for(var data=ctx.getImageData(0,0,10,10).data,enabled=!1,i=3;i<data.length;i+=4)if(data[i]>0&&data[i]<255){enabled=!0;break}return(0,_util.shadow)(this,"isFontSubpixelAAEnabled",enabled)},showText:function CanvasGraphics_showText(glyphs){var current=this.current,font=current.font;if(font.isType3Font)return this.showType3Text(glyphs);var fontSize=current.fontSize;if(0===fontSize)return;var ctx=this.ctx,fontSizeScale=current.fontSizeScale,charSpacing=current.charSpacing,wordSpacing=current.wordSpacing,fontDirection=current.fontDirection,textHScale=current.textHScale*fontDirection,glyphsLength=glyphs.length,vertical=font.vertical,spacingDir=vertical?1:-1,defaultVMetrics=font.defaultVMetrics,widthAdvanceScale=fontSize*current.fontMatrix[0],simpleFillText=current.textRenderingMode===_util.TextRenderingMode.FILL&&!font.disableFontFace&&!current.patternFill;let patternTransform;if(ctx.save(),current.patternFill){ctx.save();const pattern=current.fillColor.getPattern(ctx,this);patternTransform=ctx.mozCurrentTransform,ctx.restore(),ctx.fillStyle=pattern}ctx.transform.apply(ctx,current.textMatrix),ctx.translate(current.x,current.y+current.textRise),fontDirection>0?ctx.scale(textHScale,-1):ctx.scale(textHScale,1);var lineWidth=current.lineWidth,scale=current.textMatrixScale;if(0===scale||0===lineWidth){var fillStrokeMode=current.textRenderingMode&_util.TextRenderingMode.FILL_STROKE_MASK;fillStrokeMode!==_util.TextRenderingMode.STROKE&&fillStrokeMode!==_util.TextRenderingMode.FILL_STROKE||(this._cachedGetSinglePixelWidth=null,lineWidth=.65*this.getSinglePixelWidth())}else lineWidth/=scale;1!==fontSizeScale&&(ctx.scale(fontSizeScale,fontSizeScale),lineWidth/=fontSizeScale),ctx.lineWidth=lineWidth;var i,x=0;for(i=0;i<glyphsLength;++i){var glyph=glyphs[i];if((0,_util.isNum)(glyph))x+=spacingDir*glyph*fontSize/1e3;else{var scaledX,scaledY,scaledAccentX,scaledAccentY,vmetric,vx,vy,restoreNeeded=!1,spacing=(glyph.isSpace?wordSpacing:0)+charSpacing,character=glyph.fontChar,accent=glyph.accent,width=glyph.width;if(vertical)vmetric=glyph.vmetric||defaultVMetrics,vx=-(vx=glyph.vmetric?vmetric[1]:.5*width)*widthAdvanceScale,vy=vmetric[2]*widthAdvanceScale,width=vmetric?-vmetric[0]:width,scaledX=vx/fontSizeScale,scaledY=(x+vy)/fontSizeScale;else scaledX=x/fontSizeScale,scaledY=0;if(font.remeasure&&width>0){var measuredWidth=1e3*ctx.measureText(character).width/fontSize*fontSizeScale;if(width<measuredWidth&&this.isFontSubpixelAAEnabled){var characterScaleX=width/measuredWidth;restoreNeeded=!0,ctx.save(),ctx.scale(characterScaleX,1),scaledX/=characterScaleX}else width!==measuredWidth&&(scaledX+=(width-measuredWidth)/2e3*fontSize/fontSizeScale)}(glyph.isInFont||font.missingFile)&&(simpleFillText&&!accent?ctx.fillText(character,scaledX,scaledY):(this.paintChar(character,scaledX,scaledY,patternTransform),accent&&(scaledAccentX=scaledX+accent.offset.x/fontSizeScale,scaledAccentY=scaledY-accent.offset.y/fontSizeScale,this.paintChar(accent.fontChar,scaledAccentX,scaledAccentY,patternTransform)))),x+=vertical?width*widthAdvanceScale-spacing*fontDirection:width*widthAdvanceScale+spacing*fontDirection,restoreNeeded&&ctx.restore()}}vertical?current.y-=x:current.x+=x*textHScale,ctx.restore()},showType3Text:function CanvasGraphics_showType3Text(glyphs){var i,glyph,width,spacingLength,ctx=this.ctx,current=this.current,font=current.font,fontSize=current.fontSize,fontDirection=current.fontDirection,spacingDir=font.vertical?1:-1,charSpacing=current.charSpacing,wordSpacing=current.wordSpacing,textHScale=current.textHScale*fontDirection,fontMatrix=current.fontMatrix||_util.FONT_IDENTITY_MATRIX,glyphsLength=glyphs.length;if(!(current.textRenderingMode===_util.TextRenderingMode.INVISIBLE)&&0!==fontSize){for(this._cachedGetSinglePixelWidth=null,ctx.save(),ctx.transform.apply(ctx,current.textMatrix),ctx.translate(current.x,current.y),ctx.scale(textHScale,fontDirection),i=0;i<glyphsLength;++i)if(glyph=glyphs[i],(0,_util.isNum)(glyph))spacingLength=spacingDir*glyph*fontSize/1e3,this.ctx.translate(spacingLength,0),current.x+=spacingLength*textHScale;else{var spacing=(glyph.isSpace?wordSpacing:0)+charSpacing,operatorList=font.charProcOperatorList[glyph.operatorListId];if(operatorList)this.processingType3=glyph,this.save(),ctx.scale(fontSize,fontSize),ctx.transform.apply(ctx,fontMatrix),this.executeOperatorList(operatorList),this.restore(),width=_util.Util.applyTransform([glyph.width,0],fontMatrix)[0]*fontSize+spacing,ctx.translate(width,0),current.x+=width*textHScale;else(0,_util.warn)(`Type3 character "${glyph.operatorListId}" is not available.`)}ctx.restore(),this.processingType3=null}},setCharWidth:function CanvasGraphics_setCharWidth(xWidth,yWidth){},setCharWidthAndBounds:function CanvasGraphics_setCharWidthAndBounds(xWidth,yWidth,llx,lly,urx,ury){this.ctx.rect(llx,lly,urx-llx,ury-lly),this.clip(),this.endPath()},getColorN_Pattern:function CanvasGraphics_getColorN_Pattern(IR){var pattern;if("TilingPattern"===IR[0]){var color=IR[1],baseTransform=this.baseTransform||this.ctx.mozCurrentTransform.slice(),canvasGraphicsFactory={createCanvasGraphics:ctx=>new CanvasGraphics(ctx,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext)};pattern=new _pattern_helper.TilingPattern(IR,color,this.ctx,canvasGraphicsFactory,baseTransform)}else pattern=(0,_pattern_helper.getShadingPatternFromIR)(IR);return pattern},setStrokeColorN:function CanvasGraphics_setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function CanvasGraphics_setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function CanvasGraphics_setStrokeRGBColor(r,g,b){var color=_util.Util.makeCssRgb(r,g,b);this.ctx.strokeStyle=color,this.current.strokeColor=color},setFillRGBColor:function CanvasGraphics_setFillRGBColor(r,g,b){var color=_util.Util.makeCssRgb(r,g,b);this.ctx.fillStyle=color,this.current.fillColor=color,this.current.patternFill=!1},shadingFill:function CanvasGraphics_shadingFill(patternIR){var ctx=this.ctx;this.save();var pattern=(0,_pattern_helper.getShadingPatternFromIR)(patternIR);ctx.fillStyle=pattern.getPattern(ctx,this,!0);var inv=ctx.mozCurrentTransformInverse;if(inv){var canvas=ctx.canvas,width=canvas.width,height=canvas.height,bl=_util.Util.applyTransform([0,0],inv),br=_util.Util.applyTransform([0,height],inv),ul=_util.Util.applyTransform([width,0],inv),ur=_util.Util.applyTransform([width,height],inv),x0=Math.min(bl[0],br[0],ul[0],ur[0]),y0=Math.min(bl[1],br[1],ul[1],ur[1]),x1=Math.max(bl[0],br[0],ul[0],ur[0]),y1=Math.max(bl[1],br[1],ul[1],ur[1]);this.ctx.fillRect(x0,y0,x1-x0,y1-y0)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()},beginInlineImage:function CanvasGraphics_beginInlineImage(){(0,_util.unreachable)("Should not call beginInlineImage")},beginImageData:function CanvasGraphics_beginImageData(){(0,_util.unreachable)("Should not call beginImageData")},paintFormXObjectBegin:function CanvasGraphics_paintFormXObjectBegin(matrix,bbox){if(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(matrix)&&6===matrix.length&&this.transform.apply(this,matrix),this.baseTransform=this.ctx.mozCurrentTransform,bbox){var width=bbox[2]-bbox[0],height=bbox[3]-bbox[1];this.ctx.rect(bbox[0],bbox[1],width,height),this.clip(),this.endPath()}},paintFormXObjectEnd:function CanvasGraphics_paintFormXObjectEnd(){this.restore(),this.baseTransform=this.baseTransformStack.pop()},beginGroup:function CanvasGraphics_beginGroup(group){this.save();var currentCtx=this.ctx;group.isolated||(0,_util.info)("TODO: Support non-isolated groups."),group.knockout&&(0,_util.warn)("Knockout groups not supported.");var currentTransform=currentCtx.mozCurrentTransform;if(group.matrix&&currentCtx.transform.apply(currentCtx,group.matrix),!group.bbox)throw new Error("Bounding box is required.");var bounds=_util.Util.getAxialAlignedBoundingBox(group.bbox,currentCtx.mozCurrentTransform),canvasBounds=[0,0,currentCtx.canvas.width,currentCtx.canvas.height];bounds=_util.Util.intersect(bounds,canvasBounds)||[0,0,0,0];var offsetX=Math.floor(bounds[0]),offsetY=Math.floor(bounds[1]),drawnWidth=Math.max(Math.ceil(bounds[2])-offsetX,1),drawnHeight=Math.max(Math.ceil(bounds[3])-offsetY,1),scaleX=1,scaleY=1;drawnWidth>4096&&(scaleX=drawnWidth/4096,drawnWidth=4096),drawnHeight>4096&&(scaleY=drawnHeight/4096,drawnHeight=4096);var cacheId="groupAt"+this.groupLevel;group.smask&&(cacheId+="_smask_"+this.smaskCounter++%2);var scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight,!0),groupCtx=scratchCanvas.context;groupCtx.scale(1/scaleX,1/scaleY),groupCtx.translate(-offsetX,-offsetY),groupCtx.transform.apply(groupCtx,currentTransform),group.smask?this.smaskStack.push({canvas:scratchCanvas.canvas,context:groupCtx,offsetX:offsetX,offsetY:offsetY,scaleX:scaleX,scaleY:scaleY,subtype:group.smask.subtype,backdrop:group.smask.backdrop,transferMap:group.smask.transferMap||null,startTransformInverse:null}):(currentCtx.setTransform(1,0,0,1,0,0),currentCtx.translate(offsetX,offsetY),currentCtx.scale(scaleX,scaleY)),copyCtxState(currentCtx,groupCtx),this.ctx=groupCtx,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(currentCtx),this.groupLevel++,this.current.activeSMask=null},endGroup:function CanvasGraphics_endGroup(group){this.groupLevel--;var groupCtx=this.ctx;this.ctx=this.groupStack.pop(),void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,group.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(groupCtx.canvas,0,0),this.restore()},beginAnnotations:function CanvasGraphics_beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function CanvasGraphics_endAnnotations(){this.restore()},beginAnnotation:function CanvasGraphics_beginAnnotation(rect,transform,matrix){if(this.save(),resetCtxToDefault(this.ctx),this.current=new CanvasExtraState,Array.isArray(rect)&&4===rect.length){var width=rect[2]-rect[0],height=rect[3]-rect[1];this.ctx.rect(rect[0],rect[1],width,height),this.clip(),this.endPath()}this.transform.apply(this,transform),this.transform.apply(this,matrix)},endAnnotation:function CanvasGraphics_endAnnotation(){this.restore()},paintJpegXObject:function CanvasGraphics_paintJpegXObject(objId,w,h){const domImage=this.processingType3?this.commonObjs.get(objId):this.objs.get(objId);if(domImage){this.save();var ctx=this.ctx;if(ctx.scale(1/w,-1/h),ctx.drawImage(domImage,0,0,domImage.width,domImage.height,0,-h,w,h),this.imageLayer){var currentTransform=ctx.mozCurrentTransformInverse,position=this.getCanvasPosition(0,0);this.imageLayer.appendImage({objId:objId,left:position[0],top:position[1],width:w/currentTransform[0],height:h/currentTransform[3]})}this.restore()}else(0,_util.warn)("Dependent image isn't ready yet")},paintImageMaskXObject:function CanvasGraphics_paintImageMaskXObject(img){var ctx=this.ctx,width=img.width,height=img.height,fillColor=this.current.fillColor,isPatternFill=this.current.patternFill,glyph=this.processingType3;if(glyph&&void 0===glyph.compiled&&(glyph.compiled=width<=1e3&&height<=1e3?function compileType3Glyph(imgData){var i,j,j0,ii,width=imgData.width,height=imgData.height,width1=width+1,points=new Uint8Array(width1*(height+1)),POINT_TYPES=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),lineSize=width+7&-8,data0=imgData.data,data=new Uint8Array(lineSize*height),pos=0;for(i=0,ii=data0.length;i<ii;i++)for(var mask=128,elem=data0[i];mask>0;)data[pos++]=elem&mask?0:255,mask>>=1;var count=0;for(0!==data[pos=0]&&(points[0]=1,++count),j=1;j<width;j++)data[pos]!==data[pos+1]&&(points[j]=data[pos]?2:1,++count),pos++;for(0!==data[pos]&&(points[j]=2,++count),i=1;i<height;i++){j0=i*width1,data[(pos=i*lineSize)-lineSize]!==data[pos]&&(points[j0]=data[pos]?1:8,++count);var sum=(data[pos]?4:0)+(data[pos-lineSize]?8:0);for(j=1;j<width;j++)POINT_TYPES[sum=(sum>>2)+(data[pos+1]?4:0)+(data[pos-lineSize+1]?8:0)]&&(points[j0+j]=POINT_TYPES[sum],++count),pos++;if(data[pos-lineSize]!==data[pos]&&(points[j0+j]=data[pos]?2:4,++count),count>1e3)return null}for(j0=i*width1,0!==data[pos=lineSize*(height-1)]&&(points[j0]=8,++count),j=1;j<width;j++)data[pos]!==data[pos+1]&&(points[j0+j]=data[pos]?4:8,++count),pos++;if(0!==data[pos]&&(points[j0+j]=4,++count),count>1e3)return null;var steps=new Int32Array([0,width1,-1,0,-width1,0,0,0,1]),outlines=[];for(i=0;count&&i<=height;i++){for(var p=i*width1,end=p+width;p<end&&!points[p];)p++;if(p!==end){var pp,coords=[p%width1,i],type=points[p],p0=p;do{var step=steps[type];do{p+=step}while(!points[p]);5!==(pp=points[p])&&10!==pp?(type=pp,points[p]=0):(type=pp&51*type>>4,points[p]&=type>>2|type<<2),coords.push(p%width1),coords.push(p/width1|0),points[p]||--count}while(p0!==p);outlines.push(coords),--i}}return function(c){c.save(),c.scale(1/width,-1/height),c.translate(0,-height),c.beginPath();for(var i=0,ii=outlines.length;i<ii;i++){var o=outlines[i];c.moveTo(o[0],o[1]);for(var j=2,jj=o.length;j<jj;j+=2)c.lineTo(o[j],o[j+1])}c.fill(),c.beginPath(),c.restore()}}({data:img.data,width:width,height:height}):null),glyph&&glyph.compiled)glyph.compiled(ctx);else{var maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height),maskCtx=maskCanvas.context;maskCtx.save(),putBinaryImageMask(maskCtx,img),maskCtx.globalCompositeOperation="source-in",maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this):fillColor,maskCtx.fillRect(0,0,width,height),maskCtx.restore(),this.paintInlineImageXObject(maskCanvas.canvas)}},paintImageMaskXObjectRepeat:function CanvasGraphics_paintImageMaskXObjectRepeat(imgData,scaleX,scaleY,positions){var width=imgData.width,height=imgData.height,fillColor=this.current.fillColor,isPatternFill=this.current.patternFill,maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height),maskCtx=maskCanvas.context;maskCtx.save(),putBinaryImageMask(maskCtx,imgData),maskCtx.globalCompositeOperation="source-in",maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this):fillColor,maskCtx.fillRect(0,0,width,height),maskCtx.restore();for(var ctx=this.ctx,i=0,ii=positions.length;i<ii;i+=2)ctx.save(),ctx.transform(scaleX,0,0,scaleY,positions[i],positions[i+1]),ctx.scale(1,-1),ctx.drawImage(maskCanvas.canvas,0,0,width,height,0,-1,1,1),ctx.restore()},paintImageMaskXObjectGroup:function CanvasGraphics_paintImageMaskXObjectGroup(images){for(var ctx=this.ctx,fillColor=this.current.fillColor,isPatternFill=this.current.patternFill,i=0,ii=images.length;i<ii;i++){var image=images[i],width=image.width,height=image.height,maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height),maskCtx=maskCanvas.context;maskCtx.save(),putBinaryImageMask(maskCtx,image),maskCtx.globalCompositeOperation="source-in",maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this):fillColor,maskCtx.fillRect(0,0,width,height),maskCtx.restore(),ctx.save(),ctx.transform.apply(ctx,image.transform),ctx.scale(1,-1),ctx.drawImage(maskCanvas.canvas,0,0,width,height,0,-1,1,1),ctx.restore()}},paintImageXObject:function CanvasGraphics_paintImageXObject(objId){const imgData=this.processingType3?this.commonObjs.get(objId):this.objs.get(objId);imgData?this.paintInlineImageXObject(imgData):(0,_util.warn)("Dependent image isn't ready yet")},paintImageXObjectRepeat:function CanvasGraphics_paintImageXObjectRepeat(objId,scaleX,scaleY,positions){const imgData=this.processingType3?this.commonObjs.get(objId):this.objs.get(objId);if(imgData){for(var width=imgData.width,height=imgData.height,map=[],i=0,ii=positions.length;i<ii;i+=2)map.push({transform:[scaleX,0,0,scaleY,positions[i],positions[i+1]],x:0,y:0,w:width,h:height});this.paintInlineImageXObjectGroup(imgData,map)}else(0,_util.warn)("Dependent image isn't ready yet")},paintInlineImageXObject:function CanvasGraphics_paintInlineImageXObject(imgData){var width=imgData.width,height=imgData.height,ctx=this.ctx;this.save(),ctx.scale(1/width,-1/height);var imgToPaint,tmpCanvas,currentTransform=ctx.mozCurrentTransformInverse,a=currentTransform[0],b=currentTransform[1],widthScale=Math.max(Math.sqrt(a*a+b*b),1),c=currentTransform[2],d=currentTransform[3],heightScale=Math.max(Math.sqrt(c*c+d*d),1);if("function"==typeof HTMLElement&&imgData instanceof HTMLElement||!imgData.data)imgToPaint=imgData;else{var tmpCtx=(tmpCanvas=this.cachedCanvases.getCanvas("inlineImage",width,height)).context;putBinaryImageData(tmpCtx,imgData),imgToPaint=tmpCanvas.canvas}for(var paintWidth=width,paintHeight=height,tmpCanvasId="prescale1";widthScale>2&&paintWidth>1||heightScale>2&&paintHeight>1;){var newWidth=paintWidth,newHeight=paintHeight;widthScale>2&&paintWidth>1&&(widthScale/=paintWidth/(newWidth=Math.ceil(paintWidth/2))),heightScale>2&&paintHeight>1&&(heightScale/=paintHeight/(newHeight=Math.ceil(paintHeight/2))),(tmpCtx=(tmpCanvas=this.cachedCanvases.getCanvas(tmpCanvasId,newWidth,newHeight)).context).clearRect(0,0,newWidth,newHeight),tmpCtx.drawImage(imgToPaint,0,0,paintWidth,paintHeight,0,0,newWidth,newHeight),imgToPaint=tmpCanvas.canvas,paintWidth=newWidth,paintHeight=newHeight,tmpCanvasId="prescale1"===tmpCanvasId?"prescale2":"prescale1"}if(ctx.drawImage(imgToPaint,0,0,paintWidth,paintHeight,0,-height,width,height),this.imageLayer){var position=this.getCanvasPosition(0,-height);this.imageLayer.appendImage({imgData:imgData,left:position[0],top:position[1],width:width/currentTransform[0],height:height/currentTransform[3]})}this.restore()},paintInlineImageXObjectGroup:function CanvasGraphics_paintInlineImageXObjectGroup(imgData,map){var ctx=this.ctx,w=imgData.width,h=imgData.height,tmpCanvas=this.cachedCanvases.getCanvas("inlineImage",w,h);putBinaryImageData(tmpCanvas.context,imgData);for(var i=0,ii=map.length;i<ii;i++){var entry=map[i];if(ctx.save(),ctx.transform.apply(ctx,entry.transform),ctx.scale(1,-1),ctx.drawImage(tmpCanvas.canvas,entry.x,entry.y,entry.w,entry.h,0,-1,1,1),this.imageLayer){var position=this.getCanvasPosition(entry.x,entry.y);this.imageLayer.appendImage({imgData:imgData,left:position[0],top:position[1],width:w,height:h})}ctx.restore()}},paintSolidColorImageMask:function CanvasGraphics_paintSolidColorImageMask(){this.ctx.fillRect(0,0,1,1)},paintXObject:function CanvasGraphics_paintXObject(){(0,_util.warn)("Unsupported 'paintXObject' command.")},markPoint:function CanvasGraphics_markPoint(tag){},markPointProps:function CanvasGraphics_markPointProps(tag,properties){},beginMarkedContent:function CanvasGraphics_beginMarkedContent(tag){},beginMarkedContentProps:function CanvasGraphics_beginMarkedContentProps(tag,properties){},endMarkedContent:function CanvasGraphics_endMarkedContent(){},beginCompat:function CanvasGraphics_beginCompat(){},endCompat:function CanvasGraphics_endCompat(){},consumePath:function CanvasGraphics_consumePath(){var ctx=this.ctx;this.pendingClip&&(this.pendingClip===EO_CLIP?ctx.clip("evenodd"):ctx.clip(),this.pendingClip=null),ctx.beginPath()},getSinglePixelWidth(scale){if(null===this._cachedGetSinglePixelWidth){const inverse=this.ctx.mozCurrentTransformInverse;this._cachedGetSinglePixelWidth=Math.sqrt(Math.max(inverse[0]*inverse[0]+inverse[1]*inverse[1],inverse[2]*inverse[2]+inverse[3]*inverse[3]))}return this._cachedGetSinglePixelWidth},getCanvasPosition:function CanvasGraphics_getCanvasPosition(x,y){var transform=this.ctx.mozCurrentTransform;return[transform[0]*x+transform[2]*y+transform[4],transform[1]*x+transform[3]*y+transform[5]]}},_util.OPS)CanvasGraphics.prototype[_util.OPS[op]]=CanvasGraphics.prototype[op];return CanvasGraphics}();exports.CanvasGraphics=CanvasGraphics},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getShadingPatternFromIR=function getShadingPatternFromIR(raw){var shadingIR=ShadingIRs[raw[0]];if(!shadingIR)throw new Error(`Unknown IR type: ${raw[0]}`);return shadingIR.fromIR(raw)},exports.TilingPattern=void 0;var _util=__w_pdfjs_require__(1),ShadingIRs={};function applyBoundingBox(ctx,bbox){if(!bbox||"undefined"==typeof Path2D)return;const width=bbox[2]-bbox[0],height=bbox[3]-bbox[1],region=new Path2D;region.rect(bbox[0],bbox[1],width,height),ctx.clip(region)}ShadingIRs.RadialAxial={fromIR:function RadialAxial_fromIR(raw){var type=raw[1],bbox=raw[2],colorStops=raw[3],p0=raw[4],p1=raw[5],r0=raw[6],r1=raw[7];return{type:"Pattern",getPattern:function RadialAxial_getPattern(ctx){var grad;applyBoundingBox(ctx,bbox),"axial"===type?grad=ctx.createLinearGradient(p0[0],p0[1],p1[0],p1[1]):"radial"===type&&(grad=ctx.createRadialGradient(p0[0],p0[1],r0,p1[0],p1[1],r1));for(var i=0,ii=colorStops.length;i<ii;++i){var c=colorStops[i];grad.addColorStop(c[0],c[1])}return grad}}}};var createMeshCanvas=function createMeshCanvasClosure(){function drawTriangle(data,context,p1,p2,p3,c1,c2,c3){var tmp,coords=context.coords,colors=context.colors,bytes=data.data,rowSize=4*data.width;coords[p1+1]>coords[p2+1]&&(tmp=p1,p1=p2,p2=tmp,tmp=c1,c1=c2,c2=tmp),coords[p2+1]>coords[p3+1]&&(tmp=p2,p2=p3,p3=tmp,tmp=c2,c2=c3,c3=tmp),coords[p1+1]>coords[p2+1]&&(tmp=p1,p1=p2,p2=tmp,tmp=c1,c1=c2,c2=tmp);var x1=(coords[p1]+context.offsetX)*context.scaleX,y1=(coords[p1+1]+context.offsetY)*context.scaleY,x2=(coords[p2]+context.offsetX)*context.scaleX,y2=(coords[p2+1]+context.offsetY)*context.scaleY,x3=(coords[p3]+context.offsetX)*context.scaleX,y3=(coords[p3+1]+context.offsetY)*context.scaleY;if(!(y1>=y3))for(var xa,car,cag,cab,xb,cbr,cbg,cbb,c1r=colors[c1],c1g=colors[c1+1],c1b=colors[c1+2],c2r=colors[c2],c2g=colors[c2+1],c2b=colors[c2+2],c3r=colors[c3],c3g=colors[c3+1],c3b=colors[c3+2],minY=Math.round(y1),maxY=Math.round(y3),y=minY;y<=maxY;y++){if(y<y2){let k;k=y<y1?0:y1===y2?1:(y1-y)/(y1-y2),xa=x1-(x1-x2)*k,car=c1r-(c1r-c2r)*k,cag=c1g-(c1g-c2g)*k,cab=c1b-(c1b-c2b)*k}else{let k;k=y>y3?1:y2===y3?0:(y2-y)/(y2-y3),xa=x2-(x2-x3)*k,car=c2r-(c2r-c3r)*k,cag=c2g-(c2g-c3g)*k,cab=c2b-(c2b-c3b)*k}let k;k=y<y1?0:y>y3?1:(y1-y)/(y1-y3),xb=x1-(x1-x3)*k,cbr=c1r-(c1r-c3r)*k,cbg=c1g-(c1g-c3g)*k,cbb=c1b-(c1b-c3b)*k;for(var x1_=Math.round(Math.min(xa,xb)),x2_=Math.round(Math.max(xa,xb)),j=rowSize*y+4*x1_,x=x1_;x<=x2_;x++){let k=(xa-x)/(xa-xb);k<0?k=0:k>1&&(k=1),bytes[j++]=car-(car-cbr)*k|0,bytes[j++]=cag-(cag-cbg)*k|0,bytes[j++]=cab-(cab-cbb)*k|0,bytes[j++]=255}}}function drawFigure(data,figure,context){var i,ii,ps=figure.coords,cs=figure.colors;switch(figure.type){case"lattice":var verticesPerRow=figure.verticesPerRow,rows=Math.floor(ps.length/verticesPerRow)-1,cols=verticesPerRow-1;for(i=0;i<rows;i++)for(var q=i*verticesPerRow,j=0;j<cols;j++,q++)drawTriangle(data,context,ps[q],ps[q+1],ps[q+verticesPerRow],cs[q],cs[q+1],cs[q+verticesPerRow]),drawTriangle(data,context,ps[q+verticesPerRow+1],ps[q+1],ps[q+verticesPerRow],cs[q+verticesPerRow+1],cs[q+1],cs[q+verticesPerRow]);break;case"triangles":for(i=0,ii=ps.length;i<ii;i+=3)drawTriangle(data,context,ps[i],ps[i+1],ps[i+2],cs[i],cs[i+1],cs[i+2]);break;default:throw new Error("illegal figure")}}return function createMeshCanvas(bounds,combinesScale,coords,colors,figures,backgroundColor,cachedCanvases,webGLContext){var canvas,tmpCanvas,i,ii,offsetX=Math.floor(bounds[0]),offsetY=Math.floor(bounds[1]),boundsWidth=Math.ceil(bounds[2])-offsetX,boundsHeight=Math.ceil(bounds[3])-offsetY,width=Math.min(Math.ceil(Math.abs(boundsWidth*combinesScale[0]*1.1)),3e3),height=Math.min(Math.ceil(Math.abs(boundsHeight*combinesScale[1]*1.1)),3e3),scaleX=boundsWidth/width,scaleY=boundsHeight/height,context={coords:coords,colors:colors,offsetX:-offsetX,offsetY:-offsetY,scaleX:1/scaleX,scaleY:1/scaleY},paddedWidth=width+4,paddedHeight=height+4;if(webGLContext.isEnabled)canvas=webGLContext.drawFigures({width:width,height:height,backgroundColor:backgroundColor,figures:figures,context:context}),(tmpCanvas=cachedCanvases.getCanvas("mesh",paddedWidth,paddedHeight,!1)).context.drawImage(canvas,2,2),canvas=tmpCanvas.canvas;else{var tmpCtx=(tmpCanvas=cachedCanvases.getCanvas("mesh",paddedWidth,paddedHeight,!1)).context,data=tmpCtx.createImageData(width,height);if(backgroundColor){var bytes=data.data;for(i=0,ii=bytes.length;i<ii;i+=4)bytes[i]=backgroundColor[0],bytes[i+1]=backgroundColor[1],bytes[i+2]=backgroundColor[2],bytes[i+3]=255}for(i=0;i<figures.length;i++)drawFigure(data,figures[i],context);tmpCtx.putImageData(data,2,2),canvas=tmpCanvas.canvas}return{canvas:canvas,offsetX:offsetX-2*scaleX,offsetY:offsetY-2*scaleY,scaleX:scaleX,scaleY:scaleY}}}();ShadingIRs.Mesh={fromIR:function Mesh_fromIR(raw){var coords=raw[2],colors=raw[3],figures=raw[4],bounds=raw[5],matrix=raw[6],bbox=raw[7],background=raw[8];return{type:"Pattern",getPattern:function Mesh_getPattern(ctx,owner,shadingFill){var scale;if(applyBoundingBox(ctx,bbox),shadingFill)scale=_util.Util.singularValueDecompose2dScale(ctx.mozCurrentTransform);else if(scale=_util.Util.singularValueDecompose2dScale(owner.baseTransform),matrix){var matrixScale=_util.Util.singularValueDecompose2dScale(matrix);scale=[scale[0]*matrixScale[0],scale[1]*matrixScale[1]]}var temporaryPatternCanvas=createMeshCanvas(bounds,scale,coords,colors,figures,shadingFill?null:background,owner.cachedCanvases,owner.webGLContext);return shadingFill||(ctx.setTransform.apply(ctx,owner.baseTransform),matrix&&ctx.transform.apply(ctx,matrix)),ctx.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY),ctx.scale(temporaryPatternCanvas.scaleX,temporaryPatternCanvas.scaleY),ctx.createPattern(temporaryPatternCanvas.canvas,"no-repeat")}}}},ShadingIRs.Dummy={fromIR:function Dummy_fromIR(){return{type:"Pattern",getPattern:function Dummy_fromIR_getPattern(){return"hotpink"}}}};var TilingPattern=function TilingPatternClosure(){var PaintType_COLORED=1,PaintType_UNCOLORED=2;function TilingPattern(IR,color,ctx,canvasGraphicsFactory,baseTransform){this.operatorList=IR[2],this.matrix=IR[3]||[1,0,0,1,0,0],this.bbox=IR[4],this.xstep=IR[5],this.ystep=IR[6],this.paintType=IR[7],this.tilingType=IR[8],this.color=color,this.canvasGraphicsFactory=canvasGraphicsFactory,this.baseTransform=baseTransform,this.type="Pattern",this.ctx=ctx}return TilingPattern.prototype={createPatternCanvas:function TilinPattern_createPatternCanvas(owner){var operatorList=this.operatorList,bbox=this.bbox,xstep=this.xstep,ystep=this.ystep,paintType=this.paintType,tilingType=this.tilingType,color=this.color,canvasGraphicsFactory=this.canvasGraphicsFactory;(0,_util.info)("TilingType: "+tilingType);var x0=bbox[0],y0=bbox[1],x1=bbox[2],y1=bbox[3],matrixScale=_util.Util.singularValueDecompose2dScale(this.matrix),curMatrixScale=_util.Util.singularValueDecompose2dScale(this.baseTransform),combinedScale=[matrixScale[0]*curMatrixScale[0],matrixScale[1]*curMatrixScale[1]],dimx=this.getSizeAndScale(xstep,this.ctx.canvas.width,combinedScale[0]),dimy=this.getSizeAndScale(ystep,this.ctx.canvas.height,combinedScale[1]),tmpCanvas=owner.cachedCanvases.getCanvas("pattern",dimx.size,dimy.size,!0),tmpCtx=tmpCanvas.context,graphics=canvasGraphicsFactory.createCanvasGraphics(tmpCtx);return graphics.groupLevel=owner.groupLevel,this.setFillAndStrokeStyleToContext(graphics,paintType,color),graphics.transform(dimx.scale,0,0,dimy.scale,0,0),graphics.transform(1,0,0,1,-x0,-y0),this.clipBbox(graphics,bbox,x0,y0,x1,y1),graphics.executeOperatorList(operatorList),this.ctx.transform(1,0,0,1,x0,y0),this.ctx.scale(1/dimx.scale,1/dimy.scale),tmpCanvas.canvas},getSizeAndScale:function TilingPattern_getSizeAndScale(step,realOutputSize,scale){step=Math.abs(step);var maxSize=Math.max(3e3,realOutputSize),size=Math.ceil(step*scale);return size>=maxSize?size=maxSize:scale=size/step,{scale:scale,size:size}},clipBbox:function clipBbox(graphics,bbox,x0,y0,x1,y1){if(Array.isArray(bbox)&&4===bbox.length){var bboxWidth=x1-x0,bboxHeight=y1-y0;graphics.ctx.rect(x0,y0,bboxWidth,bboxHeight),graphics.clip(),graphics.endPath()}},setFillAndStrokeStyleToContext:function setFillAndStrokeStyleToContext(graphics,paintType,color){const context=graphics.ctx,current=graphics.current;switch(paintType){case PaintType_COLORED:var ctx=this.ctx;context.fillStyle=ctx.fillStyle,context.strokeStyle=ctx.strokeStyle,current.fillColor=ctx.fillStyle,current.strokeColor=ctx.strokeStyle;break;case PaintType_UNCOLORED:var cssColor=_util.Util.makeCssRgb(color[0],color[1],color[2]);context.fillStyle=cssColor,context.strokeStyle=cssColor,current.fillColor=cssColor,current.strokeColor=cssColor;break;default:throw new _util.FormatError(`Unsupported paint type: ${paintType}`)}},getPattern:function TilingPattern_getPattern(ctx,owner){(ctx=this.ctx).setTransform.apply(ctx,this.baseTransform),ctx.transform.apply(ctx,this.matrix);var temporaryPatternCanvas=this.createPatternCanvas(owner);return ctx.createPattern(temporaryPatternCanvas,"repeat")}},TilingPattern}();exports.TilingPattern=TilingPattern},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GlobalWorkerOptions=void 0;const GlobalWorkerOptions=Object.create(null);exports.GlobalWorkerOptions=GlobalWorkerOptions,GlobalWorkerOptions.workerPort=void 0===GlobalWorkerOptions.workerPort?null:GlobalWorkerOptions.workerPort,GlobalWorkerOptions.workerSrc=void 0===GlobalWorkerOptions.workerSrc?"":GlobalWorkerOptions.workerSrc},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MessageHandler=void 0;var _util=__w_pdfjs_require__(1);const CallbackKind_DATA=1,CallbackKind_ERROR=2,StreamKind_CANCEL=1,StreamKind_CANCEL_COMPLETE=2,StreamKind_CLOSE=3,StreamKind_ENQUEUE=4,StreamKind_ERROR=5,StreamKind_PULL=6,StreamKind_PULL_COMPLETE=7,StreamKind_START_COMPLETE=8;function wrapReason(reason){if("object"!=typeof reason||null===reason)return reason;switch(reason.name){case"AbortException":return new _util.AbortException(reason.message);case"MissingPDFException":return new _util.MissingPDFException(reason.message);case"UnexpectedResponseException":return new _util.UnexpectedResponseException(reason.message,reason.status);case"UnknownErrorException":return new _util.UnknownErrorException(reason.message,reason.details);default:return new _util.UnknownErrorException(reason.message,reason.toString())}}exports.MessageHandler=class MessageHandler{constructor(sourceName,targetName,comObj){this.sourceName=sourceName,this.targetName=targetName,this.comObj=comObj,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=event=>{const data=event.data;if(data.targetName!==this.sourceName)return;if(data.stream)return void this._processStreamMessage(data);if(data.callback){const callbackId=data.callbackId,capability=this.callbackCapabilities[callbackId];if(!capability)throw new Error(`Cannot resolve callback ${callbackId}`);if(delete this.callbackCapabilities[callbackId],data.callback===CallbackKind_DATA)capability.resolve(data.data);else{if(data.callback!==CallbackKind_ERROR)throw new Error("Unexpected callback case");capability.reject(wrapReason(data.reason))}return}const action=this.actionHandler[data.action];if(!action)throw new Error(`Unknown action from worker: ${data.action}`);if(data.callbackId){const sourceName=this.sourceName,targetName=data.sourceName;new Promise((function(resolve){resolve(action(data.data))})).then((function(result){comObj.postMessage({sourceName:sourceName,targetName:targetName,callback:CallbackKind_DATA,callbackId:data.callbackId,data:result})}),(function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,callback:CallbackKind_ERROR,callbackId:data.callbackId,reason:wrapReason(reason)})}))}else data.streamId?this._createStreamSink(data):action(data.data)},comObj.addEventListener("message",this._onComObjOnMessage)}on(actionName,handler){const ah=this.actionHandler;if(ah[actionName])throw new Error(`There is already an actionName called "${actionName}"`);ah[actionName]=handler}send(actionName,data,transfers){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,data:data},transfers)}sendWithPromise(actionName,data,transfers){const callbackId=this.callbackId++,capability=(0,_util.createPromiseCapability)();this.callbackCapabilities[callbackId]=capability;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,callbackId:callbackId,data:data},transfers)}catch(ex){capability.reject(ex)}return capability.promise}sendWithStream(actionName,data,queueingStrategy,transfers){const streamId=this.streamId++,sourceName=this.sourceName,targetName=this.targetName,comObj=this.comObj;return new ReadableStream({start:controller=>{const startCapability=(0,_util.createPromiseCapability)();return this.streamControllers[streamId]={controller:controller,startCall:startCapability,pullCall:null,cancelCall:null,isClosed:!1},this._postMessage({sourceName:sourceName,targetName:targetName,action:actionName,streamId:streamId,data:data,desiredSize:controller.desiredSize},transfers),startCapability.promise},pull:controller=>{const pullCapability=(0,_util.createPromiseCapability)();return this.streamControllers[streamId].pullCall=pullCapability,comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_PULL,streamId:streamId,desiredSize:controller.desiredSize}),pullCapability.promise},cancel:reason=>{(0,_util.assert)(reason instanceof Error,"cancel must have a valid reason");const cancelCapability=(0,_util.createPromiseCapability)();return this.streamControllers[streamId].cancelCall=cancelCapability,this.streamControllers[streamId].isClosed=!0,comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_CANCEL,streamId:streamId,reason:wrapReason(reason)}),cancelCapability.promise}},queueingStrategy)}_createStreamSink(data){const self=this,action=this.actionHandler[data.action],streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj,streamSink={enqueue(chunk,size=1,transfers){if(this.isCancelled)return;const lastDesiredSize=this.desiredSize;this.desiredSize-=size,lastDesiredSize>0&&this.desiredSize<=0&&(this.sinkCapability=(0,_util.createPromiseCapability)(),this.ready=this.sinkCapability.promise),self._postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_ENQUEUE,streamId:streamId,chunk:chunk},transfers)},close(){this.isCancelled||(this.isCancelled=!0,comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_CLOSE,streamId:streamId}),delete self.streamSinks[streamId])},error(reason){(0,_util.assert)(reason instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_ERROR,streamId:streamId,reason:wrapReason(reason)}))},sinkCapability:(0,_util.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:data.desiredSize,ready:null};streamSink.sinkCapability.resolve(),streamSink.ready=streamSink.sinkCapability.promise,this.streamSinks[streamId]=streamSink,new Promise((function(resolve){resolve(action(data.data,streamSink))})).then((function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_START_COMPLETE,streamId:streamId,success:!0})}),(function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_START_COMPLETE,streamId:streamId,reason:wrapReason(reason)})}))}_processStreamMessage(data){const streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj;switch(data.stream){case StreamKind_START_COMPLETE:data.success?this.streamControllers[streamId].startCall.resolve():this.streamControllers[streamId].startCall.reject(wrapReason(data.reason));break;case StreamKind_PULL_COMPLETE:data.success?this.streamControllers[streamId].pullCall.resolve():this.streamControllers[streamId].pullCall.reject(wrapReason(data.reason));break;case StreamKind_PULL:if(!this.streamSinks[streamId]){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_PULL_COMPLETE,streamId:streamId,success:!0});break}this.streamSinks[streamId].desiredSize<=0&&data.desiredSize>0&&this.streamSinks[streamId].sinkCapability.resolve(),this.streamSinks[streamId].desiredSize=data.desiredSize;const{onPull:onPull}=this.streamSinks[data.streamId];new Promise((function(resolve){resolve(onPull&&onPull())})).then((function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_PULL_COMPLETE,streamId:streamId,success:!0})}),(function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_PULL_COMPLETE,streamId:streamId,reason:wrapReason(reason)})}));break;case StreamKind_ENQUEUE:if((0,_util.assert)(this.streamControllers[streamId],"enqueue should have stream controller"),this.streamControllers[streamId].isClosed)break;this.streamControllers[streamId].controller.enqueue(data.chunk);break;case StreamKind_CLOSE:if((0,_util.assert)(this.streamControllers[streamId],"close should have stream controller"),this.streamControllers[streamId].isClosed)break;this.streamControllers[streamId].isClosed=!0,this.streamControllers[streamId].controller.close(),this._deleteStreamController(streamId);break;case StreamKind_ERROR:(0,_util.assert)(this.streamControllers[streamId],"error should have stream controller"),this.streamControllers[streamId].controller.error(wrapReason(data.reason)),this._deleteStreamController(streamId);break;case StreamKind_CANCEL_COMPLETE:data.success?this.streamControllers[streamId].cancelCall.resolve():this.streamControllers[streamId].cancelCall.reject(wrapReason(data.reason)),this._deleteStreamController(streamId);break;case StreamKind_CANCEL:if(!this.streamSinks[streamId])break;const{onCancel:onCancel}=this.streamSinks[data.streamId];new Promise((function(resolve){resolve(onCancel&&onCancel(wrapReason(data.reason)))})).then((function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_CANCEL_COMPLETE,streamId:streamId,success:!0})}),(function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind_CANCEL_COMPLETE,streamId:streamId,reason:wrapReason(reason)})})),this.streamSinks[streamId].sinkCapability.reject(wrapReason(data.reason)),this.streamSinks[streamId].isCancelled=!0,delete this.streamSinks[streamId];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(streamId){await Promise.allSettled([this.streamControllers[streamId].startCall,this.streamControllers[streamId].pullCall,this.streamControllers[streamId].cancelCall].map((function(capability){return capability&&capability.promise}))),delete this.streamControllers[streamId]}_postMessage(message,transfers){transfers&&this.postMessageTransfers?this.comObj.postMessage(message,transfers):this.comObj.postMessage(message)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Metadata=void 0;var _util=__w_pdfjs_require__(1),_xml_parser=__w_pdfjs_require__(13);exports.Metadata=class Metadata{constructor(data){(0,_util.assert)("string"==typeof data,"Metadata: input is not a string"),data=this._repair(data);const xmlDocument=(new _xml_parser.SimpleXMLParser).parseFromString(data);this._metadataMap=new Map,xmlDocument&&this._parse(xmlDocument)}_repair(data){return data.replace(/^[^<]+/,"").replace(/>\\376\\377([^<]+)/g,(function(all,codes){const bytes=codes.replace(/\\([0-3])([0-7])([0-7])/g,(function(code,d1,d2,d3){return String.fromCharCode(64*d1+8*d2+1*d3)})).replace(/&(amp|apos|gt|lt|quot);/g,(function(str,name){switch(name){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error(`_repair: ${name} isn't defined.`)}));let chars="";for(let i=0,ii=bytes.length;i<ii;i+=2){const code=256*bytes.charCodeAt(i)+bytes.charCodeAt(i+1);chars+=code>=32&&code<127&&60!==code&&62!==code&&38!==code?String.fromCharCode(code):"&#x"+(65536+code).toString(16).substring(1)+";"}return">"+chars}))}_parse(xmlDocument){let rdf=xmlDocument.documentElement;if("rdf:rdf"!==rdf.nodeName.toLowerCase())for(rdf=rdf.firstChild;rdf&&"rdf:rdf"!==rdf.nodeName.toLowerCase();)rdf=rdf.nextSibling;const nodeName=rdf?rdf.nodeName.toLowerCase():null;if(!rdf||"rdf:rdf"!==nodeName||!rdf.hasChildNodes())return;const children=rdf.childNodes;for(let i=0,ii=children.length;i<ii;i++){const desc=children[i];if("rdf:description"===desc.nodeName.toLowerCase())for(let j=0,jj=desc.childNodes.length;j<jj;j++)if("#text"!==desc.childNodes[j].nodeName.toLowerCase()){const entry=desc.childNodes[j],name=entry.nodeName.toLowerCase();this._metadataMap.set(name,entry.textContent.trim())}}}get(name){return this._metadataMap.has(name)?this._metadataMap.get(name):null}getAll(){const obj=Object.create(null);for(const[key,value]of this._metadataMap)obj[key]=value;return obj}has(name){return this._metadataMap.has(name)}}},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SimpleXMLParser=void 0;const XMLParserErrorCode_NoError=0,XMLParserErrorCode_UnterminatedCdat=-2,XMLParserErrorCode_UnterminatedXmlDeclaration=-3,XMLParserErrorCode_UnterminatedDoctypeDeclaration=-4,XMLParserErrorCode_UnterminatedComment=-5,XMLParserErrorCode_MalformedElement=-6,XMLParserErrorCode_UnterminatedElement=-9;function isWhitespace(s,index){const ch=s[index];return" "===ch||"\n"===ch||"\r"===ch||"\t"===ch}class SimpleDOMNode{constructor(nodeName,nodeValue){this.nodeName=nodeName,this.nodeValue=nodeValue,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}get firstChild(){return this.childNodes&&this.childNodes[0]}get nextSibling(){const childNodes=this.parentNode.childNodes;if(!childNodes)return;const index=childNodes.indexOf(this);return-1!==index?childNodes[index+1]:void 0}get textContent(){return this.childNodes?this.childNodes.map((function(child){return child.textContent})).join(""):this.nodeValue||""}hasChildNodes(){return this.childNodes&&this.childNodes.length>0}}exports.SimpleXMLParser=class SimpleXMLParser extends class XMLParserBase{_resolveEntities(s){return s.replace(/&([^;]+);/g,((all,entity)=>{if("#x"===entity.substring(0,2))return String.fromCharCode(parseInt(entity.substring(2),16));if("#"===entity.substring(0,1))return String.fromCharCode(parseInt(entity.substring(1),10));switch(entity){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"'}return this.onResolveEntity(entity)}))}_parseContent(s,start){const attributes=[];let pos=start;function skipWs(){for(;pos<s.length&&isWhitespace(s,pos);)++pos}for(;pos<s.length&&!isWhitespace(s,pos)&&">"!==s[pos]&&"/"!==s[pos];)++pos;const name=s.substring(start,pos);for(skipWs();pos<s.length&&">"!==s[pos]&&"/"!==s[pos]&&"?"!==s[pos];){skipWs();let attrName="",attrValue="";for(;pos<s.length&&!isWhitespace(s,pos)&&"="!==s[pos];)attrName+=s[pos],++pos;if(skipWs(),"="!==s[pos])return null;++pos,skipWs();const attrEndChar=s[pos];if('"'!==attrEndChar&&"'"!==attrEndChar)return null;const attrEndIndex=s.indexOf(attrEndChar,++pos);if(attrEndIndex<0)return null;attrValue=s.substring(pos,attrEndIndex),attributes.push({name:attrName,value:this._resolveEntities(attrValue)}),pos=attrEndIndex+1,skipWs()}return{name:name,attributes:attributes,parsed:pos-start}}_parseProcessingInstruction(s,start){let pos=start;for(;pos<s.length&&!isWhitespace(s,pos)&&">"!==s[pos]&&"/"!==s[pos];)++pos;const name=s.substring(start,pos);!function skipWs(){for(;pos<s.length&&isWhitespace(s,pos);)++pos}();const attrStart=pos;for(;pos<s.length&&("?"!==s[pos]||">"!==s[pos+1]);)++pos;return{name:name,value:s.substring(attrStart,pos),parsed:pos-start}}parseXml(s){let i=0;for(;i<s.length;){let j=i;if("<"===s[i]){++j;let q;switch(s[j]){case"/":if(++j,q=s.indexOf(">",j),q<0)return void this.onError(XMLParserErrorCode_UnterminatedElement);this.onEndElement(s.substring(j,q)),j=q+1;break;case"?":++j;const pi=this._parseProcessingInstruction(s,j);if("?>"!==s.substring(j+pi.parsed,j+pi.parsed+2))return void this.onError(XMLParserErrorCode_UnterminatedXmlDeclaration);this.onPi(pi.name,pi.value),j+=pi.parsed+2;break;case"!":if("--"===s.substring(j+1,j+3)){if(q=s.indexOf("--\x3e",j+3),q<0)return void this.onError(XMLParserErrorCode_UnterminatedComment);this.onComment(s.substring(j+3,q)),j=q+3}else if("[CDATA["===s.substring(j+1,j+8)){if(q=s.indexOf("]]>",j+8),q<0)return void this.onError(XMLParserErrorCode_UnterminatedCdat);this.onCdata(s.substring(j+8,q)),j=q+3}else{if("DOCTYPE"!==s.substring(j+1,j+8))return void this.onError(XMLParserErrorCode_MalformedElement);{const q2=s.indexOf("[",j+8);let complexDoctype=!1;if(q=s.indexOf(">",j+8),q<0)return void this.onError(XMLParserErrorCode_UnterminatedDoctypeDeclaration);if(q2>0&&q>q2){if(q=s.indexOf("]>",j+8),q<0)return void this.onError(XMLParserErrorCode_UnterminatedDoctypeDeclaration);complexDoctype=!0}const doctypeContent=s.substring(j+8,q+(complexDoctype?1:0));this.onDoctype(doctypeContent),j=q+(complexDoctype?2:1)}}break;default:const content=this._parseContent(s,j);if(null===content)return void this.onError(XMLParserErrorCode_MalformedElement);let isClosed=!1;if("/>"===s.substring(j+content.parsed,j+content.parsed+2))isClosed=!0;else if(">"!==s.substring(j+content.parsed,j+content.parsed+1))return void this.onError(XMLParserErrorCode_UnterminatedElement);this.onBeginElement(content.name,content.attributes,isClosed),j+=content.parsed+(isClosed?2:1)}}else{for(;j<s.length&&"<"!==s[j];)j++;const text=s.substring(i,j);this.onText(this._resolveEntities(text))}i=j}}onResolveEntity(name){return`&${name};`}onPi(name,value){}onComment(text){}onCdata(text){}onDoctype(doctypeContent){}onText(text){}onBeginElement(name,attributes,isEmpty){}onEndElement(name){}onError(code){}}{constructor(){super(),this._currentFragment=null,this._stack=null,this._errorCode=XMLParserErrorCode_NoError}parseFromString(data){if(this._currentFragment=[],this._stack=[],this._errorCode=XMLParserErrorCode_NoError,this.parseXml(data),this._errorCode!==XMLParserErrorCode_NoError)return;const[documentElement]=this._currentFragment;return documentElement?{documentElement:documentElement}:void 0}onResolveEntity(name){return"apos"===name?"'":super.onResolveEntity(name)}onText(text){if(function isWhitespaceString(s){for(let i=0,ii=s.length;i<ii;i++)if(!isWhitespace(s,i))return!1;return!0}(text))return;const node=new SimpleDOMNode("#text",text);this._currentFragment.push(node)}onCdata(text){const node=new SimpleDOMNode("#text",text);this._currentFragment.push(node)}onBeginElement(name,attributes,isEmpty){const node=new SimpleDOMNode(name);node.childNodes=[],this._currentFragment.push(node),isEmpty||(this._stack.push(this._currentFragment),this._currentFragment=node.childNodes)}onEndElement(name){this._currentFragment=this._stack.pop()||[];const lastElement=this._currentFragment[this._currentFragment.length-1];if(lastElement)for(let i=0,ii=lastElement.childNodes.length;i<ii;i++)lastElement.childNodes[i].parentNode=lastElement}onError(code){this._errorCode=code}}},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFDataTransportStream=void 0;var _util=__w_pdfjs_require__(1);exports.PDFDataTransportStream=class PDFDataTransportStream{constructor(params,pdfDataRangeTransport){(0,_util.assert)(pdfDataRangeTransport),this._queuedChunks=[],this._progressiveDone=params.progressiveDone||!1;const initialData=params.initialData;if(initialData&&initialData.length>0){const buffer=new Uint8Array(initialData).buffer;this._queuedChunks.push(buffer)}this._pdfDataRangeTransport=pdfDataRangeTransport,this._isStreamingSupported=!params.disableStream,this._isRangeSupported=!params.disableRange,this._contentLength=params.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(((begin,chunk)=>{this._onReceiveData({begin:begin,chunk:chunk})})),this._pdfDataRangeTransport.addProgressListener(((loaded,total)=>{this._onProgress({loaded:loaded,total:total})})),this._pdfDataRangeTransport.addProgressiveReadListener((chunk=>{this._onReceiveData({chunk:chunk})})),this._pdfDataRangeTransport.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}_onReceiveData(args){const buffer=new Uint8Array(args.chunk).buffer;if(void 0===args.begin)this._fullRequestReader?this._fullRequestReader._enqueue(buffer):this._queuedChunks.push(buffer);else{const found=this._rangeReaders.some((function(rangeReader){return rangeReader._begin===args.begin&&(rangeReader._enqueue(buffer),!0)}));(0,_util.assert)(found)}}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}_onProgress(evt){if(void 0===evt.total){const firstReader=this._rangeReaders[0];firstReader&&firstReader.onProgress&&firstReader.onProgress({loaded:evt.loaded})}else{const fullReader=this._fullRequestReader;fullReader&&fullReader.onProgress&&fullReader.onProgress({loaded:evt.loaded,total:evt.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(reader){const i=this._rangeReaders.indexOf(reader);i>=0&&this._rangeReaders.splice(i,1)}getFullReader(){(0,_util.assert)(!this._fullRequestReader);const queuedChunks=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,queuedChunks,this._progressiveDone)}getRangeReader(begin,end){if(end<=this._progressiveDataLength)return null;const reader=new PDFDataTransportStreamRangeReader(this,begin,end);return this._pdfDataRangeTransport.requestDataRange(begin,end),this._rangeReaders.push(reader),reader}cancelAllRequests(reason){this._fullRequestReader&&this._fullRequestReader.cancel(reason);this._rangeReaders.slice(0).forEach((function(rangeReader){rangeReader.cancel(reason)})),this._pdfDataRangeTransport.abort()}};class PDFDataTransportStreamReader{constructor(stream,queuedChunks,progressiveDone=!1){this._stream=stream,this._done=progressiveDone||!1,this._filename=null,this._queuedChunks=queuedChunks||[],this._loaded=0;for(const chunk of this._queuedChunks)this._loaded+=chunk.byteLength;this._requests=[],this._headersReady=Promise.resolve(),stream._fullRequestReader=this,this.onProgress=null}_enqueue(chunk){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:chunk,done:!1})}else this._queuedChunks.push(chunk);this._loaded+=chunk.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const requestCapability=(0,_util.createPromiseCapability)();return this._requests.push(requestCapability),requestCapability.promise}cancel(reason){this._done=!0,this._requests.forEach((function(requestCapability){requestCapability.resolve({value:void 0,done:!0})})),this._requests=[]}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(stream,begin,end){this._stream=stream,this._begin=begin,this._end=end,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(chunk){if(!this._done){if(0===this._requests.length)this._queuedChunk=chunk;else{this._requests.shift().resolve({value:chunk,done:!1}),this._requests.forEach((function(requestCapability){requestCapability.resolve({value:void 0,done:!0})})),this._requests=[]}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const chunk=this._queuedChunk;return this._queuedChunk=null,{value:chunk,done:!1}}if(this._done)return{value:void 0,done:!0};const requestCapability=(0,_util.createPromiseCapability)();return this._requests.push(requestCapability),requestCapability.promise}cancel(reason){this._done=!0,this._requests.forEach((function(requestCapability){requestCapability.resolve({value:void 0,done:!0})})),this._requests=[],this._stream._removeRangeReader(this)}}},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLContext=void 0;var _util=__w_pdfjs_require__(1);exports.WebGLContext=class WebGLContext{constructor({enable:enable=!1}){this._enabled=!0===enable}get isEnabled(){let enabled=this._enabled;return enabled&&(enabled=WebGLUtils.tryInitGL()),(0,_util.shadow)(this,"isEnabled",enabled)}composeSMask({layer:layer,mask:mask,properties:properties}){return WebGLUtils.composeSMask(layer,mask,properties)}drawFigures({width:width,height:height,backgroundColor:backgroundColor,figures:figures,context:context}){return WebGLUtils.drawFigures(width,height,backgroundColor,figures,context)}clear(){WebGLUtils.cleanup()}};var WebGLUtils=function WebGLUtilsClosure(){function loadShader(gl,code,shaderType){var shader=gl.createShader(shaderType);if(gl.shaderSource(shader,code),gl.compileShader(shader),!gl.getShaderParameter(shader,gl.COMPILE_STATUS)){var errorMsg=gl.getShaderInfoLog(shader);throw new Error("Error during shader compilation: "+errorMsg)}return shader}function createVertexShader(gl,code){return loadShader(gl,code,gl.VERTEX_SHADER)}function createFragmentShader(gl,code){return loadShader(gl,code,gl.FRAGMENT_SHADER)}function createProgram(gl,shaders){for(var program=gl.createProgram(),i=0,ii=shaders.length;i<ii;++i)gl.attachShader(program,shaders[i]);if(gl.linkProgram(program),!gl.getProgramParameter(program,gl.LINK_STATUS)){var errorMsg=gl.getProgramInfoLog(program);throw new Error("Error during program linking: "+errorMsg)}return program}function createTexture(gl,image,textureId){gl.activeTexture(textureId);var texture=gl.createTexture();return gl.bindTexture(gl.TEXTURE_2D,texture),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,image),texture}var currentGL,currentCanvas;function generateGL(){currentGL||(currentCanvas=document.createElement("canvas"),currentGL=currentCanvas.getContext("webgl",{premultipliedalpha:!1}))}var smaskCache=null;var figuresCache=null;return{tryInitGL(){try{return generateGL(),!!currentGL}catch(ex){}return!1},composeSMask:function composeSMask(layer,mask,properties){var width=layer.width,height=layer.height;smaskCache||function initSmaskGL(){var canvas,gl;generateGL(),canvas=currentCanvas,currentCanvas=null,gl=currentGL,currentGL=null;var program=createProgram(gl,[createVertexShader(gl,"  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             "),createFragmentShader(gl,"  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ")]);gl.useProgram(program);var cache={};cache.gl=gl,cache.canvas=canvas,cache.resolutionLocation=gl.getUniformLocation(program,"u_resolution"),cache.positionLocation=gl.getAttribLocation(program,"a_position"),cache.backdropLocation=gl.getUniformLocation(program,"u_backdrop"),cache.subtypeLocation=gl.getUniformLocation(program,"u_subtype");var texCoordLocation=gl.getAttribLocation(program,"a_texCoord"),texLayerLocation=gl.getUniformLocation(program,"u_image"),texMaskLocation=gl.getUniformLocation(program,"u_mask"),texCoordBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,texCoordBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),gl.STATIC_DRAW),gl.enableVertexAttribArray(texCoordLocation),gl.vertexAttribPointer(texCoordLocation,2,gl.FLOAT,!1,0,0),gl.uniform1i(texLayerLocation,0),gl.uniform1i(texMaskLocation,1),smaskCache=cache}();var cache=smaskCache,canvas=cache.canvas,gl=cache.gl;canvas.width=width,canvas.height=height,gl.viewport(0,0,gl.drawingBufferWidth,gl.drawingBufferHeight),gl.uniform2f(cache.resolutionLocation,width,height),properties.backdrop?gl.uniform4f(cache.resolutionLocation,properties.backdrop[0],properties.backdrop[1],properties.backdrop[2],1):gl.uniform4f(cache.resolutionLocation,0,0,0,0),gl.uniform1i(cache.subtypeLocation,"Luminosity"===properties.subtype?1:0);var texture=createTexture(gl,layer,gl.TEXTURE0),maskTexture=createTexture(gl,mask,gl.TEXTURE1),buffer=gl.createBuffer();return gl.bindBuffer(gl.ARRAY_BUFFER,buffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0,0,width,0,0,height,0,height,width,0,width,height]),gl.STATIC_DRAW),gl.enableVertexAttribArray(cache.positionLocation),gl.vertexAttribPointer(cache.positionLocation,2,gl.FLOAT,!1,0,0),gl.clearColor(0,0,0,0),gl.enable(gl.BLEND),gl.blendFunc(gl.ONE,gl.ONE_MINUS_SRC_ALPHA),gl.clear(gl.COLOR_BUFFER_BIT),gl.drawArrays(gl.TRIANGLES,0,6),gl.flush(),gl.deleteTexture(texture),gl.deleteTexture(maskTexture),gl.deleteBuffer(buffer),canvas},drawFigures:function drawFigures(width,height,backgroundColor,figures,context){figuresCache||function initFiguresGL(){var canvas,gl;generateGL(),canvas=currentCanvas,currentCanvas=null,gl=currentGL,currentGL=null;var program=createProgram(gl,[createVertexShader(gl,"  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             "),createFragmentShader(gl,"  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ")]);gl.useProgram(program);var cache={};cache.gl=gl,cache.canvas=canvas,cache.resolutionLocation=gl.getUniformLocation(program,"u_resolution"),cache.scaleLocation=gl.getUniformLocation(program,"u_scale"),cache.offsetLocation=gl.getUniformLocation(program,"u_offset"),cache.positionLocation=gl.getAttribLocation(program,"a_position"),cache.colorLocation=gl.getAttribLocation(program,"a_color"),figuresCache=cache}();var cache=figuresCache,canvas=cache.canvas,gl=cache.gl;canvas.width=width,canvas.height=height,gl.viewport(0,0,gl.drawingBufferWidth,gl.drawingBufferHeight),gl.uniform2f(cache.resolutionLocation,width,height);var i,ii,rows,count=0;for(i=0,ii=figures.length;i<ii;i++)switch(figures[i].type){case"lattice":count+=((rows=figures[i].coords.length/figures[i].verticesPerRow|0)-1)*(figures[i].verticesPerRow-1)*6;break;case"triangles":count+=figures[i].coords.length}var coords=new Float32Array(2*count),colors=new Uint8Array(3*count),coordsMap=context.coords,colorsMap=context.colors,pIndex=0,cIndex=0;for(i=0,ii=figures.length;i<ii;i++){var figure=figures[i],ps=figure.coords,cs=figure.colors;switch(figure.type){case"lattice":var cols=figure.verticesPerRow;rows=ps.length/cols|0;for(var row=1;row<rows;row++)for(var offset=row*cols+1,col=1;col<cols;col++,offset++)coords[pIndex]=coordsMap[ps[offset-cols-1]],coords[pIndex+1]=coordsMap[ps[offset-cols-1]+1],coords[pIndex+2]=coordsMap[ps[offset-cols]],coords[pIndex+3]=coordsMap[ps[offset-cols]+1],coords[pIndex+4]=coordsMap[ps[offset-1]],coords[pIndex+5]=coordsMap[ps[offset-1]+1],colors[cIndex]=colorsMap[cs[offset-cols-1]],colors[cIndex+1]=colorsMap[cs[offset-cols-1]+1],colors[cIndex+2]=colorsMap[cs[offset-cols-1]+2],colors[cIndex+3]=colorsMap[cs[offset-cols]],colors[cIndex+4]=colorsMap[cs[offset-cols]+1],colors[cIndex+5]=colorsMap[cs[offset-cols]+2],colors[cIndex+6]=colorsMap[cs[offset-1]],colors[cIndex+7]=colorsMap[cs[offset-1]+1],colors[cIndex+8]=colorsMap[cs[offset-1]+2],coords[pIndex+6]=coords[pIndex+2],coords[pIndex+7]=coords[pIndex+3],coords[pIndex+8]=coords[pIndex+4],coords[pIndex+9]=coords[pIndex+5],coords[pIndex+10]=coordsMap[ps[offset]],coords[pIndex+11]=coordsMap[ps[offset]+1],colors[cIndex+9]=colors[cIndex+3],colors[cIndex+10]=colors[cIndex+4],colors[cIndex+11]=colors[cIndex+5],colors[cIndex+12]=colors[cIndex+6],colors[cIndex+13]=colors[cIndex+7],colors[cIndex+14]=colors[cIndex+8],colors[cIndex+15]=colorsMap[cs[offset]],colors[cIndex+16]=colorsMap[cs[offset]+1],colors[cIndex+17]=colorsMap[cs[offset]+2],pIndex+=12,cIndex+=18;break;case"triangles":for(var j=0,jj=ps.length;j<jj;j++)coords[pIndex]=coordsMap[ps[j]],coords[pIndex+1]=coordsMap[ps[j]+1],colors[cIndex]=colorsMap[cs[j]],colors[cIndex+1]=colorsMap[cs[j]+1],colors[cIndex+2]=colorsMap[cs[j]+2],pIndex+=2,cIndex+=3}}backgroundColor?gl.clearColor(backgroundColor[0]/255,backgroundColor[1]/255,backgroundColor[2]/255,1):gl.clearColor(0,0,0,0),gl.clear(gl.COLOR_BUFFER_BIT);var coordsBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,coordsBuffer),gl.bufferData(gl.ARRAY_BUFFER,coords,gl.STATIC_DRAW),gl.enableVertexAttribArray(cache.positionLocation),gl.vertexAttribPointer(cache.positionLocation,2,gl.FLOAT,!1,0,0);var colorsBuffer=gl.createBuffer();return gl.bindBuffer(gl.ARRAY_BUFFER,colorsBuffer),gl.bufferData(gl.ARRAY_BUFFER,colors,gl.STATIC_DRAW),gl.enableVertexAttribArray(cache.colorLocation),gl.vertexAttribPointer(cache.colorLocation,3,gl.UNSIGNED_BYTE,!1,0,0),gl.uniform2f(cache.scaleLocation,context.scaleX,context.scaleY),gl.uniform2f(cache.offsetLocation,context.offsetX,context.offsetY),gl.drawArrays(gl.TRIANGLES,0,count),gl.flush(),gl.deleteBuffer(coordsBuffer),gl.deleteBuffer(colorsBuffer),canvas},cleanup(){smaskCache&&smaskCache.canvas&&(smaskCache.canvas.width=0,smaskCache.canvas.height=0),figuresCache&&figuresCache.canvas&&(figuresCache.canvas.width=0,figuresCache.canvas.height=0),smaskCache=null,figuresCache=null}}}()},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderTextLayer=void 0;var _util=__w_pdfjs_require__(1),renderTextLayer=function renderTextLayerClosure(){var NonWhitespaceRegexp=/\S/;function appendText(task,geom,styles){var textDiv=document.createElement("span"),textDivProperties={angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if(task._textDivs.push(textDiv),function isAllWhitespace(str){return!NonWhitespaceRegexp.test(str)}(geom.str))return textDivProperties.isWhitespace=!0,void task._textDivProperties.set(textDiv,textDivProperties);var tx=_util.Util.transform(task._viewport.transform,geom.transform),angle=Math.atan2(tx[1],tx[0]),style=styles[geom.fontName];style.vertical&&(angle+=Math.PI/2);var fontHeight=Math.sqrt(tx[2]*tx[2]+tx[3]*tx[3]),fontAscent=fontHeight;let left,top;if(style.ascent?fontAscent=style.ascent*fontAscent:style.descent&&(fontAscent=(1+style.descent)*fontAscent),0===angle?(left=tx[4],top=tx[5]-fontAscent):(left=tx[4]+fontAscent*Math.sin(angle),top=tx[5]-fontAscent*Math.cos(angle)),textDiv.style.left=`${left}px`,textDiv.style.top=`${top}px`,textDiv.style.fontSize=`${fontHeight}px`,textDiv.style.fontFamily=style.fontFamily,textDiv.textContent=geom.str,task._fontInspectorEnabled&&(textDiv.dataset.fontName=geom.fontName),0!==angle&&(textDivProperties.angle=angle*(180/Math.PI)),geom.str.length>1&&(style.vertical?textDivProperties.canvasWidth=geom.height*task._viewport.scale:textDivProperties.canvasWidth=geom.width*task._viewport.scale),task._textDivProperties.set(textDiv,textDivProperties),task._textContentStream&&task._layoutText(textDiv),task._enhanceTextSelection){var angleCos=1,angleSin=0;0!==angle&&(angleCos=Math.cos(angle),angleSin=Math.sin(angle));var m,b,divWidth=(style.vertical?geom.height:geom.width)*task._viewport.scale,divHeight=fontHeight;0!==angle?(m=[angleCos,angleSin,-angleSin,angleCos,left,top],b=_util.Util.getAxialAlignedBoundingBox([0,0,divWidth,divHeight],m)):b=[left,top,left+divWidth,top+divHeight],task._bounds.push({left:b[0],top:b[1],right:b[2],bottom:b[3],div:textDiv,size:[divWidth,divHeight],m:m})}}function render(task){if(!task._canceled){var textDivs=task._textDivs,capability=task._capability,textDivsLength=textDivs.length;if(textDivsLength>1e5)return task._renderingDone=!0,void capability.resolve();if(!task._textContentStream)for(var i=0;i<textDivsLength;i++)task._layoutText(textDivs[i]);task._renderingDone=!0,capability.resolve()}}function expand(task){for(var bounds=task._bounds,viewport=task._viewport,expanded=function expandBounds(width,height,boxes){var bounds=boxes.map((function(box,i){return{x1:box.left,y1:box.top,x2:box.right,y2:box.bottom,index:i,x1New:void 0,x2New:void 0}}));expandBoundsLTR(width,bounds);var expanded=new Array(boxes.length);return bounds.forEach((function(b){var i=b.index;expanded[i]={left:b.x1New,top:0,right:b.x2New,bottom:0}})),boxes.map((function(box,i){var e=expanded[i],b=bounds[i];b.x1=box.top,b.y1=width-e.right,b.x2=box.bottom,b.y2=width-e.left,b.index=i,b.x1New=void 0,b.x2New=void 0})),expandBoundsLTR(height,bounds),bounds.forEach((function(b){var i=b.index;expanded[i].top=b.x1New,expanded[i].bottom=b.x2New})),expanded}(viewport.width,viewport.height,bounds),i=0;i<expanded.length;i++){var div=bounds[i].div,divProperties=task._textDivProperties.get(div);if(0!==divProperties.angle){var e=expanded[i],b=bounds[i],m=b.m,c=m[0],s=m[1],points=[[0,0],[0,b.size[1]],[b.size[0],0],b.size],ts=new Float64Array(64);points.forEach((function(p,i){var t=_util.Util.applyTransform(p,m);ts[i+0]=c&&(e.left-t[0])/c,ts[i+4]=s&&(e.top-t[1])/s,ts[i+8]=c&&(e.right-t[0])/c,ts[i+12]=s&&(e.bottom-t[1])/s,ts[i+16]=s&&(e.left-t[0])/-s,ts[i+20]=c&&(e.top-t[1])/c,ts[i+24]=s&&(e.right-t[0])/-s,ts[i+28]=c&&(e.bottom-t[1])/c,ts[i+32]=c&&(e.left-t[0])/-c,ts[i+36]=s&&(e.top-t[1])/-s,ts[i+40]=c&&(e.right-t[0])/-c,ts[i+44]=s&&(e.bottom-t[1])/-s,ts[i+48]=s&&(e.left-t[0])/s,ts[i+52]=c&&(e.top-t[1])/-c,ts[i+56]=s&&(e.right-t[0])/s,ts[i+60]=c&&(e.bottom-t[1])/-c}));var findPositiveMin=function(ts,offset,count){for(var result=0,i=0;i<count;i++){var t=ts[offset++];t>0&&(result=result?Math.min(t,result):t)}return result},boxScale=1+Math.min(Math.abs(c),Math.abs(s));divProperties.paddingLeft=findPositiveMin(ts,32,16)/boxScale,divProperties.paddingTop=findPositiveMin(ts,48,16)/boxScale,divProperties.paddingRight=findPositiveMin(ts,0,16)/boxScale,divProperties.paddingBottom=findPositiveMin(ts,16,16)/boxScale,task._textDivProperties.set(div,divProperties)}else divProperties.paddingLeft=bounds[i].left-expanded[i].left,divProperties.paddingTop=bounds[i].top-expanded[i].top,divProperties.paddingRight=expanded[i].right-bounds[i].right,divProperties.paddingBottom=expanded[i].bottom-bounds[i].bottom,task._textDivProperties.set(div,divProperties)}}function expandBoundsLTR(width,bounds){bounds.sort((function(a,b){return a.x1-b.x1||a.index-b.index}));var horizon=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];bounds.forEach((function(boundary){for(var i=0;i<horizon.length&&horizon[i].end<=boundary.y1;)i++;for(var horizonPart,affectedBoundary,j=horizon.length-1;j>=0&&horizon[j].start>=boundary.y2;)j--;var q,k,maxXNew=-1/0;for(q=i;q<=j;q++){var xNew;(xNew=(affectedBoundary=(horizonPart=horizon[q]).boundary).x2>boundary.x1?affectedBoundary.index>boundary.index?affectedBoundary.x1New:boundary.x1:void 0===affectedBoundary.x2New?(affectedBoundary.x2+boundary.x1)/2:affectedBoundary.x2New)>maxXNew&&(maxXNew=xNew)}for(boundary.x1New=maxXNew,q=i;q<=j;q++)void 0===(affectedBoundary=(horizonPart=horizon[q]).boundary).x2New?affectedBoundary.x2>boundary.x1?affectedBoundary.index>boundary.index&&(affectedBoundary.x2New=affectedBoundary.x2):affectedBoundary.x2New=maxXNew:affectedBoundary.x2New>maxXNew&&(affectedBoundary.x2New=Math.max(maxXNew,affectedBoundary.x2));var changedHorizon=[],lastBoundary=null;for(q=i;q<=j;q++){var useBoundary=(affectedBoundary=(horizonPart=horizon[q]).boundary).x2>boundary.x2?affectedBoundary:boundary;lastBoundary===useBoundary?changedHorizon[changedHorizon.length-1].end=horizonPart.end:(changedHorizon.push({start:horizonPart.start,end:horizonPart.end,boundary:useBoundary}),lastBoundary=useBoundary)}for(horizon[i].start<boundary.y1&&(changedHorizon[0].start=boundary.y1,changedHorizon.unshift({start:horizon[i].start,end:boundary.y1,boundary:horizon[i].boundary})),boundary.y2<horizon[j].end&&(changedHorizon[changedHorizon.length-1].end=boundary.y2,changedHorizon.push({start:boundary.y2,end:horizon[j].end,boundary:horizon[j].boundary})),q=i;q<=j;q++)if(void 0===(affectedBoundary=(horizonPart=horizon[q]).boundary).x2New){var used=!1;for(k=i-1;!used&&k>=0&&horizon[k].start>=affectedBoundary.y1;k--)used=horizon[k].boundary===affectedBoundary;for(k=j+1;!used&&k<horizon.length&&horizon[k].end<=affectedBoundary.y2;k++)used=horizon[k].boundary===affectedBoundary;for(k=0;!used&&k<changedHorizon.length;k++)used=changedHorizon[k].boundary===affectedBoundary;used||(affectedBoundary.x2New=maxXNew)}Array.prototype.splice.apply(horizon,[i,j-i+1].concat(changedHorizon))})),horizon.forEach((function(horizonPart){var affectedBoundary=horizonPart.boundary;void 0===affectedBoundary.x2New&&(affectedBoundary.x2New=Math.max(width,affectedBoundary.x2))}))}function TextLayerRenderTask({textContent:textContent,textContentStream:textContentStream,container:container,viewport:viewport,textDivs:textDivs,textContentItemsStr:textContentItemsStr,enhanceTextSelection:enhanceTextSelection}){this._textContent=textContent,this._textContentStream=textContentStream,this._container=container,this._viewport=viewport,this._textDivs=textDivs||[],this._textContentItemsStr=textContentItemsStr||[],this._enhanceTextSelection=!!enhanceTextSelection,this._fontInspectorEnabled=!(!globalThis.FontInspector||!globalThis.FontInspector.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,_util.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally((()=>{this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)})).catch((()=>{}))}return TextLayerRenderTask.prototype={get promise(){return this._capability.promise},cancel:function TextLayer_cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new _util.AbortException("TextLayer task cancelled.")),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))},_processItems(items,styleCache){for(let i=0,len=items.length;i<len;i++)this._textContentItemsStr.push(items[i].str),appendText(this,items[i],styleCache)},_layoutText(textDiv){const textDivProperties=this._textDivProperties.get(textDiv);if(textDivProperties.isWhitespace)return;let transform="";if(0!==textDivProperties.canvasWidth){const{fontSize:fontSize,fontFamily:fontFamily}=textDiv.style;fontSize===this._layoutTextLastFontSize&&fontFamily===this._layoutTextLastFontFamily||(this._layoutTextCtx.font=`${fontSize} ${fontFamily}`,this._layoutTextLastFontSize=fontSize,this._layoutTextLastFontFamily=fontFamily);const{width:width}=this._layoutTextCtx.measureText(textDiv.textContent);width>0&&(textDivProperties.scale=textDivProperties.canvasWidth/width,transform=`scaleX(${textDivProperties.scale})`)}0!==textDivProperties.angle&&(transform=`rotate(${textDivProperties.angle}deg) ${transform}`),transform.length>0&&(this._enhanceTextSelection&&(textDivProperties.originalTransform=transform),textDiv.style.transform=transform),this._textDivProperties.set(textDiv,textDivProperties),this._container.appendChild(textDiv)},_render:function TextLayer_render(timeout){const capability=(0,_util.createPromiseCapability)();let styleCache=Object.create(null);const canvas=document.createElement("canvas");if(canvas.mozOpaque=!0,this._layoutTextCtx=canvas.getContext("2d",{alpha:!1}),this._textContent){const textItems=this._textContent.items,textStyles=this._textContent.styles;this._processItems(textItems,textStyles),capability.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const pump=()=>{this._reader.read().then((({value:value,done:done})=>{done?capability.resolve():(Object.assign(styleCache,value.styles),this._processItems(value.items,styleCache),pump())}),capability.reject)};this._reader=this._textContentStream.getReader(),pump()}}capability.promise.then((()=>{styleCache=null,timeout?this._renderTimer=setTimeout((()=>{render(this),this._renderTimer=null}),timeout):render(this)}),this._capability.reject)},expandTextDivs:function TextLayer_expandTextDivs(expandDivs){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(expand(this),this._bounds=null);const transformBuf=[],paddingBuf=[];for(var i=0,ii=this._textDivs.length;i<ii;i++){const div=this._textDivs[i],divProps=this._textDivProperties.get(div);divProps.isWhitespace||(expandDivs?(transformBuf.length=0,paddingBuf.length=0,divProps.originalTransform&&transformBuf.push(divProps.originalTransform),divProps.paddingTop>0?(paddingBuf.push(`${divProps.paddingTop}px`),transformBuf.push(`translateY(${-divProps.paddingTop}px)`)):paddingBuf.push(0),divProps.paddingRight>0?paddingBuf.push(divProps.paddingRight/divProps.scale+"px"):paddingBuf.push(0),divProps.paddingBottom>0?paddingBuf.push(`${divProps.paddingBottom}px`):paddingBuf.push(0),divProps.paddingLeft>0?(paddingBuf.push(divProps.paddingLeft/divProps.scale+"px"),transformBuf.push(`translateX(${-divProps.paddingLeft/divProps.scale}px)`)):paddingBuf.push(0),div.style.padding=paddingBuf.join(" "),transformBuf.length&&(div.style.transform=transformBuf.join(" "))):(div.style.padding=null,div.style.transform=divProps.originalTransform))}}},function renderTextLayer(renderParameters){var task=new TextLayerRenderTask({textContent:renderParameters.textContent,textContentStream:renderParameters.textContentStream,container:renderParameters.container,viewport:renderParameters.viewport,textDivs:renderParameters.textDivs,textContentItemsStr:renderParameters.textContentItemsStr,enhanceTextSelection:renderParameters.enhanceTextSelection});return task._render(renderParameters.timeout),task}}();exports.renderTextLayer=renderTextLayer},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnnotationLayer=void 0;var _display_utils=__w_pdfjs_require__(4),_util=__w_pdfjs_require__(1);class AnnotationElementFactory{static create(parameters){switch(parameters.data.annotationType){case _util.AnnotationType.LINK:return new LinkAnnotationElement(parameters);case _util.AnnotationType.TEXT:return new TextAnnotationElement(parameters);case _util.AnnotationType.WIDGET:switch(parameters.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(parameters);case"Btn":return parameters.data.radioButton?new RadioButtonWidgetAnnotationElement(parameters):parameters.data.checkBox?new CheckboxWidgetAnnotationElement(parameters):new PushButtonWidgetAnnotationElement(parameters);case"Ch":return new ChoiceWidgetAnnotationElement(parameters)}return new WidgetAnnotationElement(parameters);case _util.AnnotationType.POPUP:return new PopupAnnotationElement(parameters);case _util.AnnotationType.FREETEXT:return new FreeTextAnnotationElement(parameters);case _util.AnnotationType.LINE:return new LineAnnotationElement(parameters);case _util.AnnotationType.SQUARE:return new SquareAnnotationElement(parameters);case _util.AnnotationType.CIRCLE:return new CircleAnnotationElement(parameters);case _util.AnnotationType.POLYLINE:return new PolylineAnnotationElement(parameters);case _util.AnnotationType.CARET:return new CaretAnnotationElement(parameters);case _util.AnnotationType.INK:return new InkAnnotationElement(parameters);case _util.AnnotationType.POLYGON:return new PolygonAnnotationElement(parameters);case _util.AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(parameters);case _util.AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(parameters);case _util.AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(parameters);case _util.AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(parameters);case _util.AnnotationType.STAMP:return new StampAnnotationElement(parameters);case _util.AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(parameters);default:return new AnnotationElement(parameters)}}}class AnnotationElement{constructor(parameters,isRenderable=!1,ignoreBorder=!1){this.isRenderable=isRenderable,this.data=parameters.data,this.layer=parameters.layer,this.page=parameters.page,this.viewport=parameters.viewport,this.linkService=parameters.linkService,this.downloadManager=parameters.downloadManager,this.imageResourcesPath=parameters.imageResourcesPath,this.renderInteractiveForms=parameters.renderInteractiveForms,this.svgFactory=parameters.svgFactory,isRenderable&&(this.container=this._createContainer(ignoreBorder))}_createContainer(ignoreBorder=!1){const data=this.data,page=this.page,viewport=this.viewport,container=document.createElement("section");let width=data.rect[2]-data.rect[0],height=data.rect[3]-data.rect[1];container.setAttribute("data-annotation-id",data.id);const rect=_util.Util.normalizeRect([data.rect[0],page.view[3]-data.rect[1]+page.view[1],data.rect[2],page.view[3]-data.rect[3]+page.view[1]]);if(container.style.transform=`matrix(${viewport.transform.join(",")})`,container.style.transformOrigin=`-${rect[0]}px -${rect[1]}px`,!ignoreBorder&&data.borderStyle.width>0){container.style.borderWidth=`${data.borderStyle.width}px`,data.borderStyle.style!==_util.AnnotationBorderStyleType.UNDERLINE&&(width-=2*data.borderStyle.width,height-=2*data.borderStyle.width);const horizontalRadius=data.borderStyle.horizontalCornerRadius,verticalRadius=data.borderStyle.verticalCornerRadius;if(horizontalRadius>0||verticalRadius>0){const radius=`${horizontalRadius}px / ${verticalRadius}px`;container.style.borderRadius=radius}switch(data.borderStyle.style){case _util.AnnotationBorderStyleType.SOLID:container.style.borderStyle="solid";break;case _util.AnnotationBorderStyleType.DASHED:container.style.borderStyle="dashed";break;case _util.AnnotationBorderStyleType.BEVELED:(0,_util.warn)("Unimplemented border style: beveled");break;case _util.AnnotationBorderStyleType.INSET:(0,_util.warn)("Unimplemented border style: inset");break;case _util.AnnotationBorderStyleType.UNDERLINE:container.style.borderBottomStyle="solid"}data.color?container.style.borderColor=_util.Util.makeCssRgb(0|data.color[0],0|data.color[1],0|data.color[2]):container.style.borderWidth=0}return container.style.left=`${rect[0]}px`,container.style.top=`${rect[1]}px`,container.style.width=`${width}px`,container.style.height=`${height}px`,container}_createPopup(container,trigger,data){trigger||((trigger=document.createElement("div")).style.height=container.style.height,trigger.style.width=container.style.width,container.appendChild(trigger));const popup=new PopupElement({container:container,trigger:trigger,color:data.color,title:data.title,modificationDate:data.modificationDate,contents:data.contents,hideWrapper:!0}).render();popup.style.left=container.style.width,container.appendChild(popup)}render(){(0,_util.unreachable)("Abstract method `AnnotationElement.render` called")}}class LinkAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,!!(parameters.data.url||parameters.data.dest||parameters.data.action))}render(){this.container.className="linkAnnotation";const{data:data,linkService:linkService}=this,link=document.createElement("a");return data.url?(0,_display_utils.addLinkAttributes)(link,{url:data.url,target:data.newWindow?_display_utils.LinkTarget.BLANK:linkService.externalLinkTarget,rel:linkService.externalLinkRel,enabled:linkService.externalLinkEnabled}):data.action?this._bindNamedAction(link,data.action):this._bindLink(link,data.dest),this.container.appendChild(link),this.container}_bindLink(link,destination){link.href=this.linkService.getDestinationHash(destination),link.onclick=()=>(destination&&this.linkService.navigateTo(destination),!1),destination&&(link.className="internalLink")}_bindNamedAction(link,action){link.href=this.linkService.getAnchorUrl(""),link.onclick=()=>(this.linkService.executeNamedAction(action),!1),link.className="internalLink"}}class TextAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents))}render(){this.container.className="textAnnotation";const image=document.createElement("img");return image.style.height=this.container.style.height,image.style.width=this.container.style.width,image.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",image.alt="[{{type}} Annotation]",image.dataset.l10nId="text_annotation_type",image.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(this.container,image,this.data),this.container.appendChild(image),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,parameters.renderInteractiveForms||!parameters.data.hasAppearance&&!!parameters.data.fieldValue)}render(){const TEXT_ALIGNMENT=["left","center","right"];this.container.className="textWidgetAnnotation";let element=null;if(this.renderInteractiveForms){if(this.data.multiLine?(element=document.createElement("textarea"),element.textContent=this.data.fieldValue):(element=document.createElement("input"),element.type="text",element.setAttribute("value",this.data.fieldValue)),element.disabled=this.data.readOnly,null!==this.data.maxLen&&(element.maxLength=this.data.maxLen),this.data.comb){const combWidth=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;element.classList.add("comb"),element.style.letterSpacing=`calc(${combWidth}px - 1ch)`}}else{element=document.createElement("div"),element.textContent=this.data.fieldValue,element.style.verticalAlign="middle",element.style.display="table-cell";let font=null;this.data.fontRefName&&this.page.commonObjs.has(this.data.fontRefName)&&(font=this.page.commonObjs.get(this.data.fontRefName)),this._setTextStyle(element,font)}return null!==this.data.textAlignment&&(element.style.textAlign=TEXT_ALIGNMENT[this.data.textAlignment]),this.container.appendChild(element),this.container}_setTextStyle(element,font){const style=element.style;if(style.fontSize=`${this.data.fontSize}px`,style.direction=this.data.fontDirection<0?"rtl":"ltr",!font)return;let bold="normal";font.black?bold="900":font.bold&&(bold="bold"),style.fontWeight=bold,style.fontStyle=font.italic?"italic":"normal";const fontFamily=font.loadedName?`"${font.loadedName}", `:"",fallbackName=font.fallbackName||"Helvetica, sans-serif";style.fontFamily=fontFamily+fallbackName}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,parameters.renderInteractiveForms)}render(){this.container.className="buttonWidgetAnnotation checkBox";const element=document.createElement("input");return element.disabled=this.data.readOnly,element.type="checkbox",this.data.fieldValue&&"Off"!==this.data.fieldValue&&element.setAttribute("checked",!0),this.container.appendChild(element),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,parameters.renderInteractiveForms)}render(){this.container.className="buttonWidgetAnnotation radioButton";const element=document.createElement("input");return element.disabled=this.data.readOnly,element.type="radio",element.name=this.data.fieldName,this.data.fieldValue===this.data.buttonValue&&element.setAttribute("checked",!0),this.container.appendChild(element),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{render(){const container=super.render();return container.className="buttonWidgetAnnotation pushButton",container}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,parameters.renderInteractiveForms)}render(){this.container.className="choiceWidgetAnnotation";const selectElement=document.createElement("select");selectElement.disabled=this.data.readOnly,this.data.combo||(selectElement.size=this.data.options.length,this.data.multiSelect&&(selectElement.multiple=!0));for(const option of this.data.options){const optionElement=document.createElement("option");optionElement.textContent=option.displayValue,optionElement.value=option.exportValue,this.data.fieldValue.includes(option.displayValue)&&optionElement.setAttribute("selected",!0),selectElement.appendChild(optionElement)}return this.container.appendChild(selectElement),this.container}}class PopupAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,!(!parameters.data.title&&!parameters.data.contents))}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const selector=`[data-annotation-id="${this.data.parentId}"]`,parentElement=this.layer.querySelector(selector);if(!parentElement)return this.container;const popup=new PopupElement({container:this.container,trigger:parentElement,color:this.data.color,title:this.data.title,modificationDate:this.data.modificationDate,contents:this.data.contents}),parentLeft=parseFloat(parentElement.style.left),parentWidth=parseFloat(parentElement.style.width);return this.container.style.transformOrigin=`-${parentLeft+parentWidth}px -${parentElement.style.top}`,this.container.style.left=`${parentLeft+parentWidth}px`,this.container.appendChild(popup.render()),this.container}}class PopupElement{constructor(parameters){this.container=parameters.container,this.trigger=parameters.trigger,this.color=parameters.color,this.title=parameters.title,this.modificationDate=parameters.modificationDate,this.contents=parameters.contents,this.hideWrapper=parameters.hideWrapper||!1,this.pinned=!1}render(){const wrapper=document.createElement("div");wrapper.className="popupWrapper",this.hideElement=this.hideWrapper?wrapper:this.container,this.hideElement.setAttribute("hidden",!0);const popup=document.createElement("div");popup.className="popup";const color=this.color;if(color){const r=.7*(255-color[0])+color[0],g=.7*(255-color[1])+color[1],b=.7*(255-color[2])+color[2];popup.style.backgroundColor=_util.Util.makeCssRgb(0|r,0|g,0|b)}const title=document.createElement("h1");title.textContent=this.title,popup.appendChild(title);const dateObject=_display_utils.PDFDateString.toDateObject(this.modificationDate);if(dateObject){const modificationDate=document.createElement("span");modificationDate.textContent="{{date}}, {{time}}",modificationDate.dataset.l10nId="annotation_date_string",modificationDate.dataset.l10nArgs=JSON.stringify({date:dateObject.toLocaleDateString(),time:dateObject.toLocaleTimeString()}),popup.appendChild(modificationDate)}const contents=this._formatContents(this.contents);return popup.appendChild(contents),this.trigger.addEventListener("click",this._toggle.bind(this)),this.trigger.addEventListener("mouseover",this._show.bind(this,!1)),this.trigger.addEventListener("mouseout",this._hide.bind(this,!1)),popup.addEventListener("click",this._hide.bind(this,!0)),wrapper.appendChild(popup),wrapper}_formatContents(contents){const p=document.createElement("p"),lines=contents.split(/(?:\r\n?|\n)/);for(let i=0,ii=lines.length;i<ii;++i){const line=lines[i];p.appendChild(document.createTextNode(line)),i<ii-1&&p.appendChild(document.createElement("br"))}return p}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(pin=!1){pin&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)}_hide(unpin=!0){unpin&&(this.pinned=!1),this.hideElement.hasAttribute("hidden")||this.pinned||(this.hideElement.setAttribute("hidden",!0),this.container.style.zIndex-=1)}}class FreeTextAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents),!0)}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class LineAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents),!0)}render(){this.container.className="lineAnnotation";const data=this.data,width=data.rect[2]-data.rect[0],height=data.rect[3]-data.rect[1],svg=this.svgFactory.create(width,height),line=this.svgFactory.createElement("svg:line");return line.setAttribute("x1",data.rect[2]-data.lineCoordinates[0]),line.setAttribute("y1",data.rect[3]-data.lineCoordinates[1]),line.setAttribute("x2",data.rect[2]-data.lineCoordinates[2]),line.setAttribute("y2",data.rect[3]-data.lineCoordinates[3]),line.setAttribute("stroke-width",data.borderStyle.width||1),line.setAttribute("stroke","transparent"),svg.appendChild(line),this.container.append(svg),this._createPopup(this.container,line,data),this.container}}class SquareAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents),!0)}render(){this.container.className="squareAnnotation";const data=this.data,width=data.rect[2]-data.rect[0],height=data.rect[3]-data.rect[1],svg=this.svgFactory.create(width,height),borderWidth=data.borderStyle.width,square=this.svgFactory.createElement("svg:rect");return square.setAttribute("x",borderWidth/2),square.setAttribute("y",borderWidth/2),square.setAttribute("width",width-borderWidth),square.setAttribute("height",height-borderWidth),square.setAttribute("stroke-width",borderWidth||1),square.setAttribute("stroke","transparent"),square.setAttribute("fill","none"),svg.appendChild(square),this.container.append(svg),this._createPopup(this.container,square,data),this.container}}class CircleAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents),!0)}render(){this.container.className="circleAnnotation";const data=this.data,width=data.rect[2]-data.rect[0],height=data.rect[3]-data.rect[1],svg=this.svgFactory.create(width,height),borderWidth=data.borderStyle.width,circle=this.svgFactory.createElement("svg:ellipse");return circle.setAttribute("cx",width/2),circle.setAttribute("cy",height/2),circle.setAttribute("rx",width/2-borderWidth/2),circle.setAttribute("ry",height/2-borderWidth/2),circle.setAttribute("stroke-width",borderWidth||1),circle.setAttribute("stroke","transparent"),circle.setAttribute("fill","none"),svg.appendChild(circle),this.container.append(svg),this._createPopup(this.container,circle,data),this.container}}class PolylineAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents),!0),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const data=this.data,width=data.rect[2]-data.rect[0],height=data.rect[3]-data.rect[1],svg=this.svgFactory.create(width,height);let points=[];for(const coordinate of data.vertices){const x=coordinate.x-data.rect[0],y=data.rect[3]-coordinate.y;points.push(x+","+y)}points=points.join(" ");const polyline=this.svgFactory.createElement(this.svgElementName);return polyline.setAttribute("points",points),polyline.setAttribute("stroke-width",data.borderStyle.width||1),polyline.setAttribute("stroke","transparent"),polyline.setAttribute("fill","none"),svg.appendChild(polyline),this.container.append(svg),this._createPopup(this.container,polyline,data),this.container}}class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(parameters){super(parameters),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents),!0)}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class InkAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents),!0),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const data=this.data,width=data.rect[2]-data.rect[0],height=data.rect[3]-data.rect[1],svg=this.svgFactory.create(width,height);for(const inkList of data.inkLists){let points=[];for(const coordinate of inkList){const x=coordinate.x-data.rect[0],y=data.rect[3]-coordinate.y;points.push(`${x},${y}`)}points=points.join(" ");const polyline=this.svgFactory.createElement(this.svgElementName);polyline.setAttribute("points",points),polyline.setAttribute("stroke-width",data.borderStyle.width||1),polyline.setAttribute("stroke","transparent"),polyline.setAttribute("fill","none"),this._createPopup(this.container,polyline,data),svg.appendChild(polyline)}return this.container.append(svg),this.container}}class HighlightAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents),!0)}render(){return this.container.className="highlightAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents),!0)}render(){return this.container.className="underlineAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents),!0)}render(){return this.container.className="squigglyAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents),!0)}render(){return this.container.className="strikeoutAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class StampAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents),!0)}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class FileAttachmentAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,!0);const{filename:filename,content:content}=this.data.file;this.filename=(0,_display_utils.getFilenameFromUrl)(filename),this.content=content,this.linkService.eventBus&&this.linkService.eventBus.dispatch("fileattachmentannotation",{source:this,id:(0,_util.stringToPDFString)(filename),filename:filename,content:content})}render(){this.container.className="fileAttachmentAnnotation";const trigger=document.createElement("div");return trigger.style.height=this.container.style.height,trigger.style.width=this.container.style.width,trigger.addEventListener("dblclick",this._download.bind(this)),this.data.hasPopup||!this.data.title&&!this.data.contents||this._createPopup(this.container,trigger,this.data),this.container.appendChild(trigger),this.container}_download(){this.downloadManager?this.downloadManager.downloadData(this.content,this.filename,""):(0,_util.warn)("Download cannot be started due to unavailable download manager")}}exports.AnnotationLayer=class AnnotationLayer{static render(parameters){const sortedAnnotations=[],popupAnnotations=[];for(const data of parameters.annotations)data&&(data.annotationType!==_util.AnnotationType.POPUP?sortedAnnotations.push(data):popupAnnotations.push(data));popupAnnotations.length&&sortedAnnotations.push(...popupAnnotations);for(const data of sortedAnnotations){const element=AnnotationElementFactory.create({data:data,layer:parameters.div,page:parameters.page,viewport:parameters.viewport,linkService:parameters.linkService,downloadManager:parameters.downloadManager,imageResourcesPath:parameters.imageResourcesPath||"",renderInteractiveForms:parameters.renderInteractiveForms||!1,svgFactory:new _display_utils.DOMSVGFactory});element.isRenderable&&parameters.div.appendChild(element.render())}}static update(parameters){for(const data of parameters.annotations){const element=parameters.div.querySelector(`[data-annotation-id="${data.id}"]`);element&&(element.style.transform=`matrix(${parameters.viewport.transform.join(",")})`)}parameters.div.removeAttribute("hidden")}}},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SVGGraphics=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(4),_is_node=__w_pdfjs_require__(7);let SVGGraphics=function(){throw new Error("Not implemented: SVGGraphics")};exports.SVGGraphics=SVGGraphics;{const SVG_DEFAULTS={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},XML_NS="http://www.w3.org/XML/1998/namespace",XLINK_NS="http://www.w3.org/1999/xlink",LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],convertImgDataToPng=function(){const PNG_HEADER=new Uint8Array([137,80,78,71,13,10,26,10]),crcTable=new Int32Array(256);for(let i=0;i<256;i++){let c=i;for(let h=0;h<8;h++)c=1&c?3988292384^c>>1&2147483647:c>>1&2147483647;crcTable[i]=c}function writePngChunk(type,body,data,offset){let p=offset;const len=body.length;data[p]=len>>24&255,data[p+1]=len>>16&255,data[p+2]=len>>8&255,data[p+3]=255&len,p+=4,data[p]=255&type.charCodeAt(0),data[p+1]=255&type.charCodeAt(1),data[p+2]=255&type.charCodeAt(2),data[p+3]=255&type.charCodeAt(3),p+=4,data.set(body,p),p+=body.length;const crc=function crc32(data,start,end){let crc=-1;for(let i=start;i<end;i++){const a=255&(crc^data[i]);crc=crc>>>8^crcTable[a]}return-1^crc}(data,offset+4,p);data[p]=crc>>24&255,data[p+1]=crc>>16&255,data[p+2]=crc>>8&255,data[p+3]=255&crc}function deflateSyncUncompressed(literals){let len=literals.length;const deflateBlocks=Math.ceil(len/65535),idat=new Uint8Array(2+len+5*deflateBlocks+4);let pi=0;idat[pi++]=120,idat[pi++]=156;let pos=0;for(;len>65535;)idat[pi++]=0,idat[pi++]=255,idat[pi++]=255,idat[pi++]=0,idat[pi++]=0,idat.set(literals.subarray(pos,pos+65535),pi),pi+=65535,pos+=65535,len-=65535;idat[pi++]=1,idat[pi++]=255&len,idat[pi++]=len>>8&255,idat[pi++]=255&~len,idat[pi++]=(65535&~len)>>8&255,idat.set(literals.subarray(pos),pi),pi+=literals.length-pos;const adler=function adler32(data,start,end){let a=1,b=0;for(let i=start;i<end;++i)a=(a+(255&data[i]))%65521,b=(b+a)%65521;return b<<16|a}(literals,0,literals.length);return idat[pi++]=adler>>24&255,idat[pi++]=adler>>16&255,idat[pi++]=adler>>8&255,idat[pi++]=255&adler,idat}function encode(imgData,kind,forceDataSchema,isMask){const width=imgData.width,height=imgData.height;let bitDepth,colorType,lineSize;const bytes=imgData.data;switch(kind){case _util.ImageKind.GRAYSCALE_1BPP:colorType=0,bitDepth=1,lineSize=width+7>>3;break;case _util.ImageKind.RGB_24BPP:colorType=2,bitDepth=8,lineSize=3*width;break;case _util.ImageKind.RGBA_32BPP:colorType=6,bitDepth=8,lineSize=4*width;break;default:throw new Error("invalid format")}const literals=new Uint8Array((1+lineSize)*height);let offsetLiterals=0,offsetBytes=0;for(let y=0;y<height;++y)literals[offsetLiterals++]=0,literals.set(bytes.subarray(offsetBytes,offsetBytes+lineSize),offsetLiterals),offsetBytes+=lineSize,offsetLiterals+=lineSize;if(kind===_util.ImageKind.GRAYSCALE_1BPP&&isMask){offsetLiterals=0;for(let y=0;y<height;y++){offsetLiterals++;for(let i=0;i<lineSize;i++)literals[offsetLiterals++]^=255}}const ihdr=new Uint8Array([width>>24&255,width>>16&255,width>>8&255,255&width,height>>24&255,height>>16&255,height>>8&255,255&height,bitDepth,colorType,0,0,0]),idat=function deflateSync(literals){if(!_is_node.isNodeJS)return deflateSyncUncompressed(literals);try{let input;input=parseInt(process.versions.node)>=8?literals:Buffer.from(literals);const output=__webpack_require__(4301).deflateSync(input,{level:9});return output instanceof Uint8Array?output:new Uint8Array(output)}catch(e){(0,_util.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+e)}return deflateSyncUncompressed(literals)}(literals),pngLength=PNG_HEADER.length+36+ihdr.length+idat.length,data=new Uint8Array(pngLength);let offset=0;return data.set(PNG_HEADER,offset),offset+=PNG_HEADER.length,writePngChunk("IHDR",ihdr,data,offset),offset+=12+ihdr.length,writePngChunk("IDATA",idat,data,offset),offset+=12+idat.length,writePngChunk("IEND",new Uint8Array(0),data,offset),(0,_util.createObjectURL)(data,"image/png",forceDataSchema)}return function convertImgDataToPng(imgData,forceDataSchema,isMask){return encode(imgData,void 0===imgData.kind?_util.ImageKind.GRAYSCALE_1BPP:imgData.kind,forceDataSchema,isMask)}}();class SVGExtraState{constructor(){this.fontSizeScale=1,this.fontWeight=SVG_DEFAULTS.fontWeight,this.fontSize=0,this.textMatrix=_util.IDENTITY_MATRIX,this.fontMatrix=_util.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=_util.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=SVG_DEFAULTS.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(x,y){this.x=x,this.y=y}}function opListToTree(opList){let opTree=[];const tmp=[];for(const opListElement of opList)"save"!==opListElement.fn?"restore"===opListElement.fn?opTree=tmp.pop():opTree.push(opListElement):(opTree.push({fnId:92,fn:"group",items:[]}),tmp.push(opTree),opTree=opTree[opTree.length-1].items);return opTree}function pf(value){if(Number.isInteger(value))return value.toString();const s=value.toFixed(10);let i=s.length-1;if("0"!==s[i])return s;do{i--}while("0"===s[i]);return s.substring(0,"."===s[i]?i:i+1)}function pm(m){if(0===m[4]&&0===m[5]){if(0===m[1]&&0===m[2])return 1===m[0]&&1===m[3]?"":`scale(${pf(m[0])} ${pf(m[3])})`;if(m[0]===m[3]&&m[1]===-m[2]){return`rotate(${pf(180*Math.acos(m[0])/Math.PI)})`}}else if(1===m[0]&&0===m[1]&&0===m[2]&&1===m[3])return`translate(${pf(m[4])} ${pf(m[5])})`;return`matrix(${pf(m[0])} ${pf(m[1])} ${pf(m[2])} ${pf(m[3])} ${pf(m[4])} ${pf(m[5])})`}let clipCount=0,maskCount=0,shadingCount=0;exports.SVGGraphics=SVGGraphics=class SVGGraphics{constructor(commonObjs,objs,forceDataSchema){this.svgFactory=new _display_utils.DOMSVGFactory,this.current=new SVGExtraState,this.transformMatrix=_util.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=commonObjs,this.objs=objs,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!forceDataSchema,this._operatorIdMapping=[];for(const op in _util.OPS)this._operatorIdMapping[_util.OPS[op]]=op}save(){this.transformStack.push(this.transformMatrix);const old=this.current;this.extraStack.push(old),this.current=old.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(items){this.save(),this.executeOpTree(items),this.restore()}loadDependencies(operatorList){const fnArray=operatorList.fnArray,argsArray=operatorList.argsArray;for(let i=0,ii=fnArray.length;i<ii;i++)if(fnArray[i]===_util.OPS.dependency)for(const obj of argsArray[i]){const objsPool=obj.startsWith("g_")?this.commonObjs:this.objs,promise=new Promise((resolve=>{objsPool.get(obj,resolve)}));this.current.dependencies.push(promise)}return Promise.all(this.current.dependencies)}transform(a,b,c,d,e,f){const transformMatrix=[a,b,c,d,e,f];this.transformMatrix=_util.Util.transform(this.transformMatrix,transformMatrix),this.tgrp=null}getSVG(operatorList,viewport){this.viewport=viewport;const svgElement=this._initialize(viewport);return this.loadDependencies(operatorList).then((()=>(this.transformMatrix=_util.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(operatorList)),svgElement)))}convertOpList(operatorList){const operatorIdMapping=this._operatorIdMapping,argsArray=operatorList.argsArray,fnArray=operatorList.fnArray,opList=[];for(let i=0,ii=fnArray.length;i<ii;i++){const fnId=fnArray[i];opList.push({fnId:fnId,fn:operatorIdMapping[fnId],args:argsArray[i]})}return opListToTree(opList)}executeOpTree(opTree){for(const opTreeElement of opTree){const fn=opTreeElement.fn,fnId=opTreeElement.fnId,args=opTreeElement.args;switch(0|fnId){case _util.OPS.beginText:this.beginText();break;case _util.OPS.dependency:break;case _util.OPS.setLeading:this.setLeading(args);break;case _util.OPS.setLeadingMoveText:this.setLeadingMoveText(args[0],args[1]);break;case _util.OPS.setFont:this.setFont(args);break;case _util.OPS.showText:case _util.OPS.showSpacedText:this.showText(args[0]);break;case _util.OPS.endText:this.endText();break;case _util.OPS.moveText:this.moveText(args[0],args[1]);break;case _util.OPS.setCharSpacing:this.setCharSpacing(args[0]);break;case _util.OPS.setWordSpacing:this.setWordSpacing(args[0]);break;case _util.OPS.setHScale:this.setHScale(args[0]);break;case _util.OPS.setTextMatrix:this.setTextMatrix(args[0],args[1],args[2],args[3],args[4],args[5]);break;case _util.OPS.setTextRise:this.setTextRise(args[0]);break;case _util.OPS.setTextRenderingMode:this.setTextRenderingMode(args[0]);break;case _util.OPS.setLineWidth:this.setLineWidth(args[0]);break;case _util.OPS.setLineJoin:this.setLineJoin(args[0]);break;case _util.OPS.setLineCap:this.setLineCap(args[0]);break;case _util.OPS.setMiterLimit:this.setMiterLimit(args[0]);break;case _util.OPS.setFillRGBColor:this.setFillRGBColor(args[0],args[1],args[2]);break;case _util.OPS.setStrokeRGBColor:this.setStrokeRGBColor(args[0],args[1],args[2]);break;case _util.OPS.setStrokeColorN:this.setStrokeColorN(args);break;case _util.OPS.setFillColorN:this.setFillColorN(args);break;case _util.OPS.shadingFill:this.shadingFill(args[0]);break;case _util.OPS.setDash:this.setDash(args[0],args[1]);break;case _util.OPS.setRenderingIntent:this.setRenderingIntent(args[0]);break;case _util.OPS.setFlatness:this.setFlatness(args[0]);break;case _util.OPS.setGState:this.setGState(args[0]);break;case _util.OPS.fill:this.fill();break;case _util.OPS.eoFill:this.eoFill();break;case _util.OPS.stroke:this.stroke();break;case _util.OPS.fillStroke:this.fillStroke();break;case _util.OPS.eoFillStroke:this.eoFillStroke();break;case _util.OPS.clip:this.clip("nonzero");break;case _util.OPS.eoClip:this.clip("evenodd");break;case _util.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case _util.OPS.paintJpegXObject:this.paintJpegXObject(args[0],args[1],args[2]);break;case _util.OPS.paintImageXObject:this.paintImageXObject(args[0]);break;case _util.OPS.paintInlineImageXObject:this.paintInlineImageXObject(args[0]);break;case _util.OPS.paintImageMaskXObject:this.paintImageMaskXObject(args[0]);break;case _util.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(args[0],args[1]);break;case _util.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case _util.OPS.closePath:this.closePath();break;case _util.OPS.closeStroke:this.closeStroke();break;case _util.OPS.closeFillStroke:this.closeFillStroke();break;case _util.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case _util.OPS.nextLine:this.nextLine();break;case _util.OPS.transform:this.transform(args[0],args[1],args[2],args[3],args[4],args[5]);break;case _util.OPS.constructPath:this.constructPath(args[0],args[1]);break;case _util.OPS.endPath:this.endPath();break;case 92:this.group(opTreeElement.items);break;default:(0,_util.warn)(`Unimplemented operator ${fn}`)}}}setWordSpacing(wordSpacing){this.current.wordSpacing=wordSpacing}setCharSpacing(charSpacing){this.current.charSpacing=charSpacing}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(a,b,c,d,e,f){const current=this.current;current.textMatrix=current.lineMatrix=[a,b,c,d,e,f],current.textMatrixScale=Math.sqrt(a*a+b*b),current.x=current.lineX=0,current.y=current.lineY=0,current.xcoords=[],current.tspan=this.svgFactory.createElement("svg:tspan"),current.tspan.setAttributeNS(null,"font-family",current.fontFamily),current.tspan.setAttributeNS(null,"font-size",`${pf(current.fontSize)}px`),current.tspan.setAttributeNS(null,"y",pf(-current.y)),current.txtElement=this.svgFactory.createElement("svg:text"),current.txtElement.appendChild(current.tspan)}beginText(){const current=this.current;current.x=current.lineX=0,current.y=current.lineY=0,current.textMatrix=_util.IDENTITY_MATRIX,current.lineMatrix=_util.IDENTITY_MATRIX,current.textMatrixScale=1,current.tspan=this.svgFactory.createElement("svg:tspan"),current.txtElement=this.svgFactory.createElement("svg:text"),current.txtgrp=this.svgFactory.createElement("svg:g"),current.xcoords=[]}moveText(x,y){const current=this.current;current.x=current.lineX+=x,current.y=current.lineY+=y,current.xcoords=[],current.tspan=this.svgFactory.createElement("svg:tspan"),current.tspan.setAttributeNS(null,"font-family",current.fontFamily),current.tspan.setAttributeNS(null,"font-size",`${pf(current.fontSize)}px`),current.tspan.setAttributeNS(null,"y",pf(-current.y))}showText(glyphs){const current=this.current,font=current.font,fontSize=current.fontSize;if(0===fontSize)return;const charSpacing=current.charSpacing,wordSpacing=current.wordSpacing,fontDirection=current.fontDirection,textHScale=current.textHScale*fontDirection,vertical=font.vertical,widthAdvanceScale=fontSize*current.fontMatrix[0];let x=0;for(const glyph of glyphs){if(null===glyph){x+=fontDirection*wordSpacing;continue}if((0,_util.isNum)(glyph)){x+=-glyph*fontSize*.001;continue}const width=glyph.width,character=glyph.fontChar,charWidth=width*widthAdvanceScale+((glyph.isSpace?wordSpacing:0)+charSpacing)*fontDirection;glyph.isInFont||font.missingFile?(current.xcoords.push(current.x+x),current.tspan.textContent+=character,x+=charWidth):x+=charWidth}vertical?current.y-=x*textHScale:current.x+=x*textHScale,current.tspan.setAttributeNS(null,"x",current.xcoords.map(pf).join(" ")),current.tspan.setAttributeNS(null,"y",pf(-current.y)),current.tspan.setAttributeNS(null,"font-family",current.fontFamily),current.tspan.setAttributeNS(null,"font-size",`${pf(current.fontSize)}px`),current.fontStyle!==SVG_DEFAULTS.fontStyle&&current.tspan.setAttributeNS(null,"font-style",current.fontStyle),current.fontWeight!==SVG_DEFAULTS.fontWeight&&current.tspan.setAttributeNS(null,"font-weight",current.fontWeight);const fillStrokeMode=current.textRenderingMode&_util.TextRenderingMode.FILL_STROKE_MASK;if(fillStrokeMode===_util.TextRenderingMode.FILL||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE?(current.fillColor!==SVG_DEFAULTS.fillColor&&current.tspan.setAttributeNS(null,"fill",current.fillColor),current.fillAlpha<1&&current.tspan.setAttributeNS(null,"fill-opacity",current.fillAlpha)):current.textRenderingMode===_util.TextRenderingMode.ADD_TO_PATH?current.tspan.setAttributeNS(null,"fill","transparent"):current.tspan.setAttributeNS(null,"fill","none"),fillStrokeMode===_util.TextRenderingMode.STROKE||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE){const lineWidthScale=1/(current.textMatrixScale||1);this._setStrokeAttributes(current.tspan,lineWidthScale)}let textMatrix=current.textMatrix;0!==current.textRise&&(textMatrix=textMatrix.slice(),textMatrix[5]+=current.textRise),current.txtElement.setAttributeNS(null,"transform",`${pm(textMatrix)} scale(${pf(textHScale)}, -1)`),current.txtElement.setAttributeNS(XML_NS,"xml:space","preserve"),current.txtElement.appendChild(current.tspan),current.txtgrp.appendChild(current.txtElement),this._ensureTransformGroup().appendChild(current.txtElement)}setLeadingMoveText(x,y){this.setLeading(-y),this.moveText(x,y)}addFontStyle(fontObj){this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const url=(0,_util.createObjectURL)(fontObj.data,fontObj.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${fontObj.loadedName}"; src: url(${url}); }\n`}setFont(details){const current=this.current,fontObj=this.commonObjs.get(details[0]);let size=details[1];current.font=fontObj,this.embedFonts&&fontObj.data&&!this.embeddedFonts[fontObj.loadedName]&&(this.addFontStyle(fontObj),this.embeddedFonts[fontObj.loadedName]=fontObj),current.fontMatrix=fontObj.fontMatrix?fontObj.fontMatrix:_util.FONT_IDENTITY_MATRIX;let bold="normal";fontObj.black?bold="900":fontObj.bold&&(bold="bold");const italic=fontObj.italic?"italic":"normal";size<0?(size=-size,current.fontDirection=-1):current.fontDirection=1,current.fontSize=size,current.fontFamily=fontObj.loadedName,current.fontWeight=bold,current.fontStyle=italic,current.tspan=this.svgFactory.createElement("svg:tspan"),current.tspan.setAttributeNS(null,"y",pf(-current.y)),current.xcoords=[]}endText(){const current=this.current;current.textRenderingMode&_util.TextRenderingMode.ADD_TO_PATH_FLAG&&current.txtElement&&current.txtElement.hasChildNodes()&&(current.element=current.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(width){width>0&&(this.current.lineWidth=width)}setLineCap(style){this.current.lineCap=LINE_CAP_STYLES[style]}setLineJoin(style){this.current.lineJoin=LINE_JOIN_STYLES[style]}setMiterLimit(limit){this.current.miterLimit=limit}setStrokeAlpha(strokeAlpha){this.current.strokeAlpha=strokeAlpha}setStrokeRGBColor(r,g,b){this.current.strokeColor=_util.Util.makeCssRgb(r,g,b)}setFillAlpha(fillAlpha){this.current.fillAlpha=fillAlpha}setFillRGBColor(r,g,b){this.current.fillColor=_util.Util.makeCssRgb(r,g,b),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[]}setStrokeColorN(args){this.current.strokeColor=this._makeColorN_Pattern(args)}setFillColorN(args){this.current.fillColor=this._makeColorN_Pattern(args)}shadingFill(args){const width=this.viewport.width,height=this.viewport.height,inv=_util.Util.inverseTransform(this.transformMatrix),bl=_util.Util.applyTransform([0,0],inv),br=_util.Util.applyTransform([0,height],inv),ul=_util.Util.applyTransform([width,0],inv),ur=_util.Util.applyTransform([width,height],inv),x0=Math.min(bl[0],br[0],ul[0],ur[0]),y0=Math.min(bl[1],br[1],ul[1],ur[1]),x1=Math.max(bl[0],br[0],ul[0],ur[0]),y1=Math.max(bl[1],br[1],ul[1],ur[1]),rect=this.svgFactory.createElement("svg:rect");rect.setAttributeNS(null,"x",x0),rect.setAttributeNS(null,"y",y0),rect.setAttributeNS(null,"width",x1-x0),rect.setAttributeNS(null,"height",y1-y0),rect.setAttributeNS(null,"fill",this._makeShadingPattern(args)),this._ensureTransformGroup().appendChild(rect)}_makeColorN_Pattern(args){return"TilingPattern"===args[0]?this._makeTilingPattern(args):this._makeShadingPattern(args)}_makeTilingPattern(args){const color=args[1],operatorList=args[2],matrix=args[3]||_util.IDENTITY_MATRIX,[x0,y0,x1,y1]=args[4],xstep=args[5],ystep=args[6],paintType=args[7],tilingId="shading"+shadingCount++,[tx0,ty0]=_util.Util.applyTransform([x0,y0],matrix),[tx1,ty1]=_util.Util.applyTransform([x1,y1],matrix),[xscale,yscale]=_util.Util.singularValueDecompose2dScale(matrix),txstep=xstep*xscale,tystep=ystep*yscale,tiling=this.svgFactory.createElement("svg:pattern");tiling.setAttributeNS(null,"id",tilingId),tiling.setAttributeNS(null,"patternUnits","userSpaceOnUse"),tiling.setAttributeNS(null,"width",txstep),tiling.setAttributeNS(null,"height",tystep),tiling.setAttributeNS(null,"x",`${tx0}`),tiling.setAttributeNS(null,"y",`${ty0}`);const svg=this.svg,transformMatrix=this.transformMatrix,fillColor=this.current.fillColor,strokeColor=this.current.strokeColor,bbox=this.svgFactory.create(tx1-tx0,ty1-ty0);if(this.svg=bbox,this.transformMatrix=matrix,2===paintType){const cssColor=_util.Util.makeCssRgb(...color);this.current.fillColor=cssColor,this.current.strokeColor=cssColor}return this.executeOpTree(this.convertOpList(operatorList)),this.svg=svg,this.transformMatrix=transformMatrix,this.current.fillColor=fillColor,this.current.strokeColor=strokeColor,tiling.appendChild(bbox.childNodes[0]),this.defs.appendChild(tiling),`url(#${tilingId})`}_makeShadingPattern(args){switch(args[0]){case"RadialAxial":const shadingId="shading"+shadingCount++,colorStops=args[3];let gradient;switch(args[1]){case"axial":const point0=args[4],point1=args[5];gradient=this.svgFactory.createElement("svg:linearGradient"),gradient.setAttributeNS(null,"id",shadingId),gradient.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),gradient.setAttributeNS(null,"x1",point0[0]),gradient.setAttributeNS(null,"y1",point0[1]),gradient.setAttributeNS(null,"x2",point1[0]),gradient.setAttributeNS(null,"y2",point1[1]);break;case"radial":const focalPoint=args[4],circlePoint=args[5],focalRadius=args[6],circleRadius=args[7];gradient=this.svgFactory.createElement("svg:radialGradient"),gradient.setAttributeNS(null,"id",shadingId),gradient.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),gradient.setAttributeNS(null,"cx",circlePoint[0]),gradient.setAttributeNS(null,"cy",circlePoint[1]),gradient.setAttributeNS(null,"r",circleRadius),gradient.setAttributeNS(null,"fx",focalPoint[0]),gradient.setAttributeNS(null,"fy",focalPoint[1]),gradient.setAttributeNS(null,"fr",focalRadius);break;default:throw new Error(`Unknown RadialAxial type: ${args[1]}`)}for(const colorStop of colorStops){const stop=this.svgFactory.createElement("svg:stop");stop.setAttributeNS(null,"offset",colorStop[0]),stop.setAttributeNS(null,"stop-color",colorStop[1]),gradient.appendChild(stop)}return this.defs.appendChild(gradient),`url(#${shadingId})`;case"Mesh":return(0,_util.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${args[0]}`)}}setDash(dashArray,dashPhase){this.current.dashArray=dashArray,this.current.dashPhase=dashPhase}constructPath(ops,args){const current=this.current;let x=current.x,y=current.y,d=[],j=0;for(const op of ops)switch(0|op){case _util.OPS.rectangle:x=args[j++],y=args[j++];const xw=x+args[j++],yh=y+args[j++];d.push("M",pf(x),pf(y),"L",pf(xw),pf(y),"L",pf(xw),pf(yh),"L",pf(x),pf(yh),"Z");break;case _util.OPS.moveTo:x=args[j++],y=args[j++],d.push("M",pf(x),pf(y));break;case _util.OPS.lineTo:x=args[j++],y=args[j++],d.push("L",pf(x),pf(y));break;case _util.OPS.curveTo:x=args[j+4],y=args[j+5],d.push("C",pf(args[j]),pf(args[j+1]),pf(args[j+2]),pf(args[j+3]),pf(x),pf(y)),j+=6;break;case _util.OPS.curveTo2:d.push("C",pf(x),pf(y),pf(args[j]),pf(args[j+1]),pf(args[j+2]),pf(args[j+3])),x=args[j+2],y=args[j+3],j+=4;break;case _util.OPS.curveTo3:x=args[j+2],y=args[j+3],d.push("C",pf(args[j]),pf(args[j+1]),pf(x),pf(y),pf(x),pf(y)),j+=4;break;case _util.OPS.closePath:d.push("Z")}d=d.join(" "),current.path&&ops.length>0&&ops[0]!==_util.OPS.rectangle&&ops[0]!==_util.OPS.moveTo?d=current.path.getAttributeNS(null,"d")+d:(current.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(current.path)),current.path.setAttributeNS(null,"d",d),current.path.setAttributeNS(null,"fill","none"),current.element=current.path,current.setCurrentPoint(x,y)}endPath(){const current=this.current;if(current.path=null,!this.pendingClip)return;if(!current.element)return void(this.pendingClip=null);const clipId="clippath"+clipCount++,clipPath=this.svgFactory.createElement("svg:clipPath");clipPath.setAttributeNS(null,"id",clipId),clipPath.setAttributeNS(null,"transform",pm(this.transformMatrix));const clipElement=current.element.cloneNode(!0);"evenodd"===this.pendingClip?clipElement.setAttributeNS(null,"clip-rule","evenodd"):clipElement.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,clipPath.appendChild(clipElement),this.defs.appendChild(clipPath),current.activeClipUrl&&(current.clipGroup=null,this.extraStack.forEach((function(prev){prev.clipGroup=null})),clipPath.setAttributeNS(null,"clip-path",current.activeClipUrl)),current.activeClipUrl=`url(#${clipId})`,this.tgrp=null}clip(type){this.pendingClip=type}closePath(){const current=this.current;if(current.path){const d=`${current.path.getAttributeNS(null,"d")}Z`;current.path.setAttributeNS(null,"d",d)}}setLeading(leading){this.current.leading=-leading}setTextRise(textRise){this.current.textRise=textRise}setTextRenderingMode(textRenderingMode){this.current.textRenderingMode=textRenderingMode}setHScale(scale){this.current.textHScale=scale/100}setRenderingIntent(intent){}setFlatness(flatness){}setGState(states){for(const[key,value]of states)switch(key){case"LW":this.setLineWidth(value);break;case"LC":this.setLineCap(value);break;case"LJ":this.setLineJoin(value);break;case"ML":this.setMiterLimit(value);break;case"D":this.setDash(value[0],value[1]);break;case"RI":this.setRenderingIntent(value);break;case"FL":this.setFlatness(value);break;case"Font":this.setFont(value);break;case"CA":this.setStrokeAlpha(value);break;case"ca":this.setFillAlpha(value);break;default:(0,_util.warn)(`Unimplemented graphic state operator ${key}`)}}fill(){const current=this.current;current.element&&(current.element.setAttributeNS(null,"fill",current.fillColor),current.element.setAttributeNS(null,"fill-opacity",current.fillAlpha),this.endPath())}stroke(){const current=this.current;current.element&&(this._setStrokeAttributes(current.element),current.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(element,lineWidthScale=1){const current=this.current;let dashArray=current.dashArray;1!==lineWidthScale&&dashArray.length>0&&(dashArray=dashArray.map((function(value){return lineWidthScale*value}))),element.setAttributeNS(null,"stroke",current.strokeColor),element.setAttributeNS(null,"stroke-opacity",current.strokeAlpha),element.setAttributeNS(null,"stroke-miterlimit",pf(current.miterLimit)),element.setAttributeNS(null,"stroke-linecap",current.lineCap),element.setAttributeNS(null,"stroke-linejoin",current.lineJoin),element.setAttributeNS(null,"stroke-width",pf(lineWidthScale*current.lineWidth)+"px"),element.setAttributeNS(null,"stroke-dasharray",dashArray.map(pf).join(" ")),element.setAttributeNS(null,"stroke-dashoffset",pf(lineWidthScale*current.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const rect=this.svgFactory.createElement("svg:rect");rect.setAttributeNS(null,"x","0"),rect.setAttributeNS(null,"y","0"),rect.setAttributeNS(null,"width","1px"),rect.setAttributeNS(null,"height","1px"),rect.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(rect)}paintJpegXObject(objId,w,h){const imgObj=this.objs.get(objId),imgEl=this.svgFactory.createElement("svg:image");imgEl.setAttributeNS(XLINK_NS,"xlink:href",imgObj.src),imgEl.setAttributeNS(null,"width",pf(w)),imgEl.setAttributeNS(null,"height",pf(h)),imgEl.setAttributeNS(null,"x","0"),imgEl.setAttributeNS(null,"y",pf(-h)),imgEl.setAttributeNS(null,"transform",`scale(${pf(1/w)} ${pf(-1/h)})`),this._ensureTransformGroup().appendChild(imgEl)}paintImageXObject(objId){const imgData=this.objs.get(objId);imgData?this.paintInlineImageXObject(imgData):(0,_util.warn)(`Dependent image with object ID ${objId} is not ready yet`)}paintInlineImageXObject(imgData,mask){const width=imgData.width,height=imgData.height,imgSrc=convertImgDataToPng(imgData,this.forceDataSchema,!!mask),cliprect=this.svgFactory.createElement("svg:rect");cliprect.setAttributeNS(null,"x","0"),cliprect.setAttributeNS(null,"y","0"),cliprect.setAttributeNS(null,"width",pf(width)),cliprect.setAttributeNS(null,"height",pf(height)),this.current.element=cliprect,this.clip("nonzero");const imgEl=this.svgFactory.createElement("svg:image");imgEl.setAttributeNS(XLINK_NS,"xlink:href",imgSrc),imgEl.setAttributeNS(null,"x","0"),imgEl.setAttributeNS(null,"y",pf(-height)),imgEl.setAttributeNS(null,"width",pf(width)+"px"),imgEl.setAttributeNS(null,"height",pf(height)+"px"),imgEl.setAttributeNS(null,"transform",`scale(${pf(1/width)} ${pf(-1/height)})`),mask?mask.appendChild(imgEl):this._ensureTransformGroup().appendChild(imgEl)}paintImageMaskXObject(imgData){const current=this.current,width=imgData.width,height=imgData.height,fillColor=current.fillColor;current.maskId="mask"+maskCount++;const mask=this.svgFactory.createElement("svg:mask");mask.setAttributeNS(null,"id",current.maskId);const rect=this.svgFactory.createElement("svg:rect");rect.setAttributeNS(null,"x","0"),rect.setAttributeNS(null,"y","0"),rect.setAttributeNS(null,"width",pf(width)),rect.setAttributeNS(null,"height",pf(height)),rect.setAttributeNS(null,"fill",fillColor),rect.setAttributeNS(null,"mask",`url(#${current.maskId})`),this.defs.appendChild(mask),this._ensureTransformGroup().appendChild(rect),this.paintInlineImageXObject(imgData,mask)}paintFormXObjectBegin(matrix,bbox){if(Array.isArray(matrix)&&6===matrix.length&&this.transform(matrix[0],matrix[1],matrix[2],matrix[3],matrix[4],matrix[5]),bbox){const width=bbox[2]-bbox[0],height=bbox[3]-bbox[1],cliprect=this.svgFactory.createElement("svg:rect");cliprect.setAttributeNS(null,"x",bbox[0]),cliprect.setAttributeNS(null,"y",bbox[1]),cliprect.setAttributeNS(null,"width",pf(width)),cliprect.setAttributeNS(null,"height",pf(height)),this.current.element=cliprect,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(viewport){const svg=this.svgFactory.create(viewport.width,viewport.height),definitions=this.svgFactory.createElement("svg:defs");svg.appendChild(definitions),this.defs=definitions;const rootGroup=this.svgFactory.createElement("svg:g");return rootGroup.setAttributeNS(null,"transform",pm(viewport.transform)),svg.appendChild(rootGroup),this.svg=rootGroup,svg}_ensureClipGroup(){if(!this.current.clipGroup){const clipGroup=this.svgFactory.createElement("svg:g");clipGroup.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(clipGroup),this.current.clipGroup=clipGroup}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",pm(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFNodeStream=void 0;var _util=__w_pdfjs_require__(1),_network_utils=__w_pdfjs_require__(20);const fs=__webpack_require__(4302),http=__webpack_require__(4303),https=__webpack_require__(4304),url=__webpack_require__(4305),fileUriRegex=/^file:\/\/\/[a-zA-Z]:\//;exports.PDFNodeStream=class PDFNodeStream{constructor(source){this.source=source,this.url=function parseUrl(sourceUrl){const parsedUrl=url.parse(sourceUrl);return"file:"===parsedUrl.protocol||parsedUrl.host?parsedUrl:/^[a-z]:[/\\]/i.test(sourceUrl)?url.parse(`file:///${sourceUrl}`):(parsedUrl.host||(parsedUrl.protocol="file:"),parsedUrl)}(source.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&source.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}getFullReader(){return(0,_util.assert)(!this._fullRequestReader),this._fullRequestReader=this.isFsUrl?new PDFNodeStreamFsFullReader(this):new PDFNodeStreamFullReader(this),this._fullRequestReader}getRangeReader(start,end){if(end<=this._progressiveDataLength)return null;const rangeReader=this.isFsUrl?new PDFNodeStreamFsRangeReader(this,start,end):new PDFNodeStreamRangeReader(this,start,end);return this._rangeRequestReaders.push(rangeReader),rangeReader}cancelAllRequests(reason){this._fullRequestReader&&this._fullRequestReader.cancel(reason);this._rangeRequestReaders.slice(0).forEach((function(reader){reader.cancel(reason)}))}};class BaseFullReader{constructor(stream){this._url=stream.url,this._done=!1,this._storedError=null,this.onProgress=null;const source=stream.source;this._contentLength=source.length,this._loaded=0,this._filename=null,this._disableRange=source.disableRange||!1,this._rangeChunkSize=source.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!source.disableStream,this._isRangeSupported=!source.disableRange,this._readableStream=null,this._readCapability=(0,_util.createPromiseCapability)(),this._headersCapability=(0,_util.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const chunk=this._readableStream.read();if(null===chunk)return this._readCapability=(0,_util.createPromiseCapability)(),this.read();this._loaded+=chunk.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(chunk).buffer,done:!1}}cancel(reason){this._readableStream?this._readableStream.destroy(reason):this._error(reason)}_error(reason){this._storedError=reason,this._readCapability.resolve()}_setReadableStream(readableStream){this._readableStream=readableStream,readableStream.on("readable",(()=>{this._readCapability.resolve()})),readableStream.on("end",(()=>{readableStream.destroy(),this._done=!0,this._readCapability.resolve()})),readableStream.on("error",(reason=>{this._error(reason)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new _util.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class BaseRangeReader{constructor(stream){this._url=stream.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,_util.createPromiseCapability)();const source=stream.source;this._isStreamingSupported=!source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const chunk=this._readableStream.read();if(null===chunk)return this._readCapability=(0,_util.createPromiseCapability)(),this.read();this._loaded+=chunk.length,this.onProgress&&this.onProgress({loaded:this._loaded});return{value:new Uint8Array(chunk).buffer,done:!1}}cancel(reason){this._readableStream?this._readableStream.destroy(reason):this._error(reason)}_error(reason){this._storedError=reason,this._readCapability.resolve()}_setReadableStream(readableStream){this._readableStream=readableStream,readableStream.on("readable",(()=>{this._readCapability.resolve()})),readableStream.on("end",(()=>{readableStream.destroy(),this._done=!0,this._readCapability.resolve()})),readableStream.on("error",(reason=>{this._error(reason)})),this._storedError&&this._readableStream.destroy(this._storedError)}}function createRequestOptions(url,headers){return{protocol:url.protocol,auth:url.auth,host:url.hostname,port:url.port,path:url.path,method:"GET",headers:headers}}class PDFNodeStreamFullReader extends BaseFullReader{constructor(stream){super(stream);const handleResponse=response=>{if(404===response.statusCode){const error=new _util.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=error,void this._headersCapability.reject(error)}this._headersCapability.resolve(),this._setReadableStream(response);const getResponseHeader=name=>this._readableStream.headers[name.toLowerCase()],{allowRangeRequests:allowRangeRequests,suggestedLength:suggestedLength}=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader:getResponseHeader,isHttp:stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=allowRangeRequests,this._contentLength=suggestedLength||this._contentLength,this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader)};this._request=null,"http:"===this._url.protocol?this._request=http.request(createRequestOptions(this._url,stream.httpHeaders),handleResponse):this._request=https.request(createRequestOptions(this._url,stream.httpHeaders),handleResponse),this._request.on("error",(reason=>{this._storedError=reason,this._headersCapability.reject(reason)})),this._request.end()}}class PDFNodeStreamRangeReader extends BaseRangeReader{constructor(stream,start,end){super(stream),this._httpHeaders={};for(const property in stream.httpHeaders){const value=stream.httpHeaders[property];void 0!==value&&(this._httpHeaders[property]=value)}this._httpHeaders.Range=`bytes=${start}-${end-1}`;const handleResponse=response=>{if(404!==response.statusCode)this._setReadableStream(response);else{const error=new _util.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=error}};this._request=null,"http:"===this._url.protocol?this._request=http.request(createRequestOptions(this._url,this._httpHeaders),handleResponse):this._request=https.request(createRequestOptions(this._url,this._httpHeaders),handleResponse),this._request.on("error",(reason=>{this._storedError=reason})),this._request.end()}}class PDFNodeStreamFsFullReader extends BaseFullReader{constructor(stream){super(stream);let path=decodeURIComponent(this._url.path);fileUriRegex.test(this._url.href)&&(path=path.replace(/^\//,"")),fs.lstat(path,((error,stat)=>{if(error)return"ENOENT"===error.code&&(error=new _util.MissingPDFException(`Missing PDF "${path}".`)),this._storedError=error,void this._headersCapability.reject(error);this._contentLength=stat.size,this._setReadableStream(fs.createReadStream(path)),this._headersCapability.resolve()}))}}class PDFNodeStreamFsRangeReader extends BaseRangeReader{constructor(stream,start,end){super(stream);let path=decodeURIComponent(this._url.path);fileUriRegex.test(this._url.href)&&(path=path.replace(/^\//,"")),this._setReadableStream(fs.createReadStream(path,{start:start,end:end-1}))}}},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createResponseStatusError=function createResponseStatusError(status,url){if(404===status||0===status&&url.startsWith("file:"))return new _util.MissingPDFException('Missing PDF "'+url+'".');return new _util.UnexpectedResponseException("Unexpected server response ("+status+') while retrieving PDF "'+url+'".',status)},exports.extractFilenameFromHeader=function extractFilenameFromHeader(getResponseHeader){const contentDisposition=getResponseHeader("Content-Disposition");if(contentDisposition){let filename=(0,_content_disposition.getFilenameFromContentDispositionHeader)(contentDisposition);if(filename.includes("%"))try{filename=decodeURIComponent(filename)}catch(ex){}if(/\.pdf$/i.test(filename))return filename}return null},exports.validateRangeRequestCapabilities=function validateRangeRequestCapabilities({getResponseHeader:getResponseHeader,isHttp:isHttp,rangeChunkSize:rangeChunkSize,disableRange:disableRange}){(0,_util.assert)(rangeChunkSize>0,"Range chunk size must be larger than zero");const returnValues={allowRangeRequests:!1,suggestedLength:void 0},length=parseInt(getResponseHeader("Content-Length"),10);if(!Number.isInteger(length))return returnValues;if(returnValues.suggestedLength=length,length<=2*rangeChunkSize)return returnValues;if(disableRange||!isHttp)return returnValues;if("bytes"!==getResponseHeader("Accept-Ranges"))return returnValues;if("identity"!==(getResponseHeader("Content-Encoding")||"identity"))return returnValues;return returnValues.allowRangeRequests=!0,returnValues},exports.validateResponseStatus=function validateResponseStatus(status){return 200===status||206===status};var _util=__w_pdfjs_require__(1),_content_disposition=__w_pdfjs_require__(21)},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFilenameFromContentDispositionHeader=function getFilenameFromContentDispositionHeader(contentDisposition){let needsEncodingFixup=!0,tmp=toParamRegExp("filename\\*","i").exec(contentDisposition);if(tmp){tmp=tmp[1];let filename=rfc2616unquote(tmp);return filename=unescape(filename),filename=rfc5987decode(filename),filename=rfc2047decode(filename),fixupEncoding(filename)}if(tmp=function rfc2231getparam(contentDisposition){const matches=[];let match;const iter=toParamRegExp("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(match=iter.exec(contentDisposition));){let[,n,quot,part]=match;if(n=parseInt(n,10),n in matches){if(0===n)break}else matches[n]=[quot,part]}const parts=[];for(let n=0;n<matches.length&&n in matches;++n){let[quot,part]=matches[n];part=rfc2616unquote(part),quot&&(part=unescape(part),0===n&&(part=rfc5987decode(part))),parts.push(part)}return parts.join("")}(contentDisposition),tmp){return fixupEncoding(rfc2047decode(tmp))}if(tmp=toParamRegExp("filename","i").exec(contentDisposition),tmp){tmp=tmp[1];let filename=rfc2616unquote(tmp);return filename=rfc2047decode(filename),fixupEncoding(filename)}function toParamRegExp(attributePattern,flags){return new RegExp("(?:^|;)\\s*"+attributePattern+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',flags)}function textdecode(encoding,value){if(encoding){if(!/^[\x00-\xFF]+$/.test(value))return value;try{const decoder=new TextDecoder(encoding,{fatal:!0}),bytes=Array.from(value,(function(ch){return 255&ch.charCodeAt(0)}));value=decoder.decode(new Uint8Array(bytes)),needsEncodingFixup=!1}catch(e){if(/^utf-?8$/i.test(encoding))try{value=decodeURIComponent(escape(value)),needsEncodingFixup=!1}catch(err){}}}return value}function fixupEncoding(value){return needsEncodingFixup&&/[\x80-\xff]/.test(value)&&(value=textdecode("utf-8",value),needsEncodingFixup&&(value=textdecode("iso-8859-1",value))),value}function rfc2616unquote(value){if(value.startsWith('"')){const parts=value.slice(1).split('\\"');for(let i=0;i<parts.length;++i){const quotindex=parts[i].indexOf('"');-1!==quotindex&&(parts[i]=parts[i].slice(0,quotindex),parts.length=i+1),parts[i]=parts[i].replace(/\\(.)/g,"$1")}value=parts.join('"')}return value}function rfc5987decode(extvalue){const encodingend=extvalue.indexOf("'");if(-1===encodingend)return extvalue;return textdecode(extvalue.slice(0,encodingend),extvalue.slice(encodingend+1).replace(/^[^']*'/,""))}function rfc2047decode(value){return!value.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(value)?value:value.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(_,charset,encoding,text){if("q"===encoding||"Q"===encoding)return textdecode(charset,text=(text=text.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(_,hex){return String.fromCharCode(parseInt(hex,16))})));try{text=atob(text)}catch(e){}return textdecode(charset,text)}))}return""}},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFNetworkStream=void 0;var _util=__w_pdfjs_require__(1),_network_utils=__w_pdfjs_require__(20);class NetworkManager{constructor(url,args){this.url=url,args=args||{},this.isHttp=/^https?:/i.test(url),this.httpHeaders=this.isHttp&&args.httpHeaders||{},this.withCredentials=args.withCredentials||!1,this.getXhr=args.getXhr||function NetworkManager_getXhr(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(begin,end,listeners){const args={begin:begin,end:end};for(const prop in listeners)args[prop]=listeners[prop];return this.request(args)}requestFull(listeners){return this.request(listeners)}request(args){const xhr=this.getXhr(),xhrId=this.currXhrId++,pendingRequest=this.pendingRequests[xhrId]={xhr:xhr};xhr.open("GET",this.url),xhr.withCredentials=this.withCredentials;for(const property in this.httpHeaders){const value=this.httpHeaders[property];void 0!==value&&xhr.setRequestHeader(property,value)}return this.isHttp&&"begin"in args&&"end"in args?(xhr.setRequestHeader("Range",`bytes=${args.begin}-${args.end-1}`),pendingRequest.expectedStatus=206):pendingRequest.expectedStatus=200,xhr.responseType="arraybuffer",args.onError&&(xhr.onerror=function(evt){args.onError(xhr.status)}),xhr.onreadystatechange=this.onStateChange.bind(this,xhrId),xhr.onprogress=this.onProgress.bind(this,xhrId),pendingRequest.onHeadersReceived=args.onHeadersReceived,pendingRequest.onDone=args.onDone,pendingRequest.onError=args.onError,pendingRequest.onProgress=args.onProgress,xhr.send(null),xhrId}onProgress(xhrId,evt){const pendingRequest=this.pendingRequests[xhrId];pendingRequest&&pendingRequest.onProgress&&pendingRequest.onProgress(evt)}onStateChange(xhrId,evt){const pendingRequest=this.pendingRequests[xhrId];if(!pendingRequest)return;const xhr=pendingRequest.xhr;if(xhr.readyState>=2&&pendingRequest.onHeadersReceived&&(pendingRequest.onHeadersReceived(),delete pendingRequest.onHeadersReceived),4!==xhr.readyState)return;if(!(xhrId in this.pendingRequests))return;if(delete this.pendingRequests[xhrId],0===xhr.status&&this.isHttp)return void(pendingRequest.onError&&pendingRequest.onError(xhr.status));const xhrStatus=xhr.status||200;if(!(200===xhrStatus&&206===pendingRequest.expectedStatus)&&xhrStatus!==pendingRequest.expectedStatus)return void(pendingRequest.onError&&pendingRequest.onError(xhr.status));const chunk=function getArrayBuffer(xhr){const data=xhr.response;return"string"!=typeof data?data:(0,_util.stringToBytes)(data).buffer}(xhr);if(206===xhrStatus){const rangeHeader=xhr.getResponseHeader("Content-Range"),matches=/bytes (\d+)-(\d+)\/(\d+)/.exec(rangeHeader);pendingRequest.onDone({begin:parseInt(matches[1],10),chunk:chunk})}else chunk?pendingRequest.onDone({begin:0,chunk:chunk}):pendingRequest.onError&&pendingRequest.onError(xhr.status)}hasPendingRequests(){for(const xhrId in this.pendingRequests)return!0;return!1}getRequestXhr(xhrId){return this.pendingRequests[xhrId].xhr}isPendingRequest(xhrId){return xhrId in this.pendingRequests}abortAllRequests(){for(const xhrId in this.pendingRequests)this.abortRequest(0|xhrId)}abortRequest(xhrId){const xhr=this.pendingRequests[xhrId].xhr;delete this.pendingRequests[xhrId],xhr.abort()}}exports.PDFNetworkStream=class PDFNetworkStream{constructor(source){this._source=source,this._manager=new NetworkManager(source.url,{httpHeaders:source.httpHeaders,withCredentials:source.withCredentials}),this._rangeChunkSize=source.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(reader){const i=this._rangeRequestReaders.indexOf(reader);i>=0&&this._rangeRequestReaders.splice(i,1)}getFullReader(){return(0,_util.assert)(!this._fullRequestReader),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(begin,end){const reader=new PDFNetworkStreamRangeRequestReader(this._manager,begin,end);return reader.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(reader),reader}cancelAllRequests(reason){this._fullRequestReader&&this._fullRequestReader.cancel(reason);this._rangeRequestReaders.slice(0).forEach((function(reader){reader.cancel(reason)}))}};class PDFNetworkStreamFullRequestReader{constructor(manager,source){this._manager=manager;const args={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=source.url,this._fullRequestId=manager.requestFull(args),this._headersReceivedCapability=(0,_util.createPromiseCapability)(),this._disableRange=source.disableRange||!1,this._contentLength=source.length,this._rangeChunkSize=source.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const fullRequestXhrId=this._fullRequestId,fullRequestXhr=this._manager.getRequestXhr(fullRequestXhrId),getResponseHeader=name=>fullRequestXhr.getResponseHeader(name),{allowRangeRequests:allowRangeRequests,suggestedLength:suggestedLength}=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader:getResponseHeader,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});allowRangeRequests&&(this._isRangeSupported=!0),this._contentLength=suggestedLength||this._contentLength,this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader),this._isRangeSupported&&this._manager.abortRequest(fullRequestXhrId),this._headersReceivedCapability.resolve()}_onDone(args){if(args)if(this._requests.length>0){this._requests.shift().resolve({value:args.chunk,done:!1})}else this._cachedChunks.push(args.chunk);this._done=!0,this._cachedChunks.length>0||(this._requests.forEach((function(requestCapability){requestCapability.resolve({value:void 0,done:!0})})),this._requests=[])}_onError(status){const url=this._url,exception=(0,_network_utils.createResponseStatusError)(status,url);this._storedError=exception,this._headersReceivedCapability.reject(exception),this._requests.forEach((function(requestCapability){requestCapability.reject(exception)})),this._requests=[],this._cachedChunks=[]}_onProgress(data){this.onProgress&&this.onProgress({loaded:data.loaded,total:data.lengthComputable?data.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const requestCapability=(0,_util.createPromiseCapability)();return this._requests.push(requestCapability),requestCapability.promise}cancel(reason){this._done=!0,this._headersReceivedCapability.reject(reason),this._requests.forEach((function(requestCapability){requestCapability.resolve({value:void 0,done:!0})})),this._requests=[],this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(manager,begin,end){this._manager=manager;const args={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=manager.requestRange(begin,end,args),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}_close(){this.onClosed&&this.onClosed(this)}_onDone(data){const chunk=data.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:chunk,done:!1})}else this._queuedChunk=chunk;this._done=!0,this._requests.forEach((function(requestCapability){requestCapability.resolve({value:void 0,done:!0})})),this._requests=[],this._close()}_onProgress(evt){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:evt.loaded})}get isStreamingSupported(){return!1}async read(){if(null!==this._queuedChunk){const chunk=this._queuedChunk;return this._queuedChunk=null,{value:chunk,done:!1}}if(this._done)return{value:void 0,done:!0};const requestCapability=(0,_util.createPromiseCapability)();return this._requests.push(requestCapability),requestCapability.promise}cancel(reason){this._done=!0,this._requests.forEach((function(requestCapability){requestCapability.resolve({value:void 0,done:!0})})),this._requests=[],this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFFetchStream=void 0;var _util=__w_pdfjs_require__(1),_network_utils=__w_pdfjs_require__(20);function createFetchOptions(headers,withCredentials,abortController){return{method:"GET",headers:headers,signal:abortController&&abortController.signal,mode:"cors",credentials:withCredentials?"include":"same-origin",redirect:"follow"}}function createHeaders(httpHeaders){const headers=new Headers;for(const property in httpHeaders){const value=httpHeaders[property];void 0!==value&&headers.append(property,value)}return headers}exports.PDFFetchStream=class PDFFetchStream{constructor(source){this.source=source,this.isHttp=/^https?:/i.test(source.url),this.httpHeaders=this.isHttp&&source.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}getFullReader(){return(0,_util.assert)(!this._fullRequestReader),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(begin,end){if(end<=this._progressiveDataLength)return null;const reader=new PDFFetchStreamRangeReader(this,begin,end);return this._rangeRequestReaders.push(reader),reader}cancelAllRequests(reason){this._fullRequestReader&&this._fullRequestReader.cancel(reason);this._rangeRequestReaders.slice(0).forEach((function(reader){reader.cancel(reason)}))}};class PDFFetchStreamReader{constructor(stream){this._stream=stream,this._reader=null,this._loaded=0,this._filename=null;const source=stream.source;this._withCredentials=source.withCredentials||!1,this._contentLength=source.length,this._headersCapability=(0,_util.createPromiseCapability)(),this._disableRange=source.disableRange||!1,this._rangeChunkSize=source.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!source.disableStream,this._isRangeSupported=!source.disableRange,this._headers=createHeaders(this._stream.httpHeaders);const url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((response=>{if(!(0,_network_utils.validateResponseStatus)(response.status))throw(0,_network_utils.createResponseStatusError)(response.status,url);this._reader=response.body.getReader(),this._headersCapability.resolve();const getResponseHeader=name=>response.headers.get(name),{allowRangeRequests:allowRangeRequests,suggestedLength:suggestedLength}=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader:getResponseHeader,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=allowRangeRequests,this._contentLength=suggestedLength||this._contentLength,this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new _util.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:value,done:done}=await this._reader.read();if(done)return{value:value,done:done};this._loaded+=value.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(value).buffer,done:!1}}cancel(reason){this._reader&&this._reader.cancel(reason),this._abortController&&this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(stream,begin,end){this._stream=stream,this._reader=null,this._loaded=0;const source=stream.source;this._withCredentials=source.withCredentials||!1,this._readCapability=(0,_util.createPromiseCapability)(),this._isStreamingSupported=!source.disableStream,"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._headers=createHeaders(this._stream.httpHeaders),this._headers.append("Range",`bytes=${begin}-${end-1}`);const url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((response=>{if(!(0,_network_utils.validateResponseStatus)(response.status))throw(0,_network_utils.createResponseStatusError)(response.status,url);this._readCapability.resolve(),this._reader=response.body.getReader()})),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:value,done:done}=await this._reader.read();if(done)return{value:value,done:done};this._loaded+=value.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded});return{value:new Uint8Array(value).buffer,done:!1}}cancel(reason){this._reader&&this._reader.cancel(reason),this._abortController&&this._abortController.abort()}}}])}))}).call(this,__webpack_require__(113),__webpack_require__(167).Buffer)},4217:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function makeCancellablePromise(promise){var isCancelled=!1,wrappedPromise=new Promise((function(resolve,reject){promise.then((function(){return!isCancelled&&resolve.apply(void 0,arguments)})).catch((function(error){return!isCancelled&&reject(error)}))}));return{promise:wrappedPromise,cancel:function cancel(){isCancelled=!0}}}},4218:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.focusEvents=exports.keyboardEvents=exports.touchEvents=exports.mouseEvents=void 0;var mouseEvents=["onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"];exports.mouseEvents=mouseEvents;var touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"];exports.touchEvents=touchEvents;var keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"];exports.keyboardEvents=keyboardEvents;var focusEvents=["onFocus","onBlur"];exports.focusEvents=focusEvents;var _default=function makeEventProps(props,getArgs){var eventProps={};return[].concat(mouseEvents,touchEvents,keyboardEvents,focusEvents).forEach((function(eventName){props[eventName]&&(eventProps[eventName]=function(event){return getArgs?props[eventName](event,getArgs(eventName)):props[eventName](event)})})),eventProps};exports.default=_default},4236:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isValidRotation=function isValidRotation(angle){return Number.isInteger(angle)&&angle%90==0},exports.isValidScrollMode=function isValidScrollMode(mode){return Number.isInteger(mode)&&Object.values(ScrollMode).includes(mode)&&mode!==ScrollMode.UNKNOWN},exports.isValidSpreadMode=function isValidSpreadMode(mode){return Number.isInteger(mode)&&Object.values(SpreadMode).includes(mode)&&mode!==SpreadMode.UNKNOWN},exports.isPortraitOrientation=function isPortraitOrientation(size){return size.width<=size.height},exports.getGlobalEventBus=function getGlobalEventBus(dispatchToDOM=!1){console.error("getGlobalEventBus is deprecated, use a manually created EventBus instance instead."),globalEventBus||(globalEventBus=new EventBus({dispatchToDOM:dispatchToDOM}));return globalEventBus},exports.clamp=clamp,exports.getPDFFileNameFromURL=function getPDFFileNameFromURL(url,defaultFilename="document.pdf"){if("string"!=typeof url)return defaultFilename;if(function isDataSchema(url){let i=0;const ii=url.length;for(;i<ii&&""===url[i].trim();)i++;return"data:"===url.substring(i,i+5).toLowerCase()}(url))return console.warn('getPDFFileNameFromURL: ignoring "data:" URL for performance reasons.'),defaultFilename;const reFilename=/[^\/?#=]+\.pdf\b(?!.*\.pdf\b)/i,splitURI=/^(?:(?:[^:]+:)?\/\/[^\/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(url);let suggestedFilename=reFilename.exec(splitURI[1])||reFilename.exec(splitURI[2])||reFilename.exec(splitURI[3]);if(suggestedFilename&&(suggestedFilename=suggestedFilename[0],suggestedFilename.includes("%")))try{suggestedFilename=reFilename.exec(decodeURIComponent(suggestedFilename))[0]}catch(ex){}return suggestedFilename||defaultFilename},exports.noContextMenuHandler=function noContextMenuHandler(evt){evt.preventDefault()},exports.parseQueryString=function parseQueryString(query){const parts=query.split("&"),params=Object.create(null);for(let i=0,ii=parts.length;i<ii;++i){const param=parts[i].split("="),key=param[0].toLowerCase(),value=param.length>1?param[1]:null;params[decodeURIComponent(key)]=decodeURIComponent(value)}return params},exports.backtrackBeforeAllVisibleElements=backtrackBeforeAllVisibleElements,exports.getVisibleElements=function getVisibleElements(scrollEl,views,sortByVisibility=!1,horizontal=!1){const top=scrollEl.scrollTop,bottom=top+scrollEl.clientHeight,left=scrollEl.scrollLeft,right=left+scrollEl.clientWidth;const visible=[],numViews=views.length;let firstVisibleElementInd=0===numViews?0:binarySearchFirstItem(views,horizontal?function isElementRightAfterViewLeft(view){const element=view.div;return element.offsetLeft+element.clientLeft+element.clientWidth>left}:function isElementBottomAfterViewTop(view){const element=view.div;return element.offsetTop+element.clientTop+element.clientHeight>top});firstVisibleElementInd>0&&firstVisibleElementInd<numViews&&!horizontal&&(firstVisibleElementInd=backtrackBeforeAllVisibleElements(firstVisibleElementInd,views,top));let lastEdge=horizontal?right:-1;for(let i=firstVisibleElementInd;i<numViews;i++){const view=views[i],element=view.div,currentWidth=element.offsetLeft+element.clientLeft,currentHeight=element.offsetTop+element.clientTop,viewWidth=element.clientWidth,viewHeight=element.clientHeight,viewRight=currentWidth+viewWidth,viewBottom=currentHeight+viewHeight;if(-1===lastEdge)viewBottom>=bottom&&(lastEdge=viewBottom);else if((horizontal?currentWidth:currentHeight)>lastEdge)break;if(viewBottom<=top||currentHeight>=bottom||viewRight<=left||currentWidth>=right)continue;const hiddenHeight=Math.max(0,top-currentHeight)+Math.max(0,viewBottom-bottom),hiddenWidth=Math.max(0,left-currentWidth)+Math.max(0,viewRight-right),percent=(viewHeight-hiddenHeight)*(viewWidth-hiddenWidth)*100/viewHeight/viewWidth|0;visible.push({id:view.id,x:currentWidth,y:currentHeight,view:view,percent:percent})}const first=visible[0],last=visible[visible.length-1];sortByVisibility&&visible.sort((function(a,b){const pc=a.percent-b.percent;return Math.abs(pc)>.001?-pc:a.id-b.id}));return{first:first,last:last,views:visible}},exports.roundToDivide=function roundToDivide(x,div){const r=x%div;return 0===r?x:Math.round(x-r+div)},exports.getPageSizeInches=function getPageSizeInches({view:view,userUnit:userUnit,rotate:rotate}){const[x1,y1,x2,y2]=view,changeOrientation=rotate%180!=0,width=(x2-x1)/72*userUnit,height=(y2-y1)/72*userUnit;return{width:changeOrientation?height:width,height:changeOrientation?width:height}},exports.approximateFraction=function approximateFraction(x){if(Math.floor(x)===x)return[x,1];const xinv=1/x;if(xinv>8)return[1,8];if(Math.floor(xinv)===xinv)return[1,xinv];const x_=x>1?xinv:x;let result,a=0,b=1,c=1,d=1;for(;;){const p=a+c,q=b+d;if(q>8)break;x_<=p/q?(c=p,d=q):(a=p,b=q)}result=x_-a/b<c/d-x_?x_===x?[a,b]:[b,a]:x_===x?[c,d]:[d,c];return result},exports.getOutputScale=function getOutputScale(ctx){const devicePixelRatio=window.devicePixelRatio||1,backingStoreRatio=ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1,pixelRatio=devicePixelRatio/backingStoreRatio;return{sx:pixelRatio,sy:pixelRatio,scaled:1!==pixelRatio}},exports.scrollIntoView=function scrollIntoView(element,spot,skipOverflowHiddenElements=!1){let parent=element.offsetParent;if(!parent)return void console.error("offsetParent is not set -- cannot scroll");let offsetY=element.offsetTop+element.clientTop,offsetX=element.offsetLeft+element.clientLeft;for(;parent.clientHeight===parent.scrollHeight&&parent.clientWidth===parent.scrollWidth||skipOverflowHiddenElements&&"hidden"===getComputedStyle(parent).overflow;)if(parent.dataset._scaleY&&(offsetY/=parent.dataset._scaleY,offsetX/=parent.dataset._scaleX),offsetY+=parent.offsetTop,offsetX+=parent.offsetLeft,parent=parent.offsetParent,!parent)return;spot&&(void 0!==spot.top&&(offsetY+=spot.top),void 0!==spot.left&&(offsetX+=spot.left,parent.scrollLeft=offsetX));parent.scrollTop=offsetY},exports.watchScroll=function watchScroll(viewAreaElement,callback){const debounceScroll=function(evt){rAF||(rAF=window.requestAnimationFrame((function viewAreaElementScrolled(){rAF=null;const currentX=viewAreaElement.scrollLeft,lastX=state.lastX;currentX!==lastX&&(state.right=currentX>lastX),state.lastX=currentX;const currentY=viewAreaElement.scrollTop,lastY=state.lastY;currentY!==lastY&&(state.down=currentY>lastY),state.lastY=currentY,callback(state)})))},state={right:!0,down:!0,lastX:viewAreaElement.scrollLeft,lastY:viewAreaElement.scrollTop,_eventHandler:debounceScroll};let rAF=null;return viewAreaElement.addEventListener("scroll",debounceScroll,!0),state},exports.binarySearchFirstItem=binarySearchFirstItem,exports.normalizeWheelEventDelta=function normalizeWheelEventDelta(evt){let delta=Math.sqrt(evt.deltaX*evt.deltaX+evt.deltaY*evt.deltaY);const angle=Math.atan2(evt.deltaY,evt.deltaX);-.25*Math.PI<angle&&angle<.75*Math.PI&&(delta=-delta);0===evt.deltaMode?delta/=900:1===evt.deltaMode&&(delta/=30);return delta},exports.waitOnEventOrTimeout=function waitOnEventOrTimeout({target:target,name:name,delay:delay=0}){return new Promise((function(resolve,reject){if("object"!=typeof target||!name||"string"!=typeof name||!(Number.isInteger(delay)&&delay>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function handler(type){target instanceof EventBus?target._off(name,eventHandler):target.removeEventListener(name,eventHandler),timeout&&clearTimeout(timeout),resolve(type)}const eventHandler=handler.bind(null,WaitOnType.EVENT);target instanceof EventBus?target._on(name,eventHandler):target.addEventListener(name,eventHandler);const timeoutHandler=handler.bind(null,WaitOnType.TIMEOUT),timeout=setTimeout(timeoutHandler,delay)}))},exports.moveToEndOfArray=function moveToEndOfArray(arr,condition){const moved=[],len=arr.length;let write=0;for(let read=0;read<len;++read)condition(arr[read])?moved.push(arr[read]):(arr[write]=arr[read],++write);for(let read=0;write<len;++read,++write)arr[write]=moved[read]},exports.WaitOnType=exports.animationStarted=exports.ProgressBar=exports.EventBus=exports.NullL10n=exports.SpreadMode=exports.ScrollMode=exports.TextLayerMode=exports.RendererType=exports.PresentationModeState=exports.VERTICAL_PADDING=exports.SCROLLBAR_PADDING=exports.MAX_AUTO_SCALE=exports.UNKNOWN_SCALE=exports.MAX_SCALE=exports.MIN_SCALE=exports.DEFAULT_SCALE=exports.DEFAULT_SCALE_VALUE=exports.CSS_UNITS=exports.AutoPrintRegExp=void 0;exports.CSS_UNITS=96/72;exports.DEFAULT_SCALE_VALUE="auto";exports.DEFAULT_SCALE=1;exports.MIN_SCALE=.1;exports.MAX_SCALE=10;exports.UNKNOWN_SCALE=0;exports.MAX_AUTO_SCALE=1.25;exports.SCROLLBAR_PADDING=40;exports.VERTICAL_PADDING=5;exports.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};exports.RendererType={CANVAS:"canvas",SVG:"svg"};exports.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const ScrollMode={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2};exports.ScrollMode=ScrollMode;const SpreadMode={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};exports.SpreadMode=SpreadMode;exports.AutoPrintRegExp=/\bprint\s*\(/;const NullL10n={getLanguage:async()=>"en-us",getDirection:async()=>"ltr",get:async(property,args,fallback)=>function formatL10nValue(text,args){return args?text.replace(/\{\{\s*(\w+)\s*\}\}/g,((all,name)=>name in args?args[name]:"{{"+name+"}}")):text}(fallback,args),async translate(element){}};function binarySearchFirstItem(items,condition){let minIndex=0,maxIndex=items.length-1;if(0===items.length||!condition(items[maxIndex]))return items.length;if(condition(items[minIndex]))return minIndex;for(;minIndex<maxIndex;){const currentIndex=minIndex+maxIndex>>1;condition(items[currentIndex])?maxIndex=currentIndex:minIndex=currentIndex+1}return minIndex}function backtrackBeforeAllVisibleElements(index,views,top){if(index<2)return index;let elt=views[index].div,pageTop=elt.offsetTop+elt.clientTop;pageTop>=top&&(elt=views[index-1].div,pageTop=elt.offsetTop+elt.clientTop);for(let i=index-2;i>=0&&(elt=views[i].div,!(elt.offsetTop+elt.clientTop+elt.clientHeight<=pageTop));--i)index=i;return index}exports.NullL10n=NullL10n;const WaitOnType={EVENT:"event",TIMEOUT:"timeout"};exports.WaitOnType=WaitOnType;const animationStarted=new Promise((function(resolve){window.requestAnimationFrame(resolve)}));function dispatchDOMEvent(eventName,args=null){const details=Object.create(null);if(args&&args.length>0){const obj=args[0];for(const key in obj){const value=obj[key];if("source"!==key)details[key]=value;else if(value===window||value===document)return}}const event=document.createEvent("CustomEvent");event.initCustomEvent(eventName,!0,!0,details),document.dispatchEvent(event)}exports.animationStarted=animationStarted;class EventBus{constructor({dispatchToDOM:dispatchToDOM=!1}={}){this._listeners=Object.create(null),this._dispatchToDOM=!0===dispatchToDOM,dispatchToDOM&&console.error("The `eventBusDispatchToDOM` option/preference is deprecated, add event listeners to the EventBus instance rather than the DOM.")}on(eventName,listener){this._on(eventName,listener,{external:!0})}off(eventName,listener){this._off(eventName,listener,{external:!0})}dispatch(eventName){const eventListeners=this._listeners[eventName];if(!eventListeners||0===eventListeners.length){if(this._dispatchToDOM){dispatchDOMEvent(eventName,Array.prototype.slice.call(arguments,1))}return}const args=Array.prototype.slice.call(arguments,1);let externalListeners;eventListeners.slice(0).forEach((function({listener:listener,external:external}){if(external)return externalListeners||(externalListeners=[]),void externalListeners.push(listener);listener.apply(null,args)})),externalListeners&&(externalListeners.forEach((function(listener){listener.apply(null,args)})),externalListeners=null),this._dispatchToDOM&&dispatchDOMEvent(eventName,args)}_on(eventName,listener,options=null){let eventListeners=this._listeners[eventName];eventListeners||(this._listeners[eventName]=eventListeners=[]),eventListeners.push({listener:listener,external:!0===(options&&options.external)})}_off(eventName,listener,options=null){const eventListeners=this._listeners[eventName];if(eventListeners)for(let i=0,ii=eventListeners.length;i<ii;i++)if(eventListeners[i].listener===listener)return void eventListeners.splice(i,1)}}exports.EventBus=EventBus;let globalEventBus=null;function clamp(v,min,max){return Math.min(Math.max(v,min),max)}exports.ProgressBar=class ProgressBar{constructor(id,{height:height,width:width,units:units}={}){this.visible=!0,this.div=document.querySelector(id+" .progress"),this.bar=this.div.parentNode,this.height=height||100,this.width=width||100,this.units=units||"%",this.div.style.height=this.height+this.units,this.percent=0}_updateBar(){if(this._indeterminate)return this.div.classList.add("indeterminate"),void(this.div.style.width=this.width+this.units);this.div.classList.remove("indeterminate");const progressSize=this.width*this._percent/100;this.div.style.width=progressSize+this.units}get percent(){return this._percent}set percent(val){this._indeterminate=isNaN(val),this._percent=clamp(val,0,100),this._updateBar()}setWidth(viewer){if(!viewer)return;const scrollbarWidth=viewer.parentNode.offsetWidth-viewer.offsetWidth;scrollbarWidth>0&&(this.bar.style.width=`calc(100% - ${scrollbarWidth}px)`)}hide(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"),document.body.classList.remove("loadingInProgress"))}show(){this.visible||(this.visible=!0,document.body.classList.add("loadingInProgress"),this.bar.classList.remove("hidden"))}}},4306:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SimpleLinkService=exports.PDFLinkService=void 0;var _ui_utils=__webpack_require__(4236);exports.PDFLinkService=class PDFLinkService{constructor({eventBus:eventBus,externalLinkTarget:externalLinkTarget=null,externalLinkRel:externalLinkRel=null,externalLinkEnabled:externalLinkEnabled=!0,ignoreDestinationZoom:ignoreDestinationZoom=!1}={}){this.eventBus=eventBus||(0,_ui_utils.getGlobalEventBus)(),this.externalLinkTarget=externalLinkTarget,this.externalLinkRel=externalLinkRel,this.externalLinkEnabled=externalLinkEnabled,this._ignoreDestinationZoom=ignoreDestinationZoom,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this._pagesRefCache=null}setDocument(pdfDocument,baseUrl=null){this.baseUrl=baseUrl,this.pdfDocument=pdfDocument,this._pagesRefCache=Object.create(null)}setViewer(pdfViewer){this.pdfViewer=pdfViewer}setHistory(pdfHistory){this.pdfHistory=pdfHistory}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(value){this.pdfViewer.currentPageNumber=value}get rotation(){return this.pdfViewer.pagesRotation}set rotation(value){this.pdfViewer.pagesRotation=value}navigateTo(dest){const goToDestination=({namedDest:namedDest,explicitDest:explicitDest})=>{const destRef=explicitDest[0];let pageNumber;if(destRef instanceof Object){if(pageNumber=this._cachedPageNumber(destRef),null===pageNumber)return void this.pdfDocument.getPageIndex(destRef).then((pageIndex=>{this.cachePageRef(pageIndex+1,destRef),goToDestination({namedDest:namedDest,explicitDest:explicitDest})})).catch((()=>{console.error(`PDFLinkService.navigateTo: "${destRef}" is not a valid page reference, for dest="${dest}".`)}))}else{if(!Number.isInteger(destRef))return void console.error(`PDFLinkService.navigateTo: "${destRef}" is not a valid destination reference, for dest="${dest}".`);pageNumber=destRef+1}!pageNumber||pageNumber<1||pageNumber>this.pagesCount?console.error(`PDFLinkService.navigateTo: "${pageNumber}" is not a valid page number, for dest="${dest}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:namedDest,explicitDest:explicitDest,pageNumber:pageNumber})),this.pdfViewer.scrollPageIntoView({pageNumber:pageNumber,destArray:explicitDest,ignoreDestinationZoom:this._ignoreDestinationZoom}))};new Promise(((resolve,reject)=>{"string"!=typeof dest?resolve({namedDest:"",explicitDest:dest}):this.pdfDocument.getDestination(dest).then((destArray=>{resolve({namedDest:dest,explicitDest:destArray})}))})).then((data=>{Array.isArray(data.explicitDest)?goToDestination(data):console.error(`PDFLinkService.navigateTo: "${data.explicitDest}" is not a valid destination array, for dest="${dest}".`)}))}getDestinationHash(dest){if("string"==typeof dest)return this.getAnchorUrl("#"+escape(dest));if(Array.isArray(dest)){const str=JSON.stringify(dest);return this.getAnchorUrl("#"+escape(str))}return this.getAnchorUrl("")}getAnchorUrl(anchor){return(this.baseUrl||"")+anchor}setHash(hash){let pageNumber,dest;if(hash.includes("=")){const params=(0,_ui_utils.parseQueryString)(hash);if("search"in params&&this.eventBus.dispatch("findfromurlhash",{source:this,query:params.search.replace(/"/g,""),phraseSearch:"true"===params.phrase}),"nameddest"in params)return void this.navigateTo(params.nameddest);if("page"in params&&(pageNumber=0|params.page||1),"zoom"in params){const zoomArgs=params.zoom.split(","),zoomArg=zoomArgs[0],zoomArgNumber=parseFloat(zoomArg);zoomArg.includes("Fit")?"Fit"===zoomArg||"FitB"===zoomArg?dest=[null,{name:zoomArg}]:"FitH"===zoomArg||"FitBH"===zoomArg||"FitV"===zoomArg||"FitBV"===zoomArg?dest=[null,{name:zoomArg},zoomArgs.length>1?0|zoomArgs[1]:null]:"FitR"===zoomArg?5!==zoomArgs.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):dest=[null,{name:zoomArg},0|zoomArgs[1],0|zoomArgs[2],0|zoomArgs[3],0|zoomArgs[4]]:console.error(`PDFLinkService.setHash: "${zoomArg}" is not a valid zoom value.`):dest=[null,{name:"XYZ"},zoomArgs.length>1?0|zoomArgs[1]:null,zoomArgs.length>2?0|zoomArgs[2]:null,zoomArgNumber?zoomArgNumber/100:zoomArg]}dest?this.pdfViewer.scrollPageIntoView({pageNumber:pageNumber||this.page,destArray:dest,allowNegativeOffset:!0}):pageNumber&&(this.page=pageNumber),"pagemode"in params&&this.eventBus.dispatch("pagemode",{source:this,mode:params.pagemode})}else{dest=unescape(hash);try{dest=JSON.parse(dest),Array.isArray(dest)||(dest=dest.toString())}catch(ex){}if("string"==typeof dest||function isValidExplicitDestination(dest){if(!Array.isArray(dest))return!1;const destLength=dest.length;if(destLength<2)return!1;const page=dest[0];if(!("object"==typeof page&&Number.isInteger(page.num)&&Number.isInteger(page.gen)||Number.isInteger(page)&&page>=0))return!1;const zoom=dest[1];if("object"!=typeof zoom||"string"!=typeof zoom.name)return!1;let allowNull=!0;switch(zoom.name){case"XYZ":if(5!==destLength)return!1;break;case"Fit":case"FitB":return 2===destLength;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==destLength)return!1;break;case"FitR":if(6!==destLength)return!1;allowNull=!1;break;default:return!1}for(let i=2;i<destLength;i++){const param=dest[i];if(!("number"==typeof param||allowNull&&null===param))return!1}return!0}(dest))return void this.navigateTo(dest);console.error(`PDFLinkService.setHash: "${unescape(hash)}" is not a valid destination.`)}}executeNamedAction(action){switch(action){case"GoBack":this.pdfHistory&&this.pdfHistory.back();break;case"GoForward":this.pdfHistory&&this.pdfHistory.forward();break;case"NextPage":this.page<this.pagesCount&&this.page++;break;case"PrevPage":this.page>1&&this.page--;break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:action})}cachePageRef(pageNum,pageRef){if(!pageRef)return;const refStr=0===pageRef.gen?`${pageRef.num}R`:`${pageRef.num}R${pageRef.gen}`;this._pagesRefCache[refStr]=pageNum}_cachedPageNumber(pageRef){const refStr=0===pageRef.gen?`${pageRef.num}R`:`${pageRef.num}R${pageRef.gen}`;return this._pagesRefCache&&this._pagesRefCache[refStr]||null}isPageVisible(pageNumber){return this.pdfViewer.isPageVisible(pageNumber)}};exports.SimpleLinkService=class SimpleLinkService{constructor(){this.externalLinkTarget=null,this.externalLinkRel=null,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=!1}get pagesCount(){return 0}get page(){return 0}set page(value){}get rotation(){return 0}set rotation(value){}navigateTo(dest){}getDestinationHash(dest){return"#"}getAnchorUrl(hash){return"#"}setHash(hash){}executeNamedAction(action){}cachePageRef(pageNum,pageRef){}isPageVisible(pageNumber){return!0}}}}]);
//# sourceMappingURL=11.498df6e5.iframe.bundle.js.map